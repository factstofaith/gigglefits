{"ast":null,"code":"/**\n * useLocalStorage\n * \n * A hook for persisting and syncing state with localStorage.\n * \n * @module hooks/useLocalStorage\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\n/**\n * Custom hook for managing state that persists in localStorage\n * \n * @param {string} key - The localStorage key to use\n * @param {*} initialValue - The initial value to use if no value exists in localStorage\n * @param {Object} [options] - Additional options\n * @param {boolean} [options.sync=true] - Whether to sync state across tabs/windows\n * @param {boolean} [options.serialize=true] - Whether to serialize/deserialize values\n * @param {Function} [options.serializer=JSON.stringify] - Function to serialize values\n * @param {Function} [options.deserializer=JSON.parse] - Function to deserialize values\n * @returns {Array} [storedValue, setValue, removeValue] - Tuple with stored value, setter, and remover\n */\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const {\n    sync = true,\n    serialize = true,\n    serializer = JSON.stringify,\n    deserializer = JSON.parse\n  } = options;\n\n  // Create a ref to track if component is mounted\n  const isMounted = useRef(false);\n\n  // Function to get the initial value from localStorage or use the provided initialValue\n  const getInitialValue = () => {\n    try {\n      const item = window.localStorage.getItem(key);\n\n      // If the key exists in localStorage\n      if (item !== null) {\n        return serialize ? deserializer(item) : item;\n      }\n\n      // Otherwise initialize with the provided value\n      const initialValueToStore = initialValue instanceof Function ? initialValue() : initialValue;\n      if (initialValueToStore !== undefined && serialize) {\n        window.localStorage.setItem(key, serializer(initialValueToStore));\n      } else if (initialValueToStore !== undefined) {\n        window.localStorage.setItem(key, initialValueToStore);\n      }\n      return initialValueToStore;\n    } catch (error) {\n      console.error(`Error reading localStorage key \"${key}\":`, error);\n      return initialValue instanceof Function ? initialValue() : initialValue;\n    }\n  };\n\n  // State to store the current value\n  const [storedValue, setStoredValue] = useState(getInitialValue);\n\n  // Update localStorage when the value changes\n  const setValue = useCallback(value => {\n    try {\n      // Allow value to be a function\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n\n      // Save state\n      setStoredValue(valueToStore);\n\n      // Save to localStorage\n      if (valueToStore === undefined) {\n        window.localStorage.removeItem(key);\n      } else if (serialize) {\n        window.localStorage.setItem(key, serializer(valueToStore));\n      } else {\n        window.localStorage.setItem(key, valueToStore);\n      }\n    } catch (error) {\n      console.error(`Error setting localStorage key \"${key}\":`, error);\n    }\n  }, [key, serialize, serializer, storedValue]);\n\n  // Function to remove the value from localStorage\n  const removeValue = useCallback(() => {\n    try {\n      // Remove from localStorage\n      window.localStorage.removeItem(key);\n\n      // Reset state to undefined\n      setStoredValue(undefined);\n    } catch (error) {\n      console.error(`Error removing localStorage key \"${key}\":`, error);\n    }\n  }, [key]);\n\n  // Listen for changes to localStorage in other tabs/windows\n  useEffect(() => {\n    isMounted.current = true;\n    const handleStorageChange = event => {\n      if (!isMounted.current || !sync || event.key !== key) return;\n      try {\n        // Get the new value\n        const newValue = event.newValue ? serialize ? deserializer(event.newValue) : event.newValue : undefined;\n\n        // Update state with the new value\n        setStoredValue(newValue);\n      } catch (error) {\n        console.error(`Error syncing localStorage key \"${key}\":`, error);\n      }\n    };\n\n    // Add event listener\n    if (sync) {\n      window.addEventListener('storage', handleStorageChange);\n    }\n\n    // Remove event listener on cleanup\n    return () => {\n      isMounted.current = false;\n      if (sync) {\n        window.removeEventListener('storage', handleStorageChange);\n      }\n    };\n  }, [key, sync, serialize, deserializer]);\n  return [storedValue, setValue, removeValue];\n}\nexport default useLocalStorage;","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","useLocalStorage","key","initialValue","options","sync","serialize","serializer","JSON","stringify","deserializer","parse","isMounted","getInitialValue","item","window","localStorage","getItem","initialValueToStore","Function","undefined","setItem","error","console","storedValue","setStoredValue","setValue","value","valueToStore","removeItem","removeValue","current","handleStorageChange","event","newValue","addEventListener","removeEventListener"],"sources":["/home/ai-dev/Desktop/tap-integration-platform/project/finishline/src/hooks/useLocalStorage.js"],"sourcesContent":["/**\n * useLocalStorage\n * \n * A hook for persisting and syncing state with localStorage.\n * \n * @module hooks/useLocalStorage\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\n/**\n * Custom hook for managing state that persists in localStorage\n * \n * @param {string} key - The localStorage key to use\n * @param {*} initialValue - The initial value to use if no value exists in localStorage\n * @param {Object} [options] - Additional options\n * @param {boolean} [options.sync=true] - Whether to sync state across tabs/windows\n * @param {boolean} [options.serialize=true] - Whether to serialize/deserialize values\n * @param {Function} [options.serializer=JSON.stringify] - Function to serialize values\n * @param {Function} [options.deserializer=JSON.parse] - Function to deserialize values\n * @returns {Array} [storedValue, setValue, removeValue] - Tuple with stored value, setter, and remover\n */\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const {\n    sync = true,\n    serialize = true,\n    serializer = JSON.stringify,\n    deserializer = JSON.parse,\n  } = options;\n  \n  // Create a ref to track if component is mounted\n  const isMounted = useRef(false);\n  \n  // Function to get the initial value from localStorage or use the provided initialValue\n  const getInitialValue = () => {\n    try {\n      const item = window.localStorage.getItem(key);\n      \n      // If the key exists in localStorage\n      if (item !== null) {\n        return serialize ? deserializer(item) : item;\n      }\n      \n      // Otherwise initialize with the provided value\n      const initialValueToStore = initialValue instanceof Function ? initialValue() : initialValue;\n      if (initialValueToStore !== undefined && serialize) {\n        window.localStorage.setItem(key, serializer(initialValueToStore));\n      } else if (initialValueToStore !== undefined) {\n        window.localStorage.setItem(key, initialValueToStore);\n      }\n      return initialValueToStore;\n    } catch (error) {\n      console.error(`Error reading localStorage key \"${key}\":`, error);\n      return initialValue instanceof Function ? initialValue() : initialValue;\n    }\n  };\n  \n  // State to store the current value\n  const [storedValue, setStoredValue] = useState(getInitialValue);\n  \n  // Update localStorage when the value changes\n  const setValue = useCallback((value) => {\n    try {\n      // Allow value to be a function\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      \n      // Save state\n      setStoredValue(valueToStore);\n      \n      // Save to localStorage\n      if (valueToStore === undefined) {\n        window.localStorage.removeItem(key);\n      } else if (serialize) {\n        window.localStorage.setItem(key, serializer(valueToStore));\n      } else {\n        window.localStorage.setItem(key, valueToStore);\n      }\n    } catch (error) {\n      console.error(`Error setting localStorage key \"${key}\":`, error);\n    }\n  }, [key, serialize, serializer, storedValue]);\n  \n  // Function to remove the value from localStorage\n  const removeValue = useCallback(() => {\n    try {\n      // Remove from localStorage\n      window.localStorage.removeItem(key);\n      \n      // Reset state to undefined\n      setStoredValue(undefined);\n    } catch (error) {\n      console.error(`Error removing localStorage key \"${key}\":`, error);\n    }\n  }, [key]);\n  \n  // Listen for changes to localStorage in other tabs/windows\n  useEffect(() => {\n    isMounted.current = true;\n    \n    const handleStorageChange = (event) => {\n      if (!isMounted.current || !sync || event.key !== key) return;\n      \n      try {\n        // Get the new value\n        const newValue = event.newValue \n          ? (serialize ? deserializer(event.newValue) : event.newValue) \n          : undefined;\n        \n        // Update state with the new value\n        setStoredValue(newValue);\n      } catch (error) {\n        console.error(`Error syncing localStorage key \"${key}\":`, error);\n      }\n    };\n    \n    // Add event listener\n    if (sync) {\n      window.addEventListener('storage', handleStorageChange);\n    }\n    \n    // Remove event listener on cleanup\n    return () => {\n      isMounted.current = false;\n      if (sync) {\n        window.removeEventListener('storage', handleStorageChange);\n      }\n    };\n  }, [key, sync, serialize, deserializer]);\n  \n  return [storedValue, setValue, removeValue];\n}\n\nexport default useLocalStorage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}