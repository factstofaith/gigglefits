{"ast":null,"code":"/**\n * Guided Tour Component\n * \n * A component that provides step-by-step guided tours through different features of the application.\n * Tours can be configured with multiple steps, highlighting specific UI elements with descriptions.\n * \n * @component\n */import React,{useState,useEffect,useCallback}from'react';import{Box,Button,Typography,Paper,Fade,IconButton,Backdrop,Portal,Tooltip,Dialog,DialogTitle,DialogContent,DialogActions,LinearProgress}from'@mui/material';import{Close as CloseIcon,NavigateNext as NextIcon,NavigateBefore as PrevIcon,Info as InfoIcon,CheckCircle as CheckCircleIcon,Cancel as CancelIcon}from'@mui/icons-material';// Store tour state in localStorage to resume interrupted tours\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STORAGE_KEY='tap_guided_tours';/**\n * Calculate position for the tour spotlight\n * @param {HTMLElement} element - DOM element to highlight\n * @returns {Object} Position object with coordinates and dimensions\n */const calculateElementPosition=element=>{if(!element)return null;const rect=element.getBoundingClientRect();const scrollLeft=window.pageXOffset||document.documentElement.scrollLeft;const scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft,width:rect.width,height:rect.height,bottom:rect.bottom+scrollTop,right:rect.right+scrollLeft,centerX:rect.left+scrollLeft+rect.width/2,centerY:rect.top+scrollTop+rect.height/2};};/**\n * Calculate the best position for the tooltip based on element position\n * @param {Object} elementPosition - Element position object\n * @param {number} tooltipWidth - Width of the tooltip\n * @param {number} tooltipHeight - Height of the tooltip\n * @returns {Object} Position object for the tooltip\n */const calculateTooltipPosition=function(elementPosition){let tooltipWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:320;let tooltipHeight=arguments.length>2&&arguments[2]!==undefined?arguments[2]:200;if(!elementPosition)return{top:'50%',left:'50%',transform:'translate(-50%, -50%)'};const windowWidth=window.innerWidth;const windowHeight=window.innerHeight;// Try to position below the element first\nlet position={top:elementPosition.bottom+10,left:elementPosition.centerX-tooltipWidth/2};// Check if tooltip would go off-screen to the right\nif(position.left+tooltipWidth>windowWidth-20){position.left=windowWidth-tooltipWidth-20;}// Check if tooltip would go off-screen to the left\nif(position.left<20){position.left=20;}// If positioning below would go off-screen, try above\nif(position.top+tooltipHeight>windowHeight-20){position={top:elementPosition.top-tooltipHeight-10,left:position.left};// If still doesn't fit, position to the right or left of the element\nif(position.top<20){// Try right first\nif(elementPosition.right+tooltipWidth<windowWidth-20){position={top:elementPosition.centerY-tooltipHeight/2,left:elementPosition.right+10};}// Try left if right doesn't work\nelse if(elementPosition.left-tooltipWidth>20){position={top:elementPosition.centerY-tooltipHeight/2,left:elementPosition.left-tooltipWidth-10};}// Default to center of screen if all else fails\nelse{position={top:windowHeight/2-tooltipHeight/2,left:windowWidth/2-tooltipWidth/2};}}}return position;};/**\n * Tour Spotlight component to highlight UI elements\n * @param {Object} props - Component props \n * @returns {JSX.Element} Tour spotlight component\n */const TourSpotlight=_ref=>{let{elementSelector,visible,pulse}=_ref;const[position,setPosition]=useState(null);useEffect(()=>{if(!visible)return;const updatePosition=()=>{const element=document.querySelector(elementSelector);if(element){setPosition(calculateElementPosition(element));// Scroll element into view if needed\nconst rect=element.getBoundingClientRect();const isInViewport=rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth);if(!isInViewport){element.scrollIntoView({behavior:'smooth',block:'center'});}}};updatePosition();// Update position on window resize\nwindow.addEventListener('resize',updatePosition);return()=>{window.removeEventListener('resize',updatePosition);};},[elementSelector,visible]);if(!visible||!position)return null;return/*#__PURE__*/_jsx(Box,{sx:{position:'absolute',top:position.top,left:position.left,width:position.width,height:position.height,boxShadow:'0 0 0 9999px rgba(0,0,0,0.7)',borderRadius:'4px',zIndex:9998,pointerEvents:'none','&::after':pulse?{content:'\"\"',position:'absolute',top:-4,left:-4,right:-4,bottom:-4,border:'2px solid',borderColor:'primary.main',borderRadius:'6px',animation:'pulse 1.5s infinite'}:{}}});};/**\n * Tour Tooltip component to display step information\n * @param {Object} props - Component props\n * @returns {JSX.Element} Tour tooltip component\n */const TourTooltip=_ref2=>{let{step,totalSteps,title,content,position,onNext,onPrev,onClose,onSkip}=_ref2;return/*#__PURE__*/_jsxs(Paper,{elevation:4,sx:{position:'absolute',top:(position===null||position===void 0?void 0:position.top)||'50%',left:(position===null||position===void 0?void 0:position.left)||'50%',width:320,maxWidth:'calc(100vw - 40px)',transform:position?'none':'translate(-50%, -50%)',zIndex:9999,overflow:'hidden',borderRadius:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{bgcolor:'primary.main',color:'primary.contrastText',p:1.5,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{fontWeight:'medium'},children:title||'Guided Tour'}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"inherit\",onClick:onClose,\"aria-label\":\"Close tour\",children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"})})})]}),/*#__PURE__*/_jsx(Box,{sx:{p:2,pb:1},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:content})}),/*#__PURE__*/_jsx(Box,{sx:{px:1,py:0.5},children:/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:step/totalSteps*100,sx:{height:4,mb:1}})}),/*#__PURE__*/_jsxs(Box,{sx:{p:1.5,display:'flex',justifyContent:'space-between',borderTop:'1px solid',borderColor:'divider'},children:[/*#__PURE__*/_jsx(Button,{onClick:onSkip,size:\"small\",sx:{minWidth:'auto'},children:\"Skip\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[step>1&&/*#__PURE__*/_jsx(Button,{onClick:onPrev,variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(PrevIcon,{}),children:\"Back\"}),/*#__PURE__*/_jsx(Button,{onClick:onNext,variant:\"contained\",color:\"primary\",size:\"small\",endIcon:step<totalSteps?/*#__PURE__*/_jsx(NextIcon,{}):/*#__PURE__*/_jsx(CheckCircleIcon,{}),children:step<totalSteps?'Next':'Finish'})]})]})]});};/**\n * Tour selection dialog component\n * @param {Object} props - Component props\n * @returns {JSX.Element} Tour selection dialog\n */const TourSelectionDialog=_ref3=>{let{open,onClose,tours,onSelectTour}=_ref3;return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[\"Available Guided Tours\",/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",onClick:onClose,sx:{position:'absolute',right:8,top:8,color:theme=>theme.palette.grey[500]},children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",paragraph:true,children:\"Select a guided tour to learn about different features of the application.\"}),tours.map(tour=>/*#__PURE__*/_jsxs(Paper,{elevation:0,sx:{p:2,mb:2,border:'1px solid',borderColor:'divider',borderRadius:1,cursor:'pointer',transition:'all 0.2s','&:hover':{bgcolor:'action.hover',borderColor:'primary.light'}},onClick:()=>onSelectTour(tour.id),children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{mb:0.5},children:tour.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:tour.description}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mt:1,color:'text.secondary',fontSize:'0.75rem'},children:[/*#__PURE__*/_jsx(InfoIcon,{sx:{fontSize:'0.875rem',mr:0.5}}),tour.steps.length,\" steps \\u2022 \",tour.duration,\" min\"]})]},tour.id))]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,children:\"Close\"})})]});};/**\n * GuidedTour component\n * @param {Object} props - Component props\n * @returns {JSX.Element} The GuidedTour component\n */const GuidedTour=_ref4=>{let{tours,activeTourId,onTourComplete,onTourSkip,autoStart=false}=_ref4;const[isActive,setIsActive]=useState(false);const[currentTourId,setCurrentTourId]=useState(null);const[currentStep,setCurrentStep]=useState(1);const[tooltipPosition,setTooltipPosition]=useState(null);const[showTourSelector,setShowTourSelector]=useState(false);const[completedTours,setCompletedTours]=useState([]);// Find current tour data\nconst currentTour=tours.find(tour=>tour.id===currentTourId);const currentStepData=currentTour===null||currentTour===void 0?void 0:currentTour.steps[currentStep-1];// Load completed tours from localStorage\nuseEffect(()=>{try{const storedData=localStorage.getItem(STORAGE_KEY);if(storedData){const parsedData=JSON.parse(storedData);setCompletedTours(parsedData.completedTours||[]);// Check for interrupted tour\nif(parsedData.interrupted&&autoStart){setCurrentTourId(parsedData.tourId);setCurrentStep(parsedData.step);setIsActive(true);}}}catch(error){console.error('Error loading tour data:',error);}},[autoStart]);// Save tour state to localStorage\nconst saveTourState=useCallback(function(tourId,step){let interrupted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;try{localStorage.setItem(STORAGE_KEY,JSON.stringify({tourId,step,interrupted,completedTours}));}catch(error){console.error('Error saving tour state:',error);}},[completedTours]);// Start a tour\nconst startTour=useCallback(tourId=>{const tour=tours.find(t=>t.id===tourId);if(!tour)return;setCurrentTourId(tourId);setCurrentStep(1);setIsActive(true);saveTourState(tourId,1,true);setShowTourSelector(false);},[tours,saveTourState]);// Move to next step\nconst nextStep=useCallback(()=>{if(!currentTour)return;if(currentStep<currentTour.steps.length){const newStep=currentStep+1;setCurrentStep(newStep);saveTourState(currentTourId,newStep,true);}else{// Tour complete\nconst newCompletedTours=[...completedTours,currentTourId];setCompletedTours(newCompletedTours);setIsActive(false);saveTourState(null,1,false);if(onTourComplete){onTourComplete(currentTourId);}}},[currentTour,currentStep,currentTourId,completedTours,saveTourState,onTourComplete]);// Move to previous step\nconst prevStep=useCallback(()=>{if(currentStep>1){const newStep=currentStep-1;setCurrentStep(newStep);saveTourState(currentTourId,newStep,true);}},[currentStep,currentTourId,saveTourState]);// Close the tour\nconst closeTour=useCallback(()=>{setIsActive(false);saveTourState(null,1,false);},[saveTourState]);// Skip the tour\nconst skipTour=useCallback(()=>{setIsActive(false);saveTourState(null,1,false);if(onTourSkip){onTourSkip(currentTourId,currentStep);}},[currentTourId,currentStep,saveTourState,onTourSkip]);// Open tour selector\nconst openTourSelector=useCallback(()=>{setShowTourSelector(true);},[]);// Update element position when step changes\nuseEffect(()=>{if(!isActive||!currentStepData)return;const updateTooltipPosition=()=>{if(currentStepData.elementSelector){const element=document.querySelector(currentStepData.elementSelector);if(element){const elementPosition=calculateElementPosition(element);const position=calculateTooltipPosition(elementPosition,320,200);setTooltipPosition(position);}else{// Element not found, use default position\nsetTooltipPosition({top:'50%',left:'50%',transform:'translate(-50%, -50%)'});}}else{// No element to highlight, use default position\nsetTooltipPosition({top:'50%',left:'50%',transform:'translate(-50%, -50%)'});}};// Update position after a short delay to allow for DOM updates\nconst timer=setTimeout(updateTooltipPosition,100);return()=>clearTimeout(timer);},[isActive,currentStepData,currentStep]);// Auto start tour if specified\nuseEffect(()=>{if(activeTourId&&!isActive&&autoStart){startTour(activeTourId);}},[activeTourId,isActive,autoStart,startTour]);// Render the tour components when active\nif(isActive&&currentTour&&currentStepData){return/*#__PURE__*/_jsxs(Portal,{children:[currentStepData.overlay&&/*#__PURE__*/_jsx(Backdrop,{open:true,sx:{zIndex:9997,bgcolor:'rgba(0,0,0,0.7)'},onClick:currentStepData.clickThrough?null:e=>e.stopPropagation()}),currentStepData.elementSelector&&/*#__PURE__*/_jsx(TourSpotlight,{elementSelector:currentStepData.elementSelector,visible:isActive,pulse:currentStepData.pulse}),/*#__PURE__*/_jsx(Fade,{in:isActive,children:/*#__PURE__*/_jsx(TourTooltip,{step:currentStep,totalSteps:currentTour.steps.length,title:currentTour.title,content:currentStepData.content,position:tooltipPosition,onNext:nextStep,onPrev:prevStep,onClose:closeTour,onSkip:skipTour})})]});}// Tour selection dialog\nreturn/*#__PURE__*/_jsx(TourSelectionDialog,{open:showTourSelector,onClose:()=>setShowTourSelector(false),tours:tours,onSelectTour:startTour});};// Add custom CSS for animations\nconst styleEl=document.createElement('style');styleEl.textContent=`\n  @keyframes pulse {\n    0% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 0.6;\n      transform: scale(1.05);\n    }\n    100% {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n`;document.head.appendChild(styleEl);export default GuidedTour;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Button","Typography","Paper","Fade","IconButton","Backdrop","Portal","Tooltip","Dialog","DialogTitle","DialogContent","DialogActions","LinearProgress","Close","CloseIcon","NavigateNext","NextIcon","NavigateBefore","PrevIcon","Info","InfoIcon","CheckCircle","CheckCircleIcon","Cancel","CancelIcon","jsx","_jsx","jsxs","_jsxs","STORAGE_KEY","calculateElementPosition","element","rect","getBoundingClientRect","scrollLeft","window","pageXOffset","document","documentElement","scrollTop","pageYOffset","top","left","width","height","bottom","right","centerX","centerY","calculateTooltipPosition","elementPosition","tooltipWidth","arguments","length","undefined","tooltipHeight","transform","windowWidth","innerWidth","windowHeight","innerHeight","position","TourSpotlight","_ref","elementSelector","visible","pulse","setPosition","updatePosition","querySelector","isInViewport","clientHeight","clientWidth","scrollIntoView","behavior","block","addEventListener","removeEventListener","sx","boxShadow","borderRadius","zIndex","pointerEvents","content","border","borderColor","animation","TourTooltip","_ref2","step","totalSteps","title","onNext","onPrev","onClose","onSkip","elevation","maxWidth","overflow","children","bgcolor","color","p","display","justifyContent","alignItems","variant","fontWeight","size","onClick","fontSize","pb","px","py","value","mb","borderTop","minWidth","gap","startIcon","endIcon","TourSelectionDialog","_ref3","open","tours","onSelectTour","fullWidth","theme","palette","grey","dividers","paragraph","map","tour","cursor","transition","id","description","mt","mr","steps","duration","GuidedTour","_ref4","activeTourId","onTourComplete","onTourSkip","autoStart","isActive","setIsActive","currentTourId","setCurrentTourId","currentStep","setCurrentStep","tooltipPosition","setTooltipPosition","showTourSelector","setShowTourSelector","completedTours","setCompletedTours","currentTour","find","currentStepData","storedData","localStorage","getItem","parsedData","JSON","parse","interrupted","tourId","error","console","saveTourState","setItem","stringify","startTour","t","nextStep","newStep","newCompletedTours","prevStep","closeTour","skipTour","openTourSelector","updateTooltipPosition","timer","setTimeout","clearTimeout","overlay","clickThrough","e","stopPropagation","in","styleEl","createElement","textContent","head","appendChild"],"sources":["/home/ai-dev/Desktop/tap-integration-platform/frontend/src/components/common/GuidedTour.jsx"],"sourcesContent":["/**\n * Guided Tour Component\n * \n * A component that provides step-by-step guided tours through different features of the application.\n * Tours can be configured with multiple steps, highlighting specific UI elements with descriptions.\n * \n * @component\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { \n  Box, \n  Button, \n  Typography, \n  Paper, \n  Fade, \n  IconButton,\n  Backdrop,\n  Portal,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  LinearProgress\n} from '@mui/material';\nimport {\n  Close as CloseIcon,\n  NavigateNext as NextIcon,\n  NavigateBefore as PrevIcon,\n  Info as InfoIcon,\n  CheckCircle as CheckCircleIcon,\n  Cancel as CancelIcon\n} from '@mui/icons-material';\n\n// Store tour state in localStorage to resume interrupted tours\nconst STORAGE_KEY = 'tap_guided_tours';\n\n/**\n * Calculate position for the tour spotlight\n * @param {HTMLElement} element - DOM element to highlight\n * @returns {Object} Position object with coordinates and dimensions\n */\nconst calculateElementPosition = (element) => {\n  if (!element) return null;\n  \n  const rect = element.getBoundingClientRect();\n  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n  \n  return {\n    top: rect.top + scrollTop,\n    left: rect.left + scrollLeft,\n    width: rect.width,\n    height: rect.height,\n    bottom: rect.bottom + scrollTop,\n    right: rect.right + scrollLeft,\n    centerX: rect.left + scrollLeft + rect.width / 2,\n    centerY: rect.top + scrollTop + rect.height / 2\n  };\n};\n\n/**\n * Calculate the best position for the tooltip based on element position\n * @param {Object} elementPosition - Element position object\n * @param {number} tooltipWidth - Width of the tooltip\n * @param {number} tooltipHeight - Height of the tooltip\n * @returns {Object} Position object for the tooltip\n */\nconst calculateTooltipPosition = (elementPosition, tooltipWidth = 320, tooltipHeight = 200) => {\n  if (!elementPosition) return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' };\n  \n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  \n  // Try to position below the element first\n  let position = {\n    top: elementPosition.bottom + 10,\n    left: elementPosition.centerX - tooltipWidth / 2\n  };\n  \n  // Check if tooltip would go off-screen to the right\n  if (position.left + tooltipWidth > windowWidth - 20) {\n    position.left = windowWidth - tooltipWidth - 20;\n  }\n  \n  // Check if tooltip would go off-screen to the left\n  if (position.left < 20) {\n    position.left = 20;\n  }\n  \n  // If positioning below would go off-screen, try above\n  if (position.top + tooltipHeight > windowHeight - 20) {\n    position = {\n      top: elementPosition.top - tooltipHeight - 10,\n      left: position.left\n    };\n    \n    // If still doesn't fit, position to the right or left of the element\n    if (position.top < 20) {\n      // Try right first\n      if (elementPosition.right + tooltipWidth < windowWidth - 20) {\n        position = {\n          top: elementPosition.centerY - tooltipHeight / 2,\n          left: elementPosition.right + 10\n        };\n      } \n      // Try left if right doesn't work\n      else if (elementPosition.left - tooltipWidth > 20) {\n        position = {\n          top: elementPosition.centerY - tooltipHeight / 2,\n          left: elementPosition.left - tooltipWidth - 10\n        };\n      }\n      // Default to center of screen if all else fails\n      else {\n        position = {\n          top: windowHeight / 2 - tooltipHeight / 2,\n          left: windowWidth / 2 - tooltipWidth / 2\n        };\n      }\n    }\n  }\n  \n  return position;\n};\n\n/**\n * Tour Spotlight component to highlight UI elements\n * @param {Object} props - Component props \n * @returns {JSX.Element} Tour spotlight component\n */\nconst TourSpotlight = ({ elementSelector, visible, pulse }) => {\n  const [position, setPosition] = useState(null);\n  \n  useEffect(() => {\n    if (!visible) return;\n    \n    const updatePosition = () => {\n      const element = document.querySelector(elementSelector);\n      if (element) {\n        setPosition(calculateElementPosition(element));\n        \n        // Scroll element into view if needed\n        const rect = element.getBoundingClientRect();\n        const isInViewport = (\n          rect.top >= 0 &&\n          rect.left >= 0 &&\n          rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n          rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n        \n        if (!isInViewport) {\n          element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n      }\n    };\n    \n    updatePosition();\n    \n    // Update position on window resize\n    window.addEventListener('resize', updatePosition);\n    \n    return () => {\n      window.removeEventListener('resize', updatePosition);\n    };\n  }, [elementSelector, visible]);\n  \n  if (!visible || !position) return null;\n  \n  return (\n    <Box\n      sx={{\n        position: 'absolute',\n        top: position.top,\n        left: position.left,\n        width: position.width,\n        height: position.height,\n        boxShadow: '0 0 0 9999px rgba(0,0,0,0.7)',\n        borderRadius: '4px',\n        zIndex: 9998,\n        pointerEvents: 'none',\n        '&::after': pulse ? {\n          content: '\"\"',\n          position: 'absolute',\n          top: -4,\n          left: -4,\n          right: -4,\n          bottom: -4,\n          border: '2px solid',\n          borderColor: 'primary.main',\n          borderRadius: '6px',\n          animation: 'pulse 1.5s infinite'\n        } : {}\n      }}\n    />\n  );\n};\n\n/**\n * Tour Tooltip component to display step information\n * @param {Object} props - Component props\n * @returns {JSX.Element} Tour tooltip component\n */\nconst TourTooltip = ({ \n  step, \n  totalSteps, \n  title, \n  content, \n  position, \n  onNext, \n  onPrev, \n  onClose, \n  onSkip \n}) => {\n  return (\n    <Paper\n      elevation={4}\n      sx={{\n        position: 'absolute',\n        top: position?.top || '50%',\n        left: position?.left || '50%',\n        width: 320,\n        maxWidth: 'calc(100vw - 40px)',\n        transform: position ? 'none' : 'translate(-50%, -50%)',\n        zIndex: 9999,\n        overflow: 'hidden',\n        borderRadius: 2\n      }}\n    >\n      <Box sx={{ \n        bgcolor: 'primary.main', \n        color: 'primary.contrastText',\n        p: 1.5,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}>\n        <Typography variant=\"subtitle1\" sx={{ fontWeight: 'medium' }}>\n          {title || 'Guided Tour'}\n        </Typography>\n        <Box>\n          <IconButton \n            size=\"small\" \n            color=\"inherit\"\n            onClick={onClose}\n            aria-label=\"Close tour\"\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </Box>\n      </Box>\n      \n      <Box sx={{ p: 2, pb: 1 }}>\n        <Typography variant=\"body2\">\n          {content}\n        </Typography>\n      </Box>\n      \n      <Box sx={{ px: 1, py: 0.5 }}>\n        <LinearProgress \n          variant=\"determinate\" \n          value={(step / totalSteps) * 100} \n          sx={{ height: 4, mb: 1 }} \n        />\n      </Box>\n      \n      <Box sx={{ \n        p: 1.5,\n        display: 'flex',\n        justifyContent: 'space-between',\n        borderTop: '1px solid',\n        borderColor: 'divider'\n      }}>\n        <Button \n          onClick={onSkip}\n          size=\"small\"\n          sx={{ minWidth: 'auto' }}\n        >\n          Skip\n        </Button>\n        \n        <Box sx={{ display: 'flex', gap: 1 }}>\n          {step > 1 && (\n            <Button\n              onClick={onPrev}\n              variant=\"outlined\"\n              size=\"small\"\n              startIcon={<PrevIcon />}\n            >\n              Back\n            </Button>\n          )}\n          \n          <Button\n            onClick={onNext}\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"small\"\n            endIcon={step < totalSteps ? <NextIcon /> : <CheckCircleIcon />}\n          >\n            {step < totalSteps ? 'Next' : 'Finish'}\n          </Button>\n        </Box>\n      </Box>\n    </Paper>\n  );\n};\n\n/**\n * Tour selection dialog component\n * @param {Object} props - Component props\n * @returns {JSX.Element} Tour selection dialog\n */\nconst TourSelectionDialog = ({ open, onClose, tours, onSelectTour }) => {\n  return (\n    <Dialog \n      open={open} \n      onClose={onClose}\n      maxWidth=\"sm\"\n      fullWidth\n    >\n      <DialogTitle>\n        Available Guided Tours\n        <IconButton\n          aria-label=\"close\"\n          onClick={onClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n        >\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      \n      <DialogContent dividers>\n        <Typography variant=\"body2\" paragraph>\n          Select a guided tour to learn about different features of the application.\n        </Typography>\n        \n        {tours.map((tour) => (\n          <Paper\n            key={tour.id}\n            elevation={0}\n            sx={{\n              p: 2,\n              mb: 2,\n              border: '1px solid',\n              borderColor: 'divider',\n              borderRadius: 1,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              '&:hover': {\n                bgcolor: 'action.hover',\n                borderColor: 'primary.light'\n              }\n            }}\n            onClick={() => onSelectTour(tour.id)}\n          >\n            <Typography variant=\"subtitle1\" sx={{ mb: 0.5 }}>\n              {tour.title}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {tour.description}\n            </Typography>\n            <Box sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              mt: 1,\n              color: 'text.secondary',\n              fontSize: '0.75rem'\n            }}>\n              <InfoIcon sx={{ fontSize: '0.875rem', mr: 0.5 }} />\n              {tour.steps.length} steps • {tour.duration} min\n            </Box>\n          </Paper>\n        ))}\n      </DialogContent>\n      \n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\n/**\n * GuidedTour component\n * @param {Object} props - Component props\n * @returns {JSX.Element} The GuidedTour component\n */\nconst GuidedTour = ({\n  tours,\n  activeTourId,\n  onTourComplete,\n  onTourSkip,\n  autoStart = false\n}) => {\n  const [isActive, setIsActive] = useState(false);\n  const [currentTourId, setCurrentTourId] = useState(null);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [tooltipPosition, setTooltipPosition] = useState(null);\n  const [showTourSelector, setShowTourSelector] = useState(false);\n  const [completedTours, setCompletedTours] = useState([]);\n  \n  // Find current tour data\n  const currentTour = tours.find(tour => tour.id === currentTourId);\n  const currentStepData = currentTour?.steps[currentStep - 1];\n  \n  // Load completed tours from localStorage\n  useEffect(() => {\n    try {\n      const storedData = localStorage.getItem(STORAGE_KEY);\n      if (storedData) {\n        const parsedData = JSON.parse(storedData);\n        setCompletedTours(parsedData.completedTours || []);\n        \n        // Check for interrupted tour\n        if (parsedData.interrupted && autoStart) {\n          setCurrentTourId(parsedData.tourId);\n          setCurrentStep(parsedData.step);\n          setIsActive(true);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading tour data:', error);\n    }\n  }, [autoStart]);\n  \n  // Save tour state to localStorage\n  const saveTourState = useCallback((tourId, step, interrupted = false) => {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify({\n        tourId,\n        step,\n        interrupted,\n        completedTours\n      }));\n    } catch (error) {\n      console.error('Error saving tour state:', error);\n    }\n  }, [completedTours]);\n  \n  // Start a tour\n  const startTour = useCallback((tourId) => {\n    const tour = tours.find(t => t.id === tourId);\n    if (!tour) return;\n    \n    setCurrentTourId(tourId);\n    setCurrentStep(1);\n    setIsActive(true);\n    saveTourState(tourId, 1, true);\n    setShowTourSelector(false);\n  }, [tours, saveTourState]);\n  \n  // Move to next step\n  const nextStep = useCallback(() => {\n    if (!currentTour) return;\n    \n    if (currentStep < currentTour.steps.length) {\n      const newStep = currentStep + 1;\n      setCurrentStep(newStep);\n      saveTourState(currentTourId, newStep, true);\n    } else {\n      // Tour complete\n      const newCompletedTours = [...completedTours, currentTourId];\n      setCompletedTours(newCompletedTours);\n      setIsActive(false);\n      \n      saveTourState(null, 1, false);\n      \n      if (onTourComplete) {\n        onTourComplete(currentTourId);\n      }\n    }\n  }, [currentTour, currentStep, currentTourId, completedTours, saveTourState, onTourComplete]);\n  \n  // Move to previous step\n  const prevStep = useCallback(() => {\n    if (currentStep > 1) {\n      const newStep = currentStep - 1;\n      setCurrentStep(newStep);\n      saveTourState(currentTourId, newStep, true);\n    }\n  }, [currentStep, currentTourId, saveTourState]);\n  \n  // Close the tour\n  const closeTour = useCallback(() => {\n    setIsActive(false);\n    saveTourState(null, 1, false);\n  }, [saveTourState]);\n  \n  // Skip the tour\n  const skipTour = useCallback(() => {\n    setIsActive(false);\n    saveTourState(null, 1, false);\n    \n    if (onTourSkip) {\n      onTourSkip(currentTourId, currentStep);\n    }\n  }, [currentTourId, currentStep, saveTourState, onTourSkip]);\n  \n  // Open tour selector\n  const openTourSelector = useCallback(() => {\n    setShowTourSelector(true);\n  }, []);\n  \n  // Update element position when step changes\n  useEffect(() => {\n    if (!isActive || !currentStepData) return;\n    \n    const updateTooltipPosition = () => {\n      if (currentStepData.elementSelector) {\n        const element = document.querySelector(currentStepData.elementSelector);\n        if (element) {\n          const elementPosition = calculateElementPosition(element);\n          const position = calculateTooltipPosition(\n            elementPosition,\n            320,\n            200\n          );\n          setTooltipPosition(position);\n        } else {\n          // Element not found, use default position\n          setTooltipPosition({ top: '50%', left: '50%', transform: 'translate(-50%, -50%)' });\n        }\n      } else {\n        // No element to highlight, use default position\n        setTooltipPosition({ top: '50%', left: '50%', transform: 'translate(-50%, -50%)' });\n      }\n    };\n    \n    // Update position after a short delay to allow for DOM updates\n    const timer = setTimeout(updateTooltipPosition, 100);\n    \n    return () => clearTimeout(timer);\n  }, [isActive, currentStepData, currentStep]);\n  \n  // Auto start tour if specified\n  useEffect(() => {\n    if (activeTourId && !isActive && autoStart) {\n      startTour(activeTourId);\n    }\n  }, [activeTourId, isActive, autoStart, startTour]);\n  \n  // Render the tour components when active\n  if (isActive && currentTour && currentStepData) {\n    return (\n      <Portal>\n        {/* Backdrop - only if requested in step config */}\n        {currentStepData.overlay && (\n          <Backdrop\n            open={true}\n            sx={{ \n              zIndex: 9997,\n              bgcolor: 'rgba(0,0,0,0.7)' \n            }}\n            onClick={currentStepData.clickThrough ? null : (e) => e.stopPropagation()}\n          />\n        )}\n        \n        {/* Spotlight on element */}\n        {currentStepData.elementSelector && (\n          <TourSpotlight\n            elementSelector={currentStepData.elementSelector}\n            visible={isActive}\n            pulse={currentStepData.pulse}\n          />\n        )}\n        \n        {/* Tooltip with step information */}\n        <Fade in={isActive}>\n          <TourTooltip\n            step={currentStep}\n            totalSteps={currentTour.steps.length}\n            title={currentTour.title}\n            content={currentStepData.content}\n            position={tooltipPosition}\n            onNext={nextStep}\n            onPrev={prevStep}\n            onClose={closeTour}\n            onSkip={skipTour}\n          />\n        </Fade>\n      </Portal>\n    );\n  }\n  \n  // Tour selection dialog\n  return (\n    <TourSelectionDialog\n      open={showTourSelector}\n      onClose={() => setShowTourSelector(false)}\n      tours={tours}\n      onSelectTour={startTour}\n    />\n  );\n};\n\nGuidedTour.propTypes = {\n  tours: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      description: PropTypes.string,\n      duration: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      steps: PropTypes.arrayOf(\n        PropTypes.shape({\n          elementSelector: PropTypes.string,\n          title: PropTypes.string,\n          content: PropTypes.oneOfType([PropTypes.string, PropTypes.node]).isRequired,\n          overlay: PropTypes.bool,\n          pulse: PropTypes.bool,\n          clickThrough: PropTypes.bool\n        })\n      ).isRequired\n    })\n  ).isRequired,\n  activeTourId: PropTypes.string,\n  onTourComplete: PropTypes.func,\n  onTourSkip: PropTypes.func,\n  autoStart: PropTypes.bool\n};\n\n// Add custom CSS for animations\nconst styleEl = document.createElement('style');\nstyleEl.textContent = `\n  @keyframes pulse {\n    0% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 0.6;\n      transform: scale(1.05);\n    }\n    100% {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n`;\ndocument.head.appendChild(styleEl);\n\nexport default GuidedTour;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}