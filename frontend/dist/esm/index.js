var e={421:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(689),r=n.n(a),l=n(661),o=n(274);const i=e=>{var{children:t}=e,{state:n}=(0,o.aF)(),a=(0,l.useLocation)();return n&&n.isAuthenticated?n.isAdmin?t:r().createElement(l.Navigate,{to:"/",replace:!0}):r().createElement(l.Navigate,{to:"/login",state:{from:a},replace:!0})}},262:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(689),r=n.n(a),l=n(661),o=n(274);const i=e=>{var{children:t}=e,{state:n}=(0,o.aF)(),a=(0,l.useLocation)();return n&&n.isAuthenticated?t:r().createElement(l.Navigate,{to:"/login",state:{from:a},replace:!0})}},829:(e,t,n)=>{n.d(t,{Z:()=>R});var a=n(689),r=n.n(a),l=n(580),o=n.n(l),i=n(692),c=n(773),s=n.n(c),m=n(182),d=n.n(m);const u=require("@mui/icons-material/Delete");var p=n.n(u);const g=require("@mui/icons-material/InsertDriveFileOutlined");var y=n.n(g);const h=require("@mui/icons-material/DescriptionOutlined");var f=n.n(h);const E=require("@mui/icons-material/ImageOutlined");var b=n.n(E);const v=require("@mui/icons-material/PictureAsPdfOutlined");var x=n.n(v);const C=require("@mui/icons-material/AudioFileOutlined");var T=n.n(C);const S=require("@mui/icons-material/VideocamOutlined");var w=n.n(S);const k=require("@mui/icons-material/CodeOutlined");var I=n.n(k);const B=require("@mui/icons-material/StorageOutlined");var P=n.n(B);const D=require("@mui/icons-material/FolderZipOutlined");var O=n.n(D);const A=require("@mui/icons-material/TableChartOutlined");var z=n.n(A),M=n(939),F=n(345),j=e=>{var{file:t,url:n,name:l,size:o,type:c,lastModified:m,onPreview:u,onDownload:g,onDelete:h,showActions:E=!0,showPreview:v=!0,compact:C=!1,variant:S="outlined"}=e,[k,B]=(0,a.useState)(!1),[D,A]=(0,a.useState)(null);if((0,a.useEffect)((()=>{var e=t||{name:l,size:o,type:c,lastModified:m};A((0,M.generateFileMetadata)(e))}),[t,l,o,c,m]),!D)return null;var j,R=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},N=e=>{var t={fontSize:C?"medium":"large",sx:{color:(0,M.getFileTypeColor)(D.mimeType)}};switch(e){case"Description":return r().createElement(f(),t);case"Image":return r().createElement(b(),t);case"PictureAsPdf":return r().createElement(x(),t);case"AudioFile":return r().createElement(T(),t);case"VideoFile":return r().createElement(w(),t);case"Code":return r().createElement(I(),t);case"Storage":return r().createElement(P(),t);case"FolderZip":return r().createElement(O(),t);case"TableChart":return r().createElement(z(),t);default:return r().createElement(y(),t)}},_=()=>{u?u(D):B(!0)},L=e=>{e.stopPropagation(),g&&g(D)},W=e=>{e.stopPropagation(),h&&h(D)},G=()=>{B(!1)},V=D.mimeType.startsWith("image/")&&n?n:null;return C?r().createElement(r().Fragment,null,r().createElement(i.Card,{variant:S,sx:{display:"flex",alignItems:"center",width:"100%",height:"48px","&:hover":{bgcolor:"action.hover"}}},r().createElement(i.CardActionArea,{onClick:_,sx:{display:"flex",alignItems:"center",height:"100%",justifyContent:"flex-start",px:1}},r().createElement(i.Box,{sx:{mr:1}},N((0,M.getFileTypeIcon)(D.mimeType))),r().createElement(i.Box,{sx:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",pr:E?5:1}},r().createElement(i.Typography,{variant:"body2",noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"60%"}},D.filename),r().createElement(i.Typography,{variant:"caption",color:"text.secondary",noWrap:!0},R(D.size)))),E&&r().createElement(i.Box,{sx:{position:"absolute",right:8,display:"flex",alignItems:"center"}},u&&D.isPreviewable&&r().createElement(i.Tooltip,{title:"Preview"},r().createElement(i.IconButton,{size:"small",onClick:_,color:"primary"},r().createElement(s(),{fontSize:"small"}))),g&&r().createElement(i.Tooltip,{title:"Download"},r().createElement(i.IconButton,{size:"small",onClick:L},r().createElement(d(),{fontSize:"small"}))),h&&r().createElement(i.Tooltip,{title:"Delete"},r().createElement(i.IconButton,{size:"small",onClick:W,color:"error"},r().createElement(p(),{fontSize:"small"}))))),v&&r().createElement(i.Dialog,{open:k,onClose:G,maxWidth:"lg",fullWidth:!0},r().createElement(F.Z,{file:t,url:n,mimeType:D.mimeType,filename:D.filename,onDownload:g?()=>g(D):void 0}))):r().createElement(r().Fragment,null,r().createElement(i.Card,{variant:S,sx:{display:"flex",flexDirection:"column",width:"100%",height:"100%","&:hover":{boxShadow:2}}},r().createElement(i.CardActionArea,{onClick:_},V?r().createElement(i.CardMedia,{component:"img",height:"140",image:V,alt:D.filename,sx:{objectFit:"contain",bgcolor:"background.default"}}):r().createElement(i.Box,{sx:{height:140,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default"}},N((0,M.getFileTypeIcon)(D.mimeType))),r().createElement(i.CardContent,null,r().createElement(i.Typography,{variant:"subtitle2",noWrap:!0,title:D.filename,gutterBottom:!0},D.filename),r().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",mb:1}},r().createElement(i.Chip,{label:D.description,size:"small",sx:{height:20,fontSize:"0.7rem",bgcolor:(0,M.getFileTypeColor)(D.mimeType)+"22",color:(0,M.getFileTypeColor)(D.mimeType)}}),r().createElement(i.Typography,{variant:"caption",color:"text.secondary"},R(D.size))),D.lastModified&&r().createElement(i.Typography,{variant:"caption",color:"text.secondary",display:"block"},"Modified: ",(j=D.lastModified)?new Date(j).toLocaleString():""))),E&&r().createElement(i.CardActions,{sx:{mt:"auto",justifyContent:"flex-end"}},u&&D.isPreviewable&&r().createElement(i.Tooltip,{title:"Preview"},r().createElement(i.IconButton,{size:"small",onClick:_,color:"primary"},r().createElement(s(),{fontSize:"small"}))),g&&r().createElement(i.Tooltip,{title:"Download"},r().createElement(i.IconButton,{size:"small",onClick:L},r().createElement(d(),{fontSize:"small"}))),h&&r().createElement(i.Tooltip,{title:"Delete"},r().createElement(i.IconButton,{size:"small",onClick:W,color:"error"},r().createElement(p(),{fontSize:"small"}))))),v&&r().createElement(i.Dialog,{open:k,onClose:G,maxWidth:"lg",fullWidth:!0},r().createElement(F.Z,{file:t,url:n,mimeType:D.mimeType,filename:D.filename,onDownload:g?()=>g(D):void 0})))};j.propTypes={file:o().object,url:o().string,name:o().string,size:o().number,type:o().string,lastModified:o().oneOfType([o().string,o().number,o().object]),onPreview:o().func,onDownload:o().func,onDelete:o().func,showActions:o().bool,showPreview:o().bool,compact:o().bool,variant:o().oneOf(["outlined","elevation","contained"])};const R=j},345:(e,t,n)=>{n.d(t,{Z:()=>R});var a=n(689),r=n.n(a),l=n(580),o=n.n(l),i=n(692);const c=require("@mui/icons-material/Code");var s=n.n(c);const m=require("@mui/icons-material/DataObject");var d=n.n(m);const u=require("@mui/icons-material/TableView");var p=n.n(u);const g=require("@mui/icons-material/TextFields");var y=n.n(g);const h=require("@mui/icons-material/Terminal");var f=n.n(h);const E=require("@mui/icons-material/ContentCopy");var b=n.n(E),v=n(182),x=n.n(v);const C=require("@mui/icons-material/Fullscreen");var T=n.n(C);const S=require("@mui/icons-material/FullscreenExit");var w=n.n(S),k=n(854),I=n.n(k);const B=require("@mui/icons-material/BrokenImage");var P=n.n(B),D=n(939),O=e=>{var{error:t,fileType:n,onDownload:a}=e;return r().createElement(i.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,height:"100%",bgcolor:"background.default"}},t?r().createElement(I(),{sx:{fontSize:64,color:"error.main",mb:2}}):r().createElement(P(),{sx:{fontSize:64,color:"action.disabled",mb:2}}),r().createElement(i.Typography,{variant:"h6",color:"text.secondary",align:"center",gutterBottom:!0},t?"Error Loading Preview":"Preview Not Available"),r().createElement(i.Typography,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0},t?"There was an error loading the file preview. Please try downloading the file instead.":"This file type (".concat(n,") is not supported for preview. You can download the file to view it.")),r().createElement(i.Button,{variant:"outlined",startIcon:r().createElement(x(),null),onClick:a,sx:{mt:2}},"Download File"))},A=e=>{var{url:t,alt:n,error:a,onError:l}=e;return r().createElement(i.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",overflow:"auto",bgcolor:"background.default"}},a?r().createElement(O,{error:a,fileType:"image"}):r().createElement("img",{src:t,alt:n||"File preview",onError:l,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}))},z=e=>{var{url:t,error:n}=e;return r().createElement(i.Box,{sx:{height:"100%",overflow:"hidden"}},n?r().createElement(O,{error:n,fileType:"PDF"}):r().createElement("iframe",{src:t,title:"PDF Preview",width:"100%",height:"100%",style:{border:"none"}},r().createElement("p",null,"Your browser does not support PDF previews.")))},M=e=>{var{content:t,error:n,mimeType:l}=e,[o,c]=(0,a.useState)(!1),s=l&&(l.includes("javascript")||l.includes("json")||l.includes("xml")||l.includes("html")||l.includes("css"));return r().createElement(i.Box,{sx:{position:"relative",height:"100%"}},n?r().createElement(O,{error:n,fileType:"text"}):r().createElement(r().Fragment,null,r().createElement(i.Box,{sx:{position:"absolute",top:8,right:8,zIndex:10}},r().createElement(i.Tooltip,{title:o?"Copied!":"Copy to clipboard"},r().createElement(i.IconButton,{onClick:()=>{navigator.clipboard.writeText(t).then((()=>{c(!0),setTimeout((()=>c(!1)),2e3)})).catch((e=>console.error("Failed to copy:",e)))},size:"small",color:o?"success":"default"},r().createElement(b(),{fontSize:"small"})))),r().createElement(i.Box,{sx:{height:"100%",overflow:"auto",bgcolor:s?"grey.900":"background.paper",color:s?"grey.300":"text.primary",p:2,fontFamily:"monospace",fontSize:"0.875rem",whiteSpace:"pre-wrap",wordBreak:"break-word",borderRadius:1}},t||"No content available")))},F=e=>{var{content:t,language:n,error:l}=e,[o,c]=(0,a.useState)(!1),m=(0,i.useTheme)(),d={fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",padding:m.spacing(2),backgroundColor:"dark"===m.palette.mode?"#1e1e1e":"#f5f5f5",color:"dark"===m.palette.mode?"#d4d4d4":"#333333",borderRadius:4,overflowX:"auto",height:"100%"};return r().createElement(i.Box,{sx:{position:"relative",height:"100%"}},l?r().createElement(O,{error:l,fileType:"code"}):r().createElement(r().Fragment,null,r().createElement(i.Box,{sx:{position:"absolute",top:8,right:8,zIndex:10,display:"flex"}},r().createElement(i.Tooltip,{title:"Language: "},r().createElement(i.Box,{sx:{display:"flex",alignItems:"center",mr:1,px:1,py:.5,borderRadius:1,bgcolor:"background.paper",fontSize:"0.75rem",color:"text.secondary",border:"1px solid",borderColor:"divider"}},r().createElement(s(),{fontSize:"inherit",sx:{mr:.5}}),n||"plaintext")),r().createElement(i.Tooltip,{title:o?"Copied!":"Copy to clipboard"},r().createElement(i.IconButton,{onClick:()=>{navigator.clipboard.writeText(t).then((()=>{c(!0),setTimeout((()=>c(!1)),2e3)})).catch((e=>console.error("Failed to copy:",e)))},size:"small",color:o?"success":"default"},r().createElement(b(),{fontSize:"small"})))),r().createElement(i.Box,{sx:{height:"100%",overflow:"auto"}},r().createElement("pre",{style:d},r().createElement("code",null,t||"// No content available")))))},j=e=>{var{file:t,url:n,content:l,mimeType:o,filename:c,maxHeight:m,fullWidth:u,showToolbar:g,onDownload:h,isLoading:E,error:b}=e,[v,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(0),[I,B]=(0,a.useState)(b||null),[P,j]=(0,a.useState)(null);if((0,a.useEffect)((()=>{var e=t||{name:c,type:o,url:n};j((0,D.generateFileMetadata)(e))}),[t,c,o,n]),(0,a.useEffect)((()=>{B(b||null)}),[b,n,l,t]),!P)return r().createElement(i.Box,{sx:{display:"flex",justifyContent:"center",py:4}},r().createElement(i.CircularProgress,null));var R=(0,D.getPreviewType)(P.mimeType),N=()=>{B("Failed to load image")},_=()=>{if(h)h();else if(n){var e=document.createElement("a");e.href=n,e.download=P.filename||"download",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},L=(0,D.isPreviewSupported)(P.mimeType)&&(n||l),W=v?"80vh":m||"400px",G=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};return r().createElement(i.Paper,{variant:"outlined",sx:{height:W,width:u?"100%":"auto",display:"flex",flexDirection:"column",overflow:"hidden",transition:"height 0.3s ease"}},g&&r().createElement(r().Fragment,null,r().createElement(i.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1,borderBottom:1,borderColor:"divider"}},r().createElement(i.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(i.Box,{sx:{mr:1,display:"flex",alignItems:"center"}},(()=>{switch(P.previewType){case"code":return r().createElement(s(),null);case"text":return"text/csv"===P.mimeType||"text/tab-separated-values"===P.mimeType?r().createElement(p(),null):"application/json"===P.mimeType?r().createElement(d(),null):r().createElement(y(),null);default:return r().createElement(f(),null)}})()),r().createElement(i.Typography,{variant:"subtitle1",noWrap:!0,sx:{maxWidth:"300px"}},P.filename)),r().createElement(i.Box,null,r().createElement(i.Tooltip,{title:"Download"},r().createElement(i.IconButton,{onClick:_,size:"small"},r().createElement(x(),null))),r().createElement(i.Tooltip,{title:v?"Exit Fullscreen":"Fullscreen"},r().createElement(i.IconButton,{onClick:()=>{C(!v)},size:"small"},v?r().createElement(w(),null):r().createElement(T(),null))))),r().createElement(i.Tabs,{value:S,onChange:(e,t)=>{k(t)},sx:{px:2,borderBottom:1,borderColor:"divider"}},r().createElement(i.Tab,{label:"Preview"}),r().createElement(i.Tab,{label:"Details"}))),r().createElement(i.Box,{sx:{flexGrow:1,overflow:"auto"}},0===S?(()=>{if(E)return r().createElement(i.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},r().createElement(i.CircularProgress,null));if(I||!L)return r().createElement(O,{error:I,fileType:P.description,onDownload:_});switch(R){case"image":return r().createElement(A,{url:n,alt:P.filename,onError:N,error:I});case"pdf":return r().createElement(z,{url:n,error:I});case"code":return r().createElement(F,{content:l,language:(0,D.getSyntaxHighlightLanguage)(P.mimeType),error:I});case"text":return r().createElement(M,{content:l,mimeType:P.mimeType,error:I});default:return r().createElement(O,{fileType:P.description,onDownload:_})}})():1===S?r().createElement(i.Box,{sx:{p:2}},r().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"File Information"),r().createElement(i.Box,{sx:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:1}},r().createElement(i.Typography,{variant:"subtitle2"},"Filename:"),r().createElement(i.Typography,{variant:"body2"},P.filename),r().createElement(i.Typography,{variant:"subtitle2"},"Type:"),r().createElement(i.Typography,{variant:"body2"},P.description),r().createElement(i.Typography,{variant:"subtitle2"},"MIME Type:"),r().createElement(i.Typography,{variant:"body2",sx:{fontFamily:"monospace"}},P.mimeType),r().createElement(i.Typography,{variant:"subtitle2"},"Size:"),r().createElement(i.Typography,{variant:"body2"},G(P.size)),P.lastModified&&r().createElement(r().Fragment,null,r().createElement(i.Typography,{variant:"subtitle2"},"Last Modified:"),r().createElement(i.Typography,{variant:"body2"},new Date(P.lastModified).toLocaleString())),r().createElement(i.Typography,{variant:"subtitle2"},"Preview Status:"),r().createElement(i.Typography,{variant:"body2"},P.isPreviewable?"Preview available":"Preview not supported for this file type"))):null))};j.propTypes={file:o().object,url:o().string,content:o().string,mimeType:o().string,filename:o().string,maxHeight:o().string,fullWidth:o().bool,showToolbar:o().bool,onDownload:o().func,isLoading:o().bool,error:o().oneOfType([o().string,o().bool])},j.defaultProps={maxHeight:"400px",fullWidth:!0,showToolbar:!0,isLoading:!1};const R=j},472:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(591),r=n.n(a),l=n(689),o=n.n(l),i=n(692),c=n(779),s=n.n(c),m=n(580),d=n.n(m),u=n(915);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=e=>{var{value:t={},onChange:n=()=>{},onTest:a=()=>{},disabled:c=!1}=e,[s,m]=(0,l.useState)(g({name:"",baseUrl:"",method:"GET",headers:[],queryParams:[],requestBody:"",responseType:"json",authentication:{type:"none",apiKey:{key:"",value:"",addTo:"header"},basic:{username:"",password:""},oauth2:{clientId:"",clientSecret:"",tokenUrl:"",authUrl:"",scope:""},bearer:{token:""}},dataPath:"",pollingInterval:3600,validateSSL:!0,timeout:30,retry:{enabled:!1,maxAttempts:3,backoffFactor:2,initialDelay:500}},t)),[d,p]=(0,l.useState)(0),[y,h]=(0,l.useState)(null),[f,E]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),[x,C]=(0,l.useState)({}),[T,S]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[I,B]=(0,l.useState)(""),[P,D]=(0,l.useState)(null),[O,A]=(0,l.useState)({key:"",value:""}),[z,M]=(0,l.useState)({key:"",value:""});(0,l.useEffect)((()=>{try{B(JSON.stringify(s,null,2))}catch(e){console.error("Error stringifying config:",e)}}),[s]),(0,l.useEffect)((()=>{n(s)}),[s,n]);var F=(0,l.useCallback)(((e,t)=>{m((n=>g(g({},n),{},{[e]:t})))}),[]),j=(0,l.useCallback)(((e,t,n)=>{m((a=>g(g({},a),{},{authentication:g(g({},a.authentication),{},{[e]:g(g({},a.authentication[e]),{},{[t]:n})})})))}),[]),R=(0,l.useCallback)((()=>{O.key.trim()?(m((e=>g(g({},e),{},{headers:[...e.headers,{key:O.key.trim(),value:O.value}]}))),A({key:"",value:""}),v(null)):v("Header key cannot be empty")}),[O]),N=(0,l.useCallback)((e=>{m((t=>g(g({},t),{},{headers:t.headers.filter(((t,n)=>n!==e))})))}),[]),_=(0,l.useCallback)((()=>{z.key.trim()?(m((e=>g(g({},e),{},{queryParams:[...e.queryParams,{key:z.key.trim(),value:z.value}]}))),M({key:"",value:""}),v(null)):v("Parameter key cannot be empty")}),[z]),L=(0,l.useCallback)((e=>{m((t=>g(g({},t),{},{queryParams:t.queryParams.filter(((t,n)=>n!==e))})))}),[]),W=(0,l.useCallback)((e=>{C((t=>g(g({},t),{},{[e]:!t[e]})))}),[]),G=(0,l.useCallback)(((e,t)=>{m((n=>g(g({},n),{},{retry:g(g({},n.retry),{},{[e]:t})})))}),[]),V=(0,l.useCallback)((e=>{var t=e.target.value;m((e=>g(g({},e),{},{authentication:g(g({},e.authentication),{},{type:t})})))}),[]),q=(0,l.useCallback)((e=>{var t=e.target.value;B(t),D(null);try{JSON.parse(t)}catch(n){D(n.message)}}),[]),U=(0,l.useCallback)((()=>{try{var e=JSON.parse(I);m(e),D(null),k(!1)}catch(t){D(t.message)}}),[I]),H=(0,l.useCallback)(r()((function*(){E(!0),h(null),v(null);try{var e=yield a(s);h(e)}catch(t){v(t.message||"Error testing API connection"),h({success:!1,message:t.message||"Unknown error"})}finally{E(!1)}})),[s,a]),K=(0,l.useCallback)((e=>{try{return new URL(e),!0}catch(t){return!1}}),[]),Z=s.baseUrl&&K(s.baseUrl);return o().createElement(i.Card,{variant:"outlined"},o().createElement(i.CardContent,null,o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"h5",component:"div",sx:{display:"flex",alignItems:"center"}},o().createElement(u.Link,{sx:{mr:1}}),"API Source Configuration"),o().createElement(i.Box,null,o().createElement(i.Tooltip,{title:"Show JSON Editor"},o().createElement(i.IconButton,{onClick:()=>k(!w),color:w?"primary":"default"},o().createElement(u.Code,null))),o().createElement(i.Tooltip,{title:"Test Connection"},o().createElement("span",null,o().createElement(i.IconButton,{onClick:H,disabled:!Z||c||f,color:"primary"},f?o().createElement(i.CircularProgress,{size:24}):o().createElement(u.PlayArrow,null)))))),w?o().createElement(i.Box,{sx:{mb:3}},o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:20,label:"Configuration JSON",value:I,onChange:q,error:!!P,helperText:P,sx:{fontFamily:"monospace"},InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.Button,{onClick:U,disabled:!!P,variant:"contained",startIcon:o().createElement(u.Save,null)},"Apply"))}})):o().createElement(o().Fragment,null,o().createElement(i.Tabs,{value:d,onChange:(e,t)=>p(t),sx:{borderBottom:1,borderColor:"divider",mb:3}},o().createElement(i.Tab,{label:"Basic"}),o().createElement(i.Tab,{label:"Headers & Params"}),o().createElement(i.Tab,{label:"Authentication"}),o().createElement(i.Tab,{label:"Advanced"})),o().createElement(i.Box,{sx:{display:0===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"API Name",value:s.name,onChange:e=>F("name",e.target.value),disabled:c,helperText:"A descriptive name for this API source"})),o().createElement(i.Grid,{item:!0,xs:12,sm:8},o().createElement(i.TextField,{fullWidth:!0,label:"Base URL",value:s.baseUrl,onChange:e=>F("baseUrl",e.target.value),disabled:c,error:s.baseUrl&&!K(s.baseUrl),helperText:s.baseUrl&&!K(s.baseUrl)?"Please enter a valid URL":"The base URL of the API (e.g., https://api.example.com/v1)"})),o().createElement(i.Grid,{item:!0,xs:12,sm:4},o().createElement(i.FormControl,{fullWidth:!0,disabled:c},o().createElement(i.InputLabel,null,"Method"),o().createElement(i.Select,{value:s.method,label:"Method",onChange:e=>F("method",e.target.value)},["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS"].map((e=>o().createElement(i.MenuItem,{key:e,value:e},e)))),o().createElement(i.FormHelperText,null,"HTTP method for the request"))),"POST"===s.method||"PUT"===s.method||"PATCH"===s.method?o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:5,label:"Request Body",value:s.requestBody,onChange:e=>F("requestBody",e.target.value),disabled:c,helperText:"JSON body to send with the request",sx:{fontFamily:"monospace"}})):null,o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Data Path",value:s.dataPath,onChange:e=>F("dataPath",e.target.value),disabled:c,helperText:"JSON path to extract data from the response (e.g., 'data.items' or leave empty for the entire response)"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.FormControl,{fullWidth:!0,disabled:c},o().createElement(i.InputLabel,null,"Response Type"),o().createElement(i.Select,{value:s.responseType,label:"Response Type",onChange:e=>F("responseType",e.target.value)},["json","text","blob","arraybuffer"].map((e=>o().createElement(i.MenuItem,{key:e,value:e},e.toUpperCase())))),o().createElement(i.FormHelperText,null,"Expected response format from the API"))),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Polling Interval (seconds)",value:s.pollingInterval,onChange:e=>F("pollingInterval",parseInt(e.target.value,10)||3600),disabled:c,InputProps:{inputProps:{min:1}},helperText:"How often to poll this API for new data (in seconds)"})))),o().createElement(i.Box,{sx:{display:1===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"HTTP Headers"),o().createElement(i.Paper,{variant:"outlined",sx:{p:2,mb:3}},s.headers.length>0?o().createElement(i.Box,{sx:{mb:2}},s.headers.map(((e,t)=>o().createElement(i.Box,{key:t,sx:{display:"flex",alignItems:"center",mb:1,p:1,borderRadius:1,bgcolor:"background.default"}},o().createElement(i.Typography,{variant:"body2",sx:{flex:2,fontWeight:"bold"}},e.key),o().createElement(i.Typography,{variant:"body2",sx:{flex:3,overflow:"hidden",textOverflow:"ellipsis"}},"authorization"===e.key.toLowerCase()?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":e.value),o().createElement(i.IconButton,{size:"small",onClick:()=>N(t),disabled:c},o().createElement(u.Delete,{fontSize:"small"})))))):o().createElement(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"No headers configured. Add headers below."),o().createElement(i.Divider,{sx:{my:2}}),o().createElement(i.Grid,{container:!0,spacing:2,alignItems:"center"},o().createElement(i.Grid,{item:!0,xs:12,sm:5},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Header Name",value:O.key,onChange:e=>A(g(g({},O),{},{key:e.target.value})),disabled:c,placeholder:"Content-Type"})),o().createElement(i.Grid,{item:!0,xs:12,sm:5},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Value",value:O.value,onChange:e=>A(g(g({},O),{},{value:e.target.value})),disabled:c,placeholder:"application/json"})),o().createElement(i.Grid,{item:!0,xs:12,sm:2},o().createElement(i.Button,{fullWidth:!0,variant:"outlined",onClick:R,disabled:c||!O.key.trim(),startIcon:o().createElement(u.Add,null)},"Add"))))),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"Query Parameters"),o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},s.queryParams.length>0?o().createElement(i.Box,{sx:{mb:2}},s.queryParams.map(((e,t)=>o().createElement(i.Box,{key:t,sx:{display:"flex",alignItems:"center",mb:1,p:1,borderRadius:1,bgcolor:"background.default"}},o().createElement(i.Typography,{variant:"body2",sx:{flex:2,fontWeight:"bold"}},e.key),o().createElement(i.Typography,{variant:"body2",sx:{flex:3,overflow:"hidden",textOverflow:"ellipsis"}},e.key.toLowerCase().includes("key")||e.key.toLowerCase().includes("token")?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":e.value),o().createElement(i.IconButton,{size:"small",onClick:()=>L(t),disabled:c},o().createElement(u.Delete,{fontSize:"small"})))))):o().createElement(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"No query parameters configured. Add parameters below."),o().createElement(i.Divider,{sx:{my:2}}),o().createElement(i.Grid,{container:!0,spacing:2,alignItems:"center"},o().createElement(i.Grid,{item:!0,xs:12,sm:5},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Parameter Name",value:z.key,onChange:e=>M(g(g({},z),{},{key:e.target.value})),disabled:c,placeholder:"limit"})),o().createElement(i.Grid,{item:!0,xs:12,sm:5},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Value",value:z.value,onChange:e=>M(g(g({},z),{},{value:e.target.value})),disabled:c,placeholder:"100"})),o().createElement(i.Grid,{item:!0,xs:12,sm:2},o().createElement(i.Button,{fullWidth:!0,variant:"outlined",onClick:_,disabled:c||!z.key.trim(),startIcon:o().createElement(u.Add,null)},"Add"))))))),o().createElement(i.Box,{sx:{display:2===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.FormControl,{component:"fieldset"},o().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"Authentication Type"),o().createElement(i.RadioGroup,{"aria-label":"authentication-type",name:"authentication-type",value:s.authentication.type,onChange:V},[{value:"none",label:"No Authentication"},{value:"apiKey",label:"API Key"},{value:"basic",label:"Basic Auth"},{value:"oauth2",label:"OAuth 2.0"},{value:"bearer",label:"Bearer Token"}].map((e=>o().createElement(i.FormControlLabel,{key:e.value,value:e.value,control:o().createElement(i.Radio,{disabled:c}),label:e.label})))))),"apiKey"===s.authentication.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"API Key Authentication"),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"API Key Name",value:s.authentication.apiKey.key,onChange:e=>j("apiKey","key",e.target.value),disabled:c,helperText:"The name of the API key parameter",placeholder:"X-API-Key"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"API Key Value",type:x.apiKey?"text":"password",value:s.authentication.apiKey.value,onChange:e=>j("apiKey","value",e.target.value),disabled:c,helperText:"The value of the API key",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>W("apiKey"),edge:"end"},x.apiKey?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.FormControl,{fullWidth:!0,disabled:c},o().createElement(i.InputLabel,null,"Add to"),o().createElement(i.Select,{value:s.authentication.apiKey.addTo,label:"Add to",onChange:e=>j("apiKey","addTo",e.target.value)},[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}].map((e=>o().createElement(i.MenuItem,{key:e.value,value:e.value},e.label)))),o().createElement(i.FormHelperText,null,"Where to include the API key")))))),"basic"===s.authentication.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Basic Authentication"),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Username",value:s.authentication.basic.username,onChange:e=>j("basic","username",e.target.value),disabled:c,helperText:"Username for Basic Auth"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Password",type:x.basicPassword?"text":"password",value:s.authentication.basic.password,onChange:e=>j("basic","password",e.target.value),disabled:c,helperText:"Password for Basic Auth",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>W("basicPassword"),edge:"end"},x.basicPassword?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}))))),"oauth2"===s.authentication.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"OAuth 2.0 Authentication"),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Client ID",value:s.authentication.oauth2.clientId,onChange:e=>j("oauth2","clientId",e.target.value),disabled:c,helperText:"OAuth 2.0 Client ID"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Client Secret",type:x.clientSecret?"text":"password",value:s.authentication.oauth2.clientSecret,onChange:e=>j("oauth2","clientSecret",e.target.value),disabled:c,helperText:"OAuth 2.0 Client Secret",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>W("clientSecret"),edge:"end"},x.clientSecret?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Token URL",value:s.authentication.oauth2.tokenUrl,onChange:e=>j("oauth2","tokenUrl",e.target.value),disabled:c,helperText:"URL to obtain the access token (e.g., https://api.example.com/oauth/token)",error:s.authentication.oauth2.tokenUrl&&!K(s.authentication.oauth2.tokenUrl)})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Authorization URL",value:s.authentication.oauth2.authUrl,onChange:e=>j("oauth2","authUrl",e.target.value),disabled:c,helperText:"URL for user authorization (optional for client credentials flow)",error:s.authentication.oauth2.authUrl&&!K(s.authentication.oauth2.authUrl)})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Scope",value:s.authentication.oauth2.scope,onChange:e=>j("oauth2","scope",e.target.value),disabled:c,helperText:"Space-separated list of scopes (e.g., 'read write')"}))))),"bearer"===s.authentication.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Bearer Token Authentication"),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Bearer Token",type:x.bearerToken?"text":"password",value:s.authentication.bearer.token,onChange:e=>j("bearer","token",e.target.value),disabled:c,helperText:"The bearer token value",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>W("bearerToken"),edge:"end"},x.bearerToken?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}))))))),o().createElement(i.Box,{sx:{display:3===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.validateSSL,onChange:e=>F("validateSSL",e.target.checked),disabled:c}),label:"Validate SSL Certificates"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Timeout (seconds)",value:s.timeout,onChange:e=>F("timeout",parseInt(e.target.value,10)||30),disabled:c,InputProps:{inputProps:{min:1}},helperText:"Request timeout in seconds"}))))),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"h6"},"Retry Configuration"),o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.retry.enabled,onChange:e=>G("enabled",e.target.checked),disabled:c}),label:"Enable Retry"})),o().createElement(i.Collapse,{in:s.retry.enabled},o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:4},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Max Attempts",value:s.retry.maxAttempts,onChange:e=>G("maxAttempts",parseInt(e.target.value,10)||3),disabled:c||!s.retry.enabled,InputProps:{inputProps:{min:1}},helperText:"Maximum number of retry attempts"})),o().createElement(i.Grid,{item:!0,xs:12,sm:4},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Backoff Factor",value:s.retry.backoffFactor,onChange:e=>G("backoffFactor",parseFloat(e.target.value)||2),disabled:c||!s.retry.enabled,InputProps:{inputProps:{min:1,step:.1}},helperText:"Exponential backoff factor"})),o().createElement(i.Grid,{item:!0,xs:12,sm:4},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Initial Delay (ms)",value:s.retry.initialDelay,onChange:e=>G("initialDelay",parseInt(e.target.value,10)||500),disabled:c||!s.retry.enabled,InputProps:{inputProps:{min:1}},helperText:"Initial retry delay in milliseconds"}))))))))),y&&o().createElement(i.Box,{sx:{mt:3}},o().createElement(i.Alert,{severity:y.success?"success":"error",action:o().createElement(i.IconButton,{color:"inherit",size:"small",onClick:()=>h(null)},o().createElement(u.Close,{fontSize:"inherit"}))},o().createElement(i.AlertTitle,null,y.success?"Connection Successful":"Connection Failed"),y.message),y.success&&y.responsePreview&&o().createElement(i.Paper,{variant:"outlined",sx:{mt:2,p:2}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Response Preview:"),o().createElement(i.Box,{component:"pre",sx:{p:1,backgroundColor:"background.default",borderRadius:1,overflowX:"auto",fontSize:"0.85rem",maxHeight:300}},"string"===typeof y.responsePreview?y.responsePreview:JSON.stringify(y.responsePreview,null,2)))),b&&!y&&o().createElement(i.Alert,{severity:"error",sx:{mt:3},onClose:()=>v(null)},b)))};y.propTypes={value:d().object,onChange:d().func,onTest:d().func,disabled:d().bool};const h=y;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=e=>{var{value:t={},onChange:n=()=>{},onTest:a=()=>{},disabled:c=!1}=e,[s,m]=(0,l.useState)(E({name:"",description:"",endpointId:"",security:{type:"none",token:{value:"",headerName:"X-Webhook-Token"},hmac:{secret:"",algorithm:"sha256",headerName:"X-Webhook-Signature"},basicAuth:{username:"",password:""}},validation:{enabled:!1,schema:"",requiredFields:[],strictMode:!1,failOnError:!0,responseCode:422,errorFormat:"json"},rateLimit:{enabled:!1,maxRequests:100,timeWindow:60},preprocessors:[]},t)),[d,p]=(0,l.useState)(0),[g,y]=(0,l.useState)(null),[h,f]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),[x,C]=(0,l.useState)({}),[T,S]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[I,B]=(0,l.useState)(""),[P,D]=(0,l.useState)(null),[O,A]=(0,l.useState)(""),[z,M]=(0,l.useState)(!1),[F,j]=(0,l.useState)({payload:JSON.stringify({test:"data"},null,2),headers:[{key:"Content-Type",value:"application/json"}]}),[R,N]=(0,l.useState)(!1),[_,L]=(0,l.useState)(null),[W,G]=(0,l.useState)({eventType:"order.created",randomizeData:!0,delayMs:0,simulateError:!1,errorRate:0}),[V,q]=(0,l.useState)([]),[U,H]=(0,l.useState)(null),[K,Z]=(0,l.useState)([{id:"default",name:"Default Request",payload:JSON.stringify({test:"data"},null,2),headers:[{key:"Content-Type",value:"application/json"}]},{id:"order-created",name:"Order Created Event",payload:JSON.stringify({event:"order.created",data:{id:"1234567890",customer_id:"cust_9876543",amount:99.99,currency:"USD",items:[{product_id:"prod_123",quantity:1,price:79.99},{product_id:"prod_456",quantity:2,price:9.99}],created_at:(new Date).toISOString()}},null,2),headers:[{key:"Content-Type",value:"application/json"},{key:"X-Event-Type",value:"order.created"}]},{id:"user-registered",name:"User Registered Event",payload:JSON.stringify({event:"user.registered",data:{id:"user_12345",email:"user@example.com",name:"John Doe",created_at:(new Date).toISOString()}},null,2),headers:[{key:"Content-Type",value:"application/json"},{key:"X-Event-Type",value:"user.registered"}]}]),[J,X]=(0,l.useState)(null),[Y,Q]=(0,l.useState)(0);(0,l.useEffect)((()=>{try{B(JSON.stringify(s,null,2))}catch(e){console.error("Error stringifying config:",e)}}),[s]),(0,l.useEffect)((()=>{n(s)}),[s,n]),(0,l.useEffect)((()=>{if(!s.endpointId){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);m((t=>E(E({},t),{},{endpointId:e})))}}),[s.endpointId]);var $=(0,l.useCallback)(((e,t)=>{m((n=>E(E({},n),{},{[e]:t})))}),[]),ee=(0,l.useCallback)(((e,t,n)=>{m((a=>E(E({},a),{},{security:E(E({},a.security),{},{[e]:E(E({},a.security[e]),{},{[t]:n})})})))}),[]),te=(0,l.useCallback)(((e,t)=>{m((n=>E(E({},n),{},{validation:E(E({},n.validation),{},{[e]:t})})))}),[]),ne=(0,l.useCallback)(((e,t)=>{m((n=>E(E({},n),{},{rateLimit:E(E({},n.rateLimit),{},{[e]:t})})))}),[]),ae=(0,l.useCallback)((()=>{O.trim()?(m((e=>E(E({},e),{},{validation:E(E({},e.validation),{},{requiredFields:[...e.validation.requiredFields,O.trim()]})}))),A(""),v(null)):v("Field name cannot be empty")}),[O]),re=(0,l.useCallback)((e=>{m((t=>E(E({},t),{},{validation:E(E({},t.validation),{},{requiredFields:t.validation.requiredFields.filter(((t,n)=>n!==e))})})))}),[]),le=(0,l.useCallback)((e=>{C((t=>E(E({},t),{},{[e]:!t[e]})))}),[]),oe=(0,l.useCallback)((e=>{var t=e.target.value;m((e=>E(E({},e),{},{security:E(E({},e.security),{},{type:t})})))}),[]),ie=(0,l.useCallback)((e=>{var t=e.target.value;B(t),D(null);try{JSON.parse(t)}catch(n){D(n.message)}}),[]),ce=(0,l.useCallback)((()=>{try{var e=JSON.parse(I);m(e),D(null),k(!1)}catch(t){D(t.message)}}),[I]),se=(0,l.useCallback)((()=>{var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);m((t=>E(E({},t),{},{endpointId:e})))}),[]),me=(0,l.useCallback)((()=>{var e=s.name?"/".concat(encodeURIComponent(s.name.toLowerCase().replace(/[^a-z0-9]/g,"-"))):"";return"".concat("https://api.example.com/webhooks").concat(e).concat("","/").concat(s.endpointId)}),[s.name,s.endpointId]),de=(0,l.useCallback)((()=>{var e=me();navigator.clipboard.writeText(e)}),[me]),ue=(0,l.useCallback)((e=>{var t=e.target.value;j((e=>E(E({},e),{},{payload:t})))}),[]),pe=(0,l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"",value:""};j((t=>E(E({},t),{},{headers:[...t.headers,e]})))}),[]),ge=(0,l.useCallback)(((e,t,n)=>{j((a=>E(E({},a),{},{headers:a.headers.map(((a,r)=>r===e?E(E({},a),{},{[t]:n}):a))})))}),[]),ye=(0,l.useCallback)((e=>{j((t=>E(E({},t),{},{headers:t.headers.filter(((t,n)=>n!==e))})))}),[]),he=(0,l.useCallback)(r()((function*(){f(!0),y(null),v(null);try{var e,t,n,a;try{a=JSON.parse(F.payload)}catch(b){throw new Error("Invalid JSON payload: "+b.message)}console.log("Sending test webhook request:",{url:me(),headers:F.headers,payload:a}),yield new Promise((e=>setTimeout(e,1200)));var r=[{stage:"received",timestamp:(new Date).toISOString(),durationMs:0,details:"Request received by webhook endpoint"},{stage:"authentication",timestamp:new Date(Date.now()+50).toISOString(),durationMs:50,details:"none"!==s.security.type?"Authentication using ".concat(s.security.type):"No authentication configured"},{stage:"validation",timestamp:new Date(Date.now()+150).toISOString(),durationMs:100,details:s.validation.enabled?"Validating payload against JSON schema":"Validation not enabled"}];r.push({stage:"processing",timestamp:new Date(Date.now()+250).toISOString(),durationMs:100,details:"Processing webhook payload"}),s.rateLimit.enabled&&r.push({stage:"rateLimit",timestamp:new Date(Date.now()+270).toISOString(),durationMs:20,details:"Rate limit check (".concat(s.rateLimit.maxRequests,"/").concat(s.rateLimit.timeWindow,"s)")});var l=Math.floor(300*Math.random())+200;r.push({stage:"completed",timestamp:new Date(Date.now()+l).toISOString(),durationMs:l-270,details:"Webhook processing completed successfully"});var o={totalTime:l,breakdowns:[{stage:"Authentication",timeMs:50,percentage:Math.round(50/l*100)},{stage:"Validation",timeMs:100,percentage:Math.round(100/l*100)},{stage:"Processing",timeMs:l-150,percentage:Math.round((l-150)/l*100)}],bottlenecks:s.validation.enabled&&s.validation.schema?["Schema validation is the most time-consuming stage"]:[]},i={timestamp:new Date,payload:a,headers:F.headers,id:Math.random().toString(36).substring(2,9),timeline:r,performanceMetrics:o};q((e=>[i,...e].slice(0,10)));var c=null;if(s.validation.enabled&&s.validation.schema)try{var m,d,u,p=JSON.parse(s.validation.schema),g=JSON.parse(F.payload),h=null===(m=null===(d=p.required)||void 0===d?void 0:d.every((e=>"undefined"!==typeof g[e])))||void 0===m||m;c={valid:h,schema:p,errors:h?[]:[{instancePath:"",schemaPath:"#/required",keyword:"required",params:{missingProperty:null===(u=p.required)||void 0===u?void 0:u.find((e=>"undefined"===typeof g[e]))},message:"must have required property"}]}}catch(b){c={valid:!1,schema:s.validation.schema,errors:[{message:"Error parsing schema: ".concat(b.message)}]}}var E={success:!0,message:"Test webhook request sent successfully",receivedAt:(new Date).toISOString(),validationPassed:null===(e=null===(t=c)||void 0===t?void 0:t.valid)||void 0===e||e,processingTime:l,details:{endpoint:me(),securityChecks:"none"!==s.security.type?"Passed":"Not configured",validationChecks:s.validation.enabled?null!==(n=c)&&void 0!==n&&n.valid?"Passed":"Failed":"Not enabled",rateLimiting:s.rateLimit.enabled?"Active":"Not enabled"},validationDetails:c,timeline:r,performanceMetrics:o};y(E)}catch(x){v(x.message||"Error sending test webhook request"),y({success:!1,message:x.message||"Unknown error"})}finally{f(!1)}})),[F,me,s.security.type,s.validation.enabled,s.rateLimit.enabled]),fe=(0,l.useCallback)((e=>{j({payload:JSON.stringify(e.payload,null,2),headers:[...e.headers]}),H(null)}),[]),Ee=(0,l.useCallback)((e=>{j({payload:e.payload,headers:[...e.headers]}),X(null)}),[]),be=(0,l.useCallback)((()=>{var e=prompt("Enter a name for this template","My Template");if(e){var t={id:"template-".concat(Date.now()),name:e,payload:F.payload,headers:[...F.headers]};Z((e=>[...e,t]))}}),[F]),ve=(0,l.useCallback)((()=>{var e,t=(new Date).toISOString(),n=Math.random().toString(36).substring(2,15);switch(W.eventType){case"order.created":e={event:"order.created",data:{id:W.randomizeData?"order_".concat(n):"order_123456",customer_id:W.randomizeData?"cust_".concat(n.substring(0,8)):"cust_9876543",amount:W.randomizeData?Math.round(1e4*Math.random())/100:99.99,currency:"USD",items:[{product_id:W.randomizeData?"prod_".concat(n.substring(0,6)):"prod_123",quantity:W.randomizeData?Math.floor(5*Math.random())+1:1,price:W.randomizeData?Math.round(1e4*Math.random())/100:79.99},{product_id:W.randomizeData?"prod_".concat(n.substring(6,12)):"prod_456",quantity:W.randomizeData?Math.floor(3*Math.random())+1:2,price:W.randomizeData?Math.round(1e3*Math.random())/100:9.99}],created_at:t}};break;case"user.registered":e={event:"user.registered",data:{id:W.randomizeData?"user_".concat(n):"user_12345",email:W.randomizeData?"user_".concat(n.substring(0,6),"@example.com"):"user@example.com",name:"John Doe",created_at:t}};break;case"payment.succeeded":e={event:"payment.succeeded",data:{id:W.randomizeData?"payment_".concat(n):"payment_12345",order_id:W.randomizeData?"order_".concat(n.substring(0,8)):"order_123456",amount:W.randomizeData?Math.round(1e4*Math.random())/100:99.99,currency:"USD",payment_method:"credit_card",created_at:t}};break;default:e={event:W.eventType,data:{id:n,timestamp:t}}}return W.simulateError&&Math.random()<W.errorRate/100&&e.data&&delete e.data.id,e}),[W]),xe=(0,l.useCallback)(r()((function*(){N(!1),f(!0),y(null),v(null);try{var e=ve();L(e);var t=[{key:"Content-Type",value:"application/json"},{key:"X-Event-Type",value:W.eventType}];j({payload:JSON.stringify(e,null,2),headers:t}),W.delayMs>0&&(yield new Promise((e=>setTimeout(e,W.delayMs)))),he()}catch(n){v(n.message||"Error simulating webhook request"),f(!1)}})),[W,ve,he]);return o().createElement(i.Card,{variant:"outlined"},o().createElement(i.CardContent,null,o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"h5",component:"div",sx:{display:"flex",alignItems:"center"}},o().createElement(u.ReceiptLong,{sx:{mr:1}}),"Webhook Configuration"),o().createElement(i.Box,null,o().createElement(i.Tooltip,{title:"Test Webhook"},o().createElement("span",null,o().createElement(i.IconButton,{onClick:()=>M(!0),disabled:c||!s.endpointId,color:"primary"},o().createElement(u.PlayArrow,null)))),o().createElement(i.Tooltip,{title:"Webhook Simulator"},o().createElement("span",null,o().createElement(i.IconButton,{onClick:()=>N(!0),disabled:c||!s.endpointId,color:"primary"},o().createElement(u.Autorenew,null)))),o().createElement(i.Tooltip,{title:"Show JSON Editor"},o().createElement(i.IconButton,{onClick:()=>k(!w),color:w?"primary":"default"},o().createElement(u.Code,null))))),w?o().createElement(i.Box,{sx:{mb:3}},o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:20,label:"Configuration JSON",value:I,onChange:ie,error:!!P,helperText:P,sx:{fontFamily:"monospace"},InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.Button,{onClick:ce,disabled:!!P,variant:"contained",startIcon:o().createElement(u.Save,null)},"Apply"))}})):o().createElement(o().Fragment,null,o().createElement(i.Tabs,{value:d,onChange:(e,t)=>p(t),sx:{borderBottom:1,borderColor:"divider",mb:3}},o().createElement(i.Tab,{label:"Basic"}),o().createElement(i.Tab,{label:"Security"}),o().createElement(i.Tab,{label:"Validation"}),o().createElement(i.Tab,{label:"Advanced"})),o().createElement(i.Box,{sx:{display:0===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Webhook Name",value:s.name,onChange:e=>$("name",e.target.value),disabled:c,helperText:"A descriptive name for this webhook"})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:2,label:"Description",value:s.description,onChange:e=>$("description",e.target.value),disabled:c,helperText:"A description of this webhook's purpose"})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Webhook Endpoint"),o().createElement(i.Grid,{container:!0,spacing:2,alignItems:"center"},o().createElement(i.Grid,{item:!0,xs:12,sm:8},o().createElement(i.TextField,{fullWidth:!0,label:"Endpoint ID",value:s.endpointId,onChange:e=>$("endpointId",e.target.value),disabled:c,InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.Tooltip,{title:"Regenerate Endpoint ID"},o().createElement(i.IconButton,{onClick:se,edge:"end",disabled:c},o().createElement(u.Autorenew,null))))}})),o().createElement(i.Grid,{item:!0,xs:12,sm:4},o().createElement(i.Button,{fullWidth:!0,variant:"outlined",startIcon:o().createElement(u.ContentCopy,null),onClick:de,disabled:c||!s.endpointId},"Copy URL")),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,variant:"filled",label:"Webhook URL",value:me(),InputProps:{readOnly:!0}}))))))),o().createElement(i.Box,{sx:{display:1===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Alert,{severity:"info",sx:{mb:3}},o().createElement(i.AlertTitle,null,"Security Recommendation"),"We recommend implementing security for your webhook to ensure that only authorized systems can send requests to your endpoint."),o().createElement(i.FormControl,{component:"fieldset",sx:{mb:3}},o().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"Security Method"),o().createElement(i.RadioGroup,{"aria-label":"security-type",name:"security-type",value:s.security.type,onChange:oe},[{value:"none",label:"No Security"},{value:"token",label:"Static Token"},{value:"hmac",label:"HMAC Signature"},{value:"basicAuth",label:"Basic Authentication"}].map((e=>o().createElement(i.FormControlLabel,{key:e.value,value:e.value,control:o().createElement(i.Radio,{disabled:c}),label:e.label})))))),"token"===s.security.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Static Token Validation"),o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"A static token is sent with each request. The sender must include this token in a header."),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Token Header Name",value:s.security.token.headerName,onChange:e=>ee("token","headerName",e.target.value),disabled:c,helperText:"HTTP header name for the token",placeholder:"X-Webhook-Token"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Token Value",type:x.token?"text":"password",value:s.security.token.value,onChange:e=>ee("token","value",e.target.value),disabled:c,helperText:"Secret token value",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>le("token"),edge:"end"},x.token?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Button,{variant:"outlined",onClick:()=>{var e=Array.from(crypto.getRandomValues(new Uint8Array(32))).map((e=>e.toString(16).padStart(2,"0"))).join("");ee("token","value",e)},disabled:c,startIcon:o().createElement(u.Autorenew,null)},"Generate Random Token"))))),"hmac"===s.security.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"HMAC Signature Validation"),o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"The sender creates a hash signature of the payload using the shared secret. This provides stronger security by validating the message integrity."),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Signature Header Name",value:s.security.hmac.headerName,onChange:e=>ee("hmac","headerName",e.target.value),disabled:c,helperText:"HTTP header name for the signature",placeholder:"X-Webhook-Signature"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.FormControl,{fullWidth:!0,disabled:c},o().createElement(i.InputLabel,null,"HMAC Algorithm"),o().createElement(i.Select,{value:s.security.hmac.algorithm,label:"HMAC Algorithm",onChange:e=>ee("hmac","algorithm",e.target.value)},[{value:"sha256",label:"SHA-256"},{value:"sha384",label:"SHA-384"},{value:"sha512",label:"SHA-512"}].map((e=>o().createElement(i.MenuItem,{key:e.value,value:e.value},e.label)))),o().createElement(i.FormHelperText,null,"The hashing algorithm to use"))),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.TextField,{fullWidth:!0,label:"Secret Key",type:x.hmacSecret?"text":"password",value:s.security.hmac.secret,onChange:e=>ee("hmac","secret",e.target.value),disabled:c,helperText:"Secret key for HMAC signature generation",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>le("hmacSecret"),edge:"end"},x.hmacSecret?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Button,{variant:"outlined",onClick:()=>{var e=Array.from(crypto.getRandomValues(new Uint8Array(32))).map((e=>e.toString(16).padStart(2,"0"))).join("");ee("hmac","secret",e)},disabled:c,startIcon:o().createElement(u.Autorenew,null)},"Generate Random Secret"))))),"basicAuth"===s.security.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Basic Authentication"),o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"The sender must provide basic HTTP authentication credentials with each request."),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Username",value:s.security.basicAuth.username,onChange:e=>ee("basicAuth","username",e.target.value),disabled:c,helperText:"Basic Auth username"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,label:"Password",type:x.basicAuthPassword?"text":"password",value:s.security.basicAuth.password,onChange:e=>ee("basicAuth","password",e.target.value),disabled:c,helperText:"Basic Auth password",InputProps:{endAdornment:o().createElement(i.InputAdornment,{position:"end"},o().createElement(i.IconButton,{onClick:()=>le("basicAuthPassword"),edge:"end"},x.basicAuthPassword?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}))))),"none"===s.security.type&&o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Alert,{severity:"warning"},o().createElement(i.AlertTitle,null,"No Security Configured"),"Your webhook endpoint will accept requests from any source without validation. This is not recommended for production environments.")))),o().createElement(i.Box,{sx:{display:2===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.validation.enabled,onChange:e=>te("enabled",e.target.checked),disabled:c}),label:"Enable Payload Validation"})),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Collapse,{in:s.validation.enabled},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Required Fields"),o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Specify fields that must be present in the webhook payload."),s.validation.requiredFields.length>0?o().createElement(i.Box,{sx:{mb:2}},s.validation.requiredFields.map(((e,t)=>o().createElement(i.Chip,{key:t,label:e,onDelete:()=>re(t),disabled:c,sx:{m:.5}})))):o().createElement(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"No required fields configured."),o().createElement(i.Grid,{container:!0,spacing:2,alignItems:"center"},o().createElement(i.Grid,{item:!0,xs:!0},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Field Path",value:O,onChange:e=>A(e.target.value),disabled:c||!s.validation.enabled,placeholder:"data.id",helperText:"JSON path to a required field (e.g., 'data.id')"})),o().createElement(i.Grid,{item:!0},o().createElement(i.Button,{variant:"outlined",onClick:ae,disabled:c||!s.validation.enabled||!O.trim(),startIcon:o().createElement(u.Add,null)},"Add")))))),o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Collapse,{in:s.validation.enabled},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"JSON Schema Validation"),o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Provide a JSON Schema to validate the structure and data types of incoming webhooks."),o().createElement(i.Box,null,o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:10,label:"JSON Schema",value:s.validation.schema,onChange:e=>te("schema",e.target.value),disabled:c||!s.validation.enabled,placeholder:'{\n  "type": "object",\n  "required": ["data"],\n  "properties": {\n    "data": {\n      "type": "object",\n      "properties": {\n        "id": { "type": "string" },\n        "type": { "type": "string" }\n      }\n    }\n  }\n}',sx:{fontFamily:"monospace",mb:2},error:(()=>{try{return!!s.validation.schema&&(JSON.parse(s.validation.schema),!1)}catch(e){return!0}})(),helperText:(()=>{try{return s.validation.schema?(JSON.parse(s.validation.schema),"Valid JSON Schema"):"Enter a JSON Schema to validate webhook payloads"}catch(e){return"Invalid JSON: ".concat(e.message)}})()}),o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",mt:2}},o().createElement(i.Button,{variant:"outlined",onClick:()=>{te("schema",'{\n  "type": "object",\n  "required": ["data"],\n  "properties": {\n    "data": {\n      "type": "object",\n      "properties": {\n        "id": { "type": "string" },\n        "type": { "type": "string" },\n        "attributes": {\n          "type": "object",\n          "properties": {\n            "name": { "type": "string" },\n            "created_at": { "type": "string", "format": "date-time" }\n          }\n        }\n      },\n      "required": ["id", "type"]\n    },\n    "meta": {\n      "type": "object",\n      "properties": {\n        "request_id": { "type": "string" }\n      }\n    }\n  }\n}')},disabled:c||!s.validation.enabled,startIcon:o().createElement(u.Add,null)},"Load Example Schema"),o().createElement(i.Button,{variant:"outlined",color:"secondary",onClick:()=>te("schema",""),disabled:c||!s.validation.enabled||!s.validation.schema,startIcon:o().createElement(u.Close,null)},"Clear Schema")),o().createElement(i.Divider,{sx:{my:3}}),o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Schema Validation Options"),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.validation.strictMode,onChange:e=>te("strictMode",e.target.checked),disabled:c||!s.validation.enabled}),label:"Strict Mode"}),o().createElement(i.Typography,{variant:"caption",display:"block",color:"text.secondary"},"Reject payloads with additional properties not in schema")),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.validation.failOnError,onChange:e=>te("failOnError",e.target.checked),disabled:c||!s.validation.enabled}),label:"Fail on Error"}),o().createElement(i.Typography,{variant:"caption",display:"block",color:"text.secondary"},"Reject webhook completely if validation fails"))))))))),o().createElement(i.Box,{sx:{display:3===d?"block":"none"}},o().createElement(i.Grid,{container:!0,spacing:3},o().createElement(i.Grid,{item:!0,xs:12},o().createElement(i.Paper,{variant:"outlined",sx:{p:2}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"h6"},"Rate Limiting"),o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:s.rateLimit.enabled,onChange:e=>ne("enabled",e.target.checked),disabled:c}),label:"Enable Rate Limiting"})),o().createElement(i.Collapse,{in:s.rateLimit.enabled},o().createElement(i.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Limit the number of webhook requests that can be processed within a time window."),o().createElement(i.Grid,{container:!0,spacing:2},o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Max Requests",value:s.rateLimit.maxRequests,onChange:e=>ne("maxRequests",parseInt(e.target.value,10)||100),disabled:c||!s.rateLimit.enabled,InputProps:{inputProps:{min:1}},helperText:"Maximum number of requests allowed"})),o().createElement(i.Grid,{item:!0,xs:12,sm:6},o().createElement(i.TextField,{fullWidth:!0,type:"number",label:"Time Window (seconds)",value:s.rateLimit.timeWindow,onChange:e=>ne("timeWindow",parseInt(e.target.value,10)||60),disabled:c||!s.rateLimit.enabled,InputProps:{inputProps:{min:1}},helperText:"Time window in seconds"}))))))))),b&&!g&&o().createElement(i.Alert,{severity:"error",sx:{mt:3},onClose:()=>v(null)},b)),o().createElement(i.Drawer,{anchor:"right",open:R,onClose:()=>N(!1),sx:{"& .MuiDrawer-paper":{width:"500px",maxWidth:"100%",p:2}}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3}},o().createElement(i.Typography,{variant:"h6"},"Webhook Simulator"),o().createElement(i.IconButton,{onClick:()=>N(!1)},o().createElement(u.Close,null))),o().createElement(i.Typography,{variant:"body2",paragraph:!0},"Generate webhook payloads based on common event types or create custom events. Simulated webhooks help test your endpoint's handling of different scenarios."),o().createElement(i.Box,{sx:{mb:3}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Event Type"),o().createElement(i.Select,{fullWidth:!0,value:W.eventType,onChange:e=>G((t=>E(E({},t),{},{eventType:e.target.value}))),sx:{mb:2}},o().createElement(i.MenuItem,{value:"order.created"},"Order Created"),o().createElement(i.MenuItem,{value:"user.registered"},"User Registered"),o().createElement(i.MenuItem,{value:"payment.succeeded"},"Payment Succeeded"),o().createElement(i.MenuItem,{value:"custom.event"},"Custom Event"))),o().createElement(i.Box,{sx:{mb:3}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Simulation Options"),o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:W.randomizeData,onChange:e=>G((t=>E(E({},t),{},{randomizeData:e.target.checked})))}),label:"Randomize data values"}),o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:W.simulateError,onChange:e=>G((t=>E(E({},t),{},{simulateError:e.target.checked})))}),label:"Simulate validation errors"}),W.simulateError&&o().createElement(i.Box,{sx:{ml:4,mt:1,mb:2}},o().createElement(i.Typography,{variant:"body2",gutterBottom:!0},"Error rate: ",W.errorRate,"%"),o().createElement(i.Slider,{value:W.errorRate,onChange:(e,t)=>G((e=>E(E({},e),{},{errorRate:t}))),min:0,max:100,step:5,valueLabelDisplay:"auto",valueLabelFormat:e=>"".concat(e,"%")})),o().createElement(i.Box,{sx:{mt:2}},o().createElement(i.Typography,{variant:"body2",gutterBottom:!0},"Request delay: ",W.delayMs,"ms"),o().createElement(i.Slider,{value:W.delayMs,onChange:(e,t)=>G((e=>E(E({},e),{},{delayMs:t}))),min:0,max:3e3,step:100,valueLabelDisplay:"auto",valueLabelFormat:e=>"".concat(e,"ms")}))),o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",mt:3}},o().createElement(i.Button,{onClick:()=>N(!1)},"Cancel"),o().createElement(i.Button,{variant:"contained",color:"primary",onClick:xe,disabled:h},"Start Simulation"))),o().createElement(i.Drawer,{anchor:"right",open:z,onClose:()=>M(!1),sx:{"& .MuiDrawer-paper":{width:"500px",maxWidth:"100%",p:2}}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3}},o().createElement(i.Typography,{variant:"h6"},"Test Webhook"),o().createElement(i.IconButton,{onClick:()=>M(!1)},o().createElement(u.Close,null))),o().createElement(i.Typography,{variant:"subtitle1",gutterBottom:!0},"Request Headers"),o().createElement(i.Paper,{variant:"outlined",sx:{p:2,mb:3}},F.headers.map(((e,t)=>o().createElement(i.Grid,{container:!0,spacing:1,alignItems:"center",key:t,sx:{mb:1}},o().createElement(i.Grid,{item:!0,xs:5},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Header",value:e.key,onChange:e=>ge(t,"key",e.target.value)})),o().createElement(i.Grid,{item:!0,xs:6},o().createElement(i.TextField,{fullWidth:!0,size:"small",label:"Value",value:e.value,onChange:e=>ge(t,"value",e.target.value)})),o().createElement(i.Grid,{item:!0,xs:1},o().createElement(i.IconButton,{size:"small",onClick:()=>ye(t)},o().createElement(u.Close,{fontSize:"small"})))))),o().createElement(i.Button,{startIcon:o().createElement(u.Add,null),onClick:()=>pe(),size:"small",sx:{mt:1}},"Add Header")),o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"subtitle1"},"Request Payload"),o().createElement(i.Box,null,o().createElement(i.IconButton,{size:"small",onClick:e=>X(e.currentTarget),sx:{mr:1}},o().createElement(u.Add,null)),o().createElement(i.IconButton,{size:"small",onClick:e=>H(e.currentTarget),disabled:0===V.length},o().createElement(u.History,null)),o().createElement(i.Menu,{anchorEl:J,open:Boolean(J),onClose:()=>X(null)},o().createElement(i.MenuItem,{disabled:!0},o().createElement(i.Typography,{variant:"subtitle2"},"Request Templates")),o().createElement(i.Divider,null),K.map((e=>o().createElement(i.MenuItem,{key:e.id,onClick:()=>Ee(e)},o().createElement(i.ListItemIcon,null,o().createElement(u.Add,{fontSize:"small"})),o().createElement(i.ListItemText,{primary:e.name,secondary:"Headers: ".concat(e.headers.length,", Payload: ").concat(e.payload.substring(0,30),"...")}))))),o().createElement(i.Menu,{anchorEl:U,open:Boolean(U),onClose:()=>H(null)},o().createElement(i.MenuItem,{disabled:!0},o().createElement(i.Typography,{variant:"subtitle2"},"Recent Requests")),o().createElement(i.Divider,null),V.map(((e,t)=>o().createElement(i.MenuItem,{key:e.id,onClick:()=>fe(e)},o().createElement(i.ListItemIcon,null,o().createElement(u.Send,{fontSize:"small"})),o().createElement(i.ListItemText,{primary:new Date(e.timestamp).toLocaleTimeString(),secondary:"Payload: ".concat(JSON.stringify(e.payload).substring(0,30),"...")}))))))),o().createElement(i.TextField,{fullWidth:!0,multiline:!0,rows:10,value:F.payload,onChange:ue,sx:{mb:3,fontFamily:"monospace"},error:(()=>{try{return JSON.parse(F.payload),!1}catch(e){return!0}})(),helperText:(()=>{try{return JSON.parse(F.payload),null}catch(e){return e.message}})()}),o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},o().createElement(i.Button,{onClick:()=>M(!1)},"Cancel"),o().createElement(i.Button,{variant:"contained",color:"primary",startIcon:h?o().createElement(i.CircularProgress,{size:20}):o().createElement(u.Send,null),onClick:he,disabled:h||(()=>{try{return JSON.parse(F.payload),!1}catch(e){return!0}})()},"Send Request")),g&&o().createElement(i.Paper,{sx:{mt:3,p:2}},o().createElement(i.Alert,{severity:g.success?"success":"error",sx:{mb:2}},o().createElement(i.AlertTitle,null,g.success?"Webhook Test Successful":"Webhook Test Failed"),g.message),o().createElement(i.Box,{sx:{mb:3}},o().createElement(i.Tabs,{value:Y,onChange:(e,t)=>Q(t),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:2}},o().createElement(i.Tab,{icon:o().createElement(u.Send,{fontSize:"small"}),label:"Request Inspector",iconPosition:"start"}),o().createElement(i.Tab,{icon:o().createElement(u.Check,{fontSize:"small"}),label:"Response Details",iconPosition:"start"}),o().createElement(i.Tab,{icon:o().createElement(u.Code,{fontSize:"small"}),label:"Validation Results",iconPosition:"start"}),o().createElement(i.Tab,{icon:o().createElement(u.Timeline,{fontSize:"small"}),label:"Timeline",iconPosition:"start"}),o().createElement(i.Tab,{icon:o().createElement(u.Speed,{fontSize:"small"}),label:"Performance",iconPosition:"start"})),o().createElement(i.Box,{sx:{display:0===Y?"block":"none"}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2}},"Request Headers"),o().createElement(i.Paper,{variant:"outlined",sx:{p:1,mb:2,maxHeight:200,overflow:"auto"}},o().createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",{style:{textAlign:"left",padding:"8px",borderBottom:"1px solid rgba(224, 224, 224, 1)"}},"Header"),o().createElement("th",{style:{textAlign:"left",padding:"8px",borderBottom:"1px solid rgba(224, 224, 224, 1)"}},"Value"))),o().createElement("tbody",null,F.headers.map(((e,t)=>o().createElement("tr",{key:t},o().createElement("td",{style:{padding:"8px",borderBottom:"1px solid rgba(224, 224, 224, 1)"}},e.key),o().createElement("td",{style:{padding:"8px",borderBottom:"1px solid rgba(224, 224, 224, 1)"}},e.value))))))),o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Request Payload"),o().createElement(i.Paper,{variant:"outlined",sx:{p:2,mb:2,maxHeight:200,overflow:"auto"}},o().createElement(i.Box,{component:"pre",sx:{m:0,fontFamily:"monospace",fontSize:"0.85rem"}},(()=>{try{return JSON.stringify(JSON.parse(F.payload),null,2)}catch(e){return F.payload}})()))),o().createElement(i.Box,{sx:{display:1===Y?"block":"none"}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Processing Details"),o().createElement(i.List,{dense:!0},o().createElement(i.ListItem,{divider:!0},o().createElement(i.ListItemText,{primary:"Received At",secondary:new Date(g.receivedAt).toLocaleString()})),o().createElement(i.ListItem,{divider:!0},o().createElement(i.ListItemText,{primary:"Processing Time",secondary:"".concat(g.processingTime,"ms")})),o().createElement(i.ListItem,{divider:!0},o().createElement(i.ListItemText,{primary:"Security Checks",secondary:o().createElement(i.Box,{sx:{display:"flex",alignItems:"center"}},"Passed"===g.details.securityChecks?o().createElement(u.Check,{fontSize:"small",color:"success",sx:{mr:1}}):"Not configured"===g.details.securityChecks?o().createElement(u.Warning,{fontSize:"small",color:"warning",sx:{mr:1}}):o().createElement(u.Close,{fontSize:"small",color:"error",sx:{mr:1}}),g.details.securityChecks)})),o().createElement(i.ListItem,{divider:!0},o().createElement(i.ListItemText,{primary:"Validation Checks",secondary:o().createElement(i.Box,{sx:{display:"flex",alignItems:"center"}},"Passed"===g.details.validationChecks?o().createElement(u.Check,{fontSize:"small",color:"success",sx:{mr:1}}):"Not enabled"===g.details.validationChecks?o().createElement(u.Warning,{fontSize:"small",color:"warning",sx:{mr:1}}):o().createElement(u.Close,{fontSize:"small",color:"error",sx:{mr:1}}),g.details.validationChecks)})),o().createElement(i.ListItem,null,o().createElement(i.ListItemText,{primary:"Rate Limiting",secondary:o().createElement(i.Box,{sx:{display:"flex",alignItems:"center"}},"Active"===g.details.rateLimiting?o().createElement(u.Check,{fontSize:"small",color:"success",sx:{mr:1}}):o().createElement(u.Warning,{fontSize:"small",color:"warning",sx:{mr:1}}),g.details.rateLimiting)})))),o().createElement(i.Box,{sx:{display:2===Y?"block":"none",mt:3}},g.validationDetails?o().createElement(o().Fragment,null,o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Schema Validation Results"),o().createElement(i.Paper,{variant:"outlined",sx:{p:2,backgroundColor:g.validationDetails.valid?"success.lightest":"error.lightest",maxHeight:300,overflow:"auto"}},g.validationDetails.valid?o().createElement(i.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(u.Check,{color:"success",sx:{mr:1}}),o().createElement(i.Typography,null,"Payload passed validation against the JSON Schema")):o().createElement(o().Fragment,null,o().createElement(i.Box,{sx:{display:"flex",alignItems:"center",mb:2}},o().createElement(u.Close,{color:"error",sx:{mr:1}}),o().createElement(i.Typography,null,"Payload failed validation against the JSON Schema")),o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Validation Errors:"),o().createElement(i.Box,{component:"pre",sx:{m:0,fontFamily:"monospace",fontSize:"0.85rem"}},JSON.stringify(g.validationDetails.errors,null,2))))):o().createElement(i.Alert,{severity:"info",sx:{mb:2}},o().createElement(i.AlertTitle,null,"Validation Not Configured"),"Enable schema validation in the Validation tab to see validation results.")),o().createElement(i.Box,{sx:{display:3===Y?"block":"none",mt:3}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Webhook Processing Timeline"),g.timeline&&o().createElement(i.Paper,{variant:"outlined",sx:{p:2,mb:2}},o().createElement(i.Box,{sx:{position:"relative",height:"auto",minHeight:"200px",mt:3,mb:2}},o().createElement(i.Box,{sx:{position:"relative",height:"6px",bgcolor:"grey.200",borderRadius:"3px",mb:5,mt:3}},g.timeline.map(((e,t)=>{var n=new Date(g.timeline[0].timestamp).getTime(),a=new Date(g.timeline[g.timeline.length-1].timestamp).getTime()-n,r=(new Date(e.timestamp).getTime()-n)/a*100;return o().createElement(i.Box,{key:t,sx:{position:"absolute",left:"".concat(r,"%"),top:0,transform:"translate(-50%, -50%)",width:"16px",height:"16px",borderRadius:"50%",bgcolor:"completed"===e.stage?"success.main":"error"===e.stage?"error.main":"primary.main",border:"2px solid",borderColor:"background.paper",zIndex:2,"&:hover":{boxShadow:"0 0 0 4px rgba(25, 118, 210, 0.2)"}}})}))),g.timeline.map(((e,t)=>{var n=new Date(g.timeline[0].timestamp).getTime(),a=new Date(g.timeline[g.timeline.length-1].timestamp).getTime()-n,r=(new Date(e.timestamp).getTime()-n)/a*100,l=t%2===0;return o().createElement(i.Box,{key:"label-".concat(t),sx:{position:"absolute",left:"".concat(r,"%"),top:l?"-20px":"20px",transform:"translateX(-50%)",textAlign:"center",width:"120px"}},o().createElement(i.Typography,{variant:"caption",sx:{display:"block",fontWeight:"bold"}},e.stage.charAt(0).toUpperCase()+e.stage.slice(1)),o().createElement(i.Typography,{variant:"caption",sx:{display:"block"}},"+".concat(e.durationMs,"ms")))}))),o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0,sx:{mt:4}},"Event Details"),o().createElement(i.List,{dense:!0},g.timeline.map(((e,t)=>o().createElement(i.ListItem,{key:t,divider:t<g.timeline.length-1},o().createElement(i.ListItemText,{primary:o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between"}},o().createElement(i.Typography,{variant:"body2",sx:{fontWeight:"bold"}},e.stage.charAt(0).toUpperCase()+e.stage.slice(1)),o().createElement(i.Typography,{variant:"body2"},"+".concat(e.durationMs,"ms"))),secondary:e.details}))))))),o().createElement(i.Box,{sx:{display:4===Y?"block":"none",mt:3}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Performance Analysis"),g.performanceMetrics&&o().createElement(i.Paper,{variant:"outlined",sx:{p:2,mb:2}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"body1",sx:{fontWeight:"bold"}},"Total Processing Time"),o().createElement(i.Typography,{variant:"body1"},g.performanceMetrics.totalTime,"ms")),o().createElement(i.Divider,{sx:{mb:2}}),o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Processing Breakdown"),g.performanceMetrics.breakdowns.map(((e,t)=>o().createElement(i.Box,{key:t,sx:{mb:2}},o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",mb:.5}},o().createElement(i.Typography,{variant:"body2"},e.stage),o().createElement(i.Typography,{variant:"body2"},e.timeMs,"ms (",e.percentage,"%)")),o().createElement(i.Box,{sx:{width:"100%",bgcolor:"grey.200",height:"8px",borderRadius:"4px",overflow:"hidden"}},o().createElement(i.Box,{sx:{width:"".concat(e.percentage,"%"),bgcolor:0===t?"info.main":1===t?"success.main":"warning.main",height:"100%"}}))))),g.performanceMetrics.bottlenecks.length>0&&o().createElement(i.Box,{sx:{mt:3}},o().createElement(i.Typography,{variant:"subtitle2",gutterBottom:!0},"Potential Bottlenecks"),o().createElement(i.List,{dense:!0},g.performanceMetrics.bottlenecks.map(((e,t)=>o().createElement(i.ListItem,{key:t,sx:{pl:0}},o().createElement(i.ListItemIcon,{sx:{minWidth:"30px"}},o().createElement(u.Warning,{color:"warning",fontSize:"small"})),o().createElement(i.ListItemText,{primary:e}))))),o().createElement(i.Alert,{severity:"info",sx:{mt:2}},o().createElement(i.AlertTitle,null,"Performance Optimization Tips"),o().createElement(i.Typography,{variant:"body2",gutterBottom:!0},"Consider the following to improve webhook processing performance:"),o().createElement("ul",{style:{margin:0,paddingLeft:"20px"}},o().createElement("li",null,"Simplify the schema validation for faster payload validation"),o().createElement("li",null,"Use lightweight security methods for non-sensitive data"),o().createElement("li",null,"Implement asynchronous processing for complex transformations"))))))),o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",mt:3}},o().createElement(i.Box,null,o().createElement(i.Button,{variant:"outlined",startIcon:o().createElement(u.History,null),onClick:()=>H(document.getElementById("requestHistoryBtn")),sx:{mr:1}},"View History"),o().createElement(i.Button,{variant:"outlined",onClick:be,startIcon:o().createElement(u.BookmarkAdd,null)},"Save as Template")),o().createElement(i.Button,{variant:"contained",startIcon:o().createElement(u.CloudDownload,null),onClick:()=>{var e=JSON.stringify({request:{headers:F.headers,payload:(()=>{try{return JSON.parse(F.payload)}catch(e){return F.payload}})()},response:g,timestamp:(new Date).toISOString()},null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="webhook-test-".concat((new Date).toISOString().replace(/:/g,"-"),".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}},"Export Results")))))};b.propTypes={value:d().object,onChange:d().func,onTest:d().func,disabled:d().bool};const v=b;const x=()=>{var[e,t]=(0,l.useState)({name:"Sample API",baseUrl:"https://api.example.com/v1",method:"GET",headers:[{key:"Content-Type",value:"application/json"},{key:"Accept",value:"application/json"}],queryParams:[{key:"limit",value:"100"}],authentication:{type:"none"}}),[n,a]=(0,l.useState)({name:"Sample Webhook",description:"A webhook for receiving data updates",endpointId:"sample-webhook-endpoint",security:{type:"token",token:{value:"secret-token-value",headerName:"X-Webhook-Token"}}}),[c,s]=(0,l.useState)(!1),[m,d]=(0,l.useState)(0),u=function(){var e=r()((function*(e){return console.log("Testing API with config:",e),yield new Promise((e=>setTimeout(e,1500))),{success:!0,message:"Successfully connected to API",responsePreview:{status:"success",data:{items:[{id:1,name:"Item 1"},{id:2,name:"Item 2"}],total:2,page:1,limit:100}}}}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=r()((function*(e){return console.log("Testing webhook with config:",e),yield new Promise((e=>setTimeout(e,1500))),{success:!0,message:"Webhook endpoint created successfully",endpointUrl:"https://api.example.com/webhooks/".concat(e.endpointId)}}));return function(t){return e.apply(this,arguments)}}();return o().createElement(i.Container,{maxWidth:"lg",sx:{py:4}},o().createElement(i.Typography,{variant:"h4",gutterBottom:!0},"API & Webhook Configuration Test"),o().createElement(i.Typography,{variant:"body1",paragraph:!0},"This page allows testing of the API source and webhook configuration components."),o().createElement(i.Card,{sx:{mb:4}},o().createElement(i.CardContent,null,o().createElement(i.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o().createElement(i.Typography,{variant:"h6"},"Control Panel"),o().createElement(i.FormControlLabel,{control:o().createElement(i.Switch,{checked:c,onChange:e=>s(e.target.checked)}),label:"Read Only Mode"})),o().createElement(i.Button,{variant:"outlined",color:"secondary",onClick:()=>{t({name:"",baseUrl:"",method:"GET",headers:[],queryParams:[],authentication:{type:"none"}}),a({name:"",description:"",endpointId:"",security:{type:"none"}})},sx:{mr:2}},"Reset"),o().createElement(i.Button,{variant:"outlined",onClick:()=>{t({name:"Test API",baseUrl:"https://api.example.com/v1",method:"GET",headers:[{key:"Content-Type",value:"application/json"},{key:"Accept",value:"application/json"}],queryParams:[{key:"limit",value:"100"}],authentication:{type:"apiKey",apiKey:{key:"X-API-Key",value:"test-api-key",addTo:"header"}}}),a({name:"Test Webhook",description:"A webhook for receiving data updates",endpointId:"test-webhook-endpoint",security:{type:"token",token:{value:"test-token-value",headerName:"X-Webhook-Token"}}})}},"Load Test Data"))),o().createElement(i.Tabs,{value:m,onChange:(e,t)=>d(t),sx:{mb:2}},o().createElement(i.Tab,{label:"API Configuration"}),o().createElement(i.Tab,{label:"Webhook Configuration"})),o().createElement(i.Box,{sx:{display:0===m?"block":"none"}},o().createElement(h,{value:e,onChange:t,onTest:u,disabled:c})),o().createElement(i.Box,{sx:{display:1===m?"block":"none"}},o().createElement(v,{value:n,onChange:a,onTest:p,disabled:c})),o().createElement(i.Paper,{variant:"outlined",sx:{p:3,mt:4}},o().createElement(i.Typography,{variant:"h6",gutterBottom:!0},"Current Configuration"),o().createElement(i.Divider,{sx:{my:2}}),o().createElement(i.Typography,{variant:"subtitle2"},0===m?"API Configuration:":"Webhook Configuration:"),o().createElement(i.Box,{component:"pre",sx:{p:2,mt:2,bgcolor:"background.default",borderRadius:1,overflow:"auto",maxHeight:"400px"}},JSON.stringify(0===m?e:n,null,2))))}},612:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(689),r=n.n(a),l=n(692),o=n(591),i=n.n(o),c=n(779),s=n.n(c),m=n(580),d=n.n(m),u=n(915),p=n(450);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=[{value:"us-east-1",label:"US East (N. Virginia)"},{value:"us-east-2",label:"US East (Ohio)"},{value:"us-west-1",label:"US West (N. California)"},{value:"us-west-2",label:"US West (Oregon)"},{value:"af-south-1",label:"Africa (Cape Town)"},{value:"ap-east-1",label:"Asia Pacific (Hong Kong)"},{value:"ap-south-1",label:"Asia Pacific (Mumbai)"},{value:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{value:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{value:"ap-northeast-3",label:"Asia Pacific (Osaka)"},{value:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{value:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{value:"ca-central-1",label:"Canada (Central)"},{value:"eu-central-1",label:"Europe (Frankfurt)"},{value:"eu-west-1",label:"Europe (Ireland)"},{value:"eu-west-2",label:"Europe (London)"},{value:"eu-west-3",label:"Europe (Paris)"},{value:"eu-north-1",label:"Europe (Stockholm)"},{value:"eu-south-1",label:"Europe (Milan)"},{value:"me-south-1",label:"Middle East (Bahrain)"},{value:"sa-east-1",label:"South America (S\xe3o Paulo)"}],f=e=>{var{onCredentialsSaved:t,onCredentialsLoaded:n,readOnly:o=!1,showSaveControls:c=!0,initialVisible:s=!1}=e,[m,d]=(0,a.useState)({authMethod:"accessKey",accessKeyId:"",secretAccessKey:"",region:"us-east-1",profile:"",useIAMRole:!1,assumeRoleArn:"",externalId:""}),[g,f]=(0,a.useState)(!1),[E,b]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[C,T]=(0,a.useState)(s),[S,w]=(0,a.useState)(!1),[k,I]=(0,a.useState)(!1),[B,P]=(0,a.useState)(null),[D,O]=(0,a.useState)(null),[A,z]=(0,a.useState)(null),[M,F]=(0,a.useState)(null);(0,a.useEffect)((()=>{(function(){var e=i()((function*(){b(!0);try{var e=yield p.x.hasCredentials("s3");if(I(e),e&&C){var t=yield p.x.getCredentials("s3",!0);if(t.success&&t.data){var a="accessKey",r={authMethod:a=t.data.access_key_id&&t.data.secret_access_key?"accessKey":t.data.profile?"profile":"iamRole",accessKeyId:t.data.access_key_id||"",secretAccessKey:t.data.secret_access_key||"",region:t.data.region||"us-east-1",profile:t.data.profile||"",useIAMRole:"iamRole"===a,assumeRoleArn:t.data.assume_role_arn||"",externalId:t.data.external_id||""};d(r),P(t.data.last_updated),n&&n(r)}}}catch(l){console.error("Error loading credentials:",l),z("Failed to load stored credentials")}finally{b(!1)}}));return function(){return e.apply(this,arguments)}})()()}),[C,n]);var j=e=>{var{name:t,value:n,type:a,checked:r}=e.target,l="checkbox"===a?r:n;d((e=>{if("authMethod"===t){var n=y(y({},e),{},{[t]:l,accessKeyId:"",secretAccessKey:"",profile:"",assumeRoleArn:"",externalId:""});return n.useIAMRole="iamRole"===l,n}return y(y({},e),{},{[t]:l})})),O(null),z(null),F(null)},R=function(){var e=i()((function*(){x(!0),O(null),z(null);try{var e={access_key_id:"accessKey"===m.authMethod?m.accessKeyId:"",secret_access_key:"accessKey"===m.authMethod?m.secretAccessKey:"",region:m.region,profile:"profile"===m.authMethod?m.profile:"",use_iam_role:"iamRole"===m.authMethod,assume_role_arn:m.assumeRoleArn,external_id:m.externalId},n=yield p.x.storeCredentials("s3",e);n.success?(O("Credentials saved successfully"),I(!0),P((new Date).toISOString()),t&&t(m)):z(n.message||"Failed to save credentials")}catch(a){console.error("Error saving credentials:",a),z("An error occurred while saving credentials")}finally{x(!1)}}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=i()((function*(){b(!0),O(null),z(null);try{var e=yield p.x.deleteCredentials("s3");e.success?(O("Credentials deleted successfully"),I(!1),P(null),d({authMethod:"accessKey",accessKeyId:"",secretAccessKey:"",region:"us-east-1",profile:"",useIAMRole:!1,assumeRoleArn:"",externalId:""}),t&&t(null)):z(e.message||"Failed to delete credentials")}catch(n){console.error("Error deleting credentials:",n),z("An error occurred while deleting credentials")}finally{b(!1),w(!1)}}));return function(){return e.apply(this,arguments)}}(),_=(0,a.useCallback)(i()((function*(){b(!0),O(null),z(null),F(null);try{var e={access_key_id:"accessKey"===m.authMethod?m.accessKeyId:"",secret_access_key:"accessKey"===m.authMethod?m.secretAccessKey:"",region:m.region,profile:"profile"===m.authMethod?m.profile:"",use_iam_role:"iamRole"===m.authMethod,assume_role_arn:m.assumeRoleArn,external_id:m.externalId},t=yield p.x.testCredentials("s3",e);F(t),t.success?O("Connection successful"):z(t.message||"Connection failed")}catch(n){console.error("Error testing credentials:",n),z("An error occurred during connection test"),F({success:!1,message:"An error occurred during connection test",details:{error:n.message}})}finally{b(!1)}})),[m]),L=(0,a.useCallback)((()=>{switch(m.authMethod){case"accessKey":return""!==m.accessKeyId.trim()&&""!==m.secretAccessKey.trim()&&""!==m.region.trim();case"profile":return""!==m.profile.trim()&&""!==m.region.trim();case"iamRole":return""!==m.region.trim();default:return!1}}),[m])(),W="accessKey"===m.authMethod,G="profile"===m.authMethod,V=""!==m.assumeRoleArn.trim();return r().createElement(l.Card,{variant:"outlined"},r().createElement(l.CardHeader,{title:r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Key,{sx:{mr:1,color:"primary.main"}}),r().createElement(l.Typography,{variant:"h6"},"AWS S3 Credentials"),k&&r().createElement(l.Chip,{label:"Credentials Stored",color:"success",size:"small",icon:r().createElement(u.LockOutlined,null),sx:{ml:2}})),r().createElement(l.IconButton,{onClick:()=>{T(!C)}},C?r().createElement(u.VisibilityOff,null):r().createElement(u.Visibility,null))),subheader:k?r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},"Last Updated: ",(e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(t){return"Unknown"}})(B)):r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},"No stored credentials")}),r().createElement(l.Collapse,{in:C},r().createElement(l.CardContent,null,r().createElement(l.Box,{sx:{mb:3}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Authentication Method"),r().createElement(l.FormControl,{component:"fieldset"},r().createElement(l.RadioGroup,{row:!0,name:"authMethod",value:m.authMethod,onChange:j},[{value:"accessKey",label:"Access Key"},{value:"profile",label:"AWS Profile"},{value:"iamRole",label:"IAM Role"}].map((e=>r().createElement(l.FormControlLabel,{key:e.value,value:e.value,control:r().createElement(l.Radio,null),label:e.label,disabled:E||o})))))),r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12,md:W?6:12},r().createElement(l.FormControl,{fullWidth:!0},r().createElement(l.InputLabel,{id:"region-label"},"AWS Region"),r().createElement(l.Select,{labelId:"region-label",id:"region",name:"region",value:m.region,onChange:j,label:"AWS Region",disabled:E||o},h.map((e=>r().createElement(l.MenuItem,{key:e.value,value:e.value},e.label)))),r().createElement(l.FormHelperText,null,"AWS region where your S3 buckets are located"))),W&&r().createElement(r().Fragment,null,r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.FormControl,{fullWidth:!0},r().createElement(l.TextField,{name:"accessKeyId",label:"Access Key ID",value:m.accessKeyId,onChange:j,disabled:E||o}),r().createElement(l.FormHelperText,null,"AWS IAM Access Key ID"))),r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.FormControl,{fullWidth:!0},r().createElement(l.TextField,{name:"secretAccessKey",label:"Secret Access Key",value:m.secretAccessKey,onChange:j,type:g?"text":"password",disabled:E||o,InputProps:{endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.IconButton,{onClick:()=>{f(!g)},edge:"end"},g?r().createElement(u.VisibilityOff,null):r().createElement(u.Visibility,null)),r().createElement(l.Tooltip,{title:"Your AWS Secret Access Key. This is sensitive information that should be kept secure."},r().createElement(l.IconButton,{edge:"end"},r().createElement(u.Info,null))))}}),r().createElement(l.FormHelperText,null,"AWS IAM Secret Access Key")))),G&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.FormControl,{fullWidth:!0},r().createElement(l.TextField,{name:"profile",label:"AWS Profile Name",value:m.profile,onChange:j,disabled:E||o,InputProps:{endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.Tooltip,{title:"Profile name from AWS credentials file (~/.aws/credentials)"},r().createElement(l.IconButton,{edge:"end"},r().createElement(u.Info,null))))}}),r().createElement(l.FormHelperText,null,"Named profile from AWS credentials file (for local development)"))),"iamRole"===m.authMethod&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Paper,{variant:"outlined",sx:{p:2,bgcolor:"background.default"}},r().createElement(l.Typography,{variant:"body2",color:"textSecondary"},"Using IAM Role for authentication. No additional credentials required. The application will use the IAM role attached to the environment where it's running."))),r().createElement(l.Grid,{item:!0,xs:12,sx:{mt:2}},r().createElement(l.Divider,{textAlign:"left"},r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},"Advanced Options")),r().createElement(l.Box,{sx:{mt:2}},r().createElement(l.FormControl,{fullWidth:!0,sx:{mb:2}},r().createElement(l.TextField,{name:"assumeRoleArn",label:"Assume Role ARN (Optional)",value:m.assumeRoleArn,onChange:j,disabled:E||o,InputProps:{endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.Tooltip,{title:"The Amazon Resource Name (ARN) of the role to assume"},r().createElement(l.IconButton,{edge:"end"},r().createElement(u.Info,null))))}}),r().createElement(l.FormHelperText,null,"ARN of an IAM role to assume (for cross-account access)")),V&&r().createElement(l.FormControl,{fullWidth:!0},r().createElement(l.TextField,{name:"externalId",label:"External ID (Optional)",value:m.externalId,onChange:j,disabled:E||o}),r().createElement(l.FormHelperText,null,"External ID for the assume role request (if required)"))))),(D||A||M)&&r().createElement(l.Box,{sx:{mt:3}},D&&!A&&r().createElement(l.Alert,{severity:"success",sx:{mb:2}},D),A&&r().createElement(l.Alert,{severity:"error",sx:{mb:2}},A),M&&r().createElement(l.Alert,{severity:M.success?"success":"error",sx:{mb:2}},r().createElement(l.AlertTitle,null,M.success?"Connection Test Successful":"Connection Test Failed"),r().createElement(l.Typography,{variant:"body2"},M.message),M.details&&r().createElement(l.Box,{sx:{mt:1}},M.success?r().createElement(r().Fragment,null,M.details.buckets&&r().createElement(l.Typography,{variant:"body2"},"Found ",M.details.buckets," bucket(s)"),M.details.region&&r().createElement(l.Typography,{variant:"body2"},"Region: ",M.details.region),M.details.permissions&&r().createElement(l.Typography,{variant:"body2"},"Permissions: ",M.details.permissions.join(", "))):r().createElement(r().Fragment,null,M.details.error&&r().createElement(l.Typography,{variant:"body2"},"Error: ",M.details.error),M.details.code&&r().createElement(l.Typography,{variant:"body2"},"Code: ",M.details.code))))),c&&r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between",mt:3}},r().createElement(l.Box,null,r().createElement(l.Button,{variant:"contained",color:"primary",disabled:!L||E||o,onClick:_,startIcon:E?r().createElement(l.CircularProgress,{size:20}):r().createElement(u.Refresh,null)},"Test Connection")),r().createElement(l.Box,null,k&&r().createElement(l.Button,{variant:"outlined",color:"error",onClick:()=>w(!0),disabled:E||o,startIcon:r().createElement(u.Delete,null),sx:{mr:1}},"Delete"),r().createElement(l.Button,{variant:"contained",color:"primary",disabled:!L||E||o,onClick:R,startIcon:v?r().createElement(l.CircularProgress,{size:20}):r().createElement(u.Save,null)},v?"Saving...":k?"Update":"Save"))))),r().createElement(l.Dialog,{open:S,onClose:()=>w(!1)},r().createElement(l.DialogTitle,null,"Delete Credentials?"),r().createElement(l.DialogContent,null,r().createElement(l.DialogContentText,null,"Are you sure you want to delete the stored AWS S3 credentials? This action cannot be undone.")),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>w(!1),autoFocus:!0},"Cancel"),r().createElement(l.Button,{onClick:N,color:"error"},"Delete"))))};f.propTypes={onCredentialsSaved:d().func,onCredentialsLoaded:d().func,readOnly:d().bool,showSaveControls:d().bool,initialVisible:d().bool};const E=f;var b=n(213),v=n.n(b);const x=require("@mui/x-date-pickers/DatePicker"),C=require("@mui/x-date-pickers/LocalizationProvider"),T=require("@mui/x-date-pickers/AdapterDateFns");var S=n(939);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=[{value:"TEXT",label:"Text Files",description:"CSV, TXT, JSON, XML, etc."},{value:"DOCUMENT",label:"Documents",description:"PDF, DOCX, XLSX, PPTX, etc."},{value:"IMAGE",label:"Images",description:"JPG, PNG, GIF, SVG, etc."},{value:"AUDIO",label:"Audio",description:"MP3, WAV, OGG, etc."},{value:"VIDEO",label:"Video",description:"MP4, WEBM, AVI, etc."},{value:"ARCHIVE",label:"Archives",description:"ZIP, RAR, TAR, etc."},{value:"DATA",label:"Data Files",description:"CSV, JSON, Parquet, etc."},{value:"CODE",label:"Source Code",description:"JS, PY, JAVA, etc."}],B=[{value:[0,10240],label:"Tiny (< 10KB)"},{value:[0,102400],label:"Small (< 100KB)"},{value:[102400,1048576],label:"Medium (100KB - 1MB)"},{value:[1048576,10485760],label:"Large (1MB - 10MB)"},{value:[10485760,104857600],label:"X-Large (10MB - 100MB)"},{value:[104857600,Number.MAX_SAFE_INTEGER],label:"XX-Large (> 100MB)"}],P=[{value:{days:1},label:"Last 24 hours"},{value:{days:7},label:"Last 7 days"},{value:{days:30},label:"Last 30 days"},{value:{days:90},label:"Last 3 months"},{value:{days:365},label:"Last year"},{value:"custom",label:"Custom range"}],D=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},O=e=>e?new Date(e).toLocaleString():"Unknown",A=function(){var e=i()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t||0===t.length)return{success:!1,message:"No items selected"};setBatchOperationStatus({inProgress:!0,completed:!1,failed:!1,message:"Processing ".concat(t.length," items..."),details:null,progress:0});var a=t.length,r=e=>{var t=Math.round(e/a*100);setBatchOperationStatus((n=>k(k({},n),{},{progress:t,message:"Processed ".concat(e," of ").concat(a," items (").concat(t,"%)")})))};try{switch(e){case"delete":console.log("Batch deleting ".concat(t.length," items"));for(var l=0;l<a;l++)yield new Promise((e=>setTimeout(e,75))),r(l+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully deleted ".concat(t.length," items"),details:{itemCount:t.length,itemTypes:z(t),totalSize:M(t)},progress:100}),{success:!0,message:"Successfully deleted ".concat(t.length," items"),details:{itemCount:t.length}};case"download":console.log("Batch downloading ".concat(t.length," items"));for(var o=0;o<a;o++)yield new Promise((e=>setTimeout(e,50))),r(o+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Prepared ".concat(t.length," items for download"),details:{itemCount:t.length,itemTypes:z(t),totalSize:M(t)},progress:100}),{success:!0,message:"Prepared ".concat(t.length," items for download"),details:{itemCount:t.length}};case"copy":console.log("Batch copying ".concat(t.length," items to ").concat(n));for(var i=0;i<a;i++)yield new Promise((e=>setTimeout(e,100))),r(i+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully copied ".concat(t.length," items to ").concat(n||"destination"),details:{itemCount:t.length,target:n||"destination",itemTypes:z(t),totalSize:M(t)},progress:100}),{success:!0,message:"Successfully copied ".concat(t.length," items"),details:{itemCount:t.length,target:n}};case"move":console.log("Batch moving ".concat(t.length," items to ").concat(n));for(var c=0;c<a;c++)yield new Promise((e=>setTimeout(e,125))),r(c+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully moved ".concat(t.length," items to ").concat(n||"destination"),details:{itemCount:t.length,target:n||"destination",itemTypes:z(t),totalSize:M(t)},progress:100}),{success:!0,message:"Successfully moved ".concat(t.length," items"),details:{itemCount:t.length,target:n}};case"makePublic":console.log("Making ".concat(t.length," items public"));for(var s=0;s<a;s++)yield new Promise((e=>setTimeout(e,40))),r(s+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully made ".concat(t.length," items public"),details:{itemCount:t.length,itemTypes:z(t)},progress:100}),{success:!0,message:"Successfully made ".concat(t.length," items public"),details:{itemCount:t.length}};case"makePrivate":console.log("Making ".concat(t.length," items private"));for(var m=0;m<a;m++)yield new Promise((e=>setTimeout(e,40))),r(m+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully made ".concat(t.length," items private"),details:{itemCount:t.length,itemTypes:z(t)},progress:100}),{success:!0,message:"Successfully made ".concat(t.length," items private"),details:{itemCount:t.length}};case"addTags":console.log("Adding tags to ".concat(t.length," items"));for(var d=0;d<a;d++)yield new Promise((e=>setTimeout(e,60))),r(d+1);return setBatchOperationStatus({inProgress:!1,completed:!0,failed:!1,message:"Successfully tagged ".concat(t.length," items"),details:{itemCount:t.length,itemTypes:z(t)},progress:100}),{success:!0,message:"Successfully tagged ".concat(t.length," items"),details:{itemCount:t.length}};default:return setBatchOperationStatus({inProgress:!1,completed:!1,failed:!0,message:"Unknown action: ".concat(e),details:null,progress:0}),{success:!1,message:"Unknown action: ".concat(e)}}}catch(u){return setBatchOperationStatus({inProgress:!1,completed:!1,failed:!0,message:"Operation failed: ".concat(u.message),details:{error:u.message},progress:0}),{success:!1,message:"Operation failed: ".concat(u.message),details:{error:u.message}}}}));return function(t,n){return e.apply(this,arguments)}}(),z=e=>{if(!e)return{files:0,folders:0};var t={files:0,folders:0};return e.forEach((e=>{"folder"===e.type||"directory"===e.type?t.folders++:t.files++})),t},M=e=>e?e.reduce(((e,t)=>"folder"!==t.type&&"directory"!==t.type?e+(t.size||0):e),0):0,F=e=>{var{config:t,onSelectBucket:o,onSelectObject:c,readOnly:s=!1,selectedBucket:m="",selectedPrefix:d=""}=e,p=useRef(!0);(0,a.useEffect)((()=>()=>{p.current=!1}),[]);var g=useRef([]),y=useRef([]),h=(0,a.useCallback)(((e,t)=>{var n=setTimeout((()=>{g.current=g.current.filter((e=>e!==n)),p.current&&e()}),t);return g.current.push(n),n}),[]),f=(0,a.useCallback)(((e,t)=>{var n=setInterval((()=>{p.current&&e()}),t);return y.current.push(n),n}),[]);(0,a.useEffect)((()=>()=>{g.current.forEach((e=>clearTimeout(e))),g.current=[],y.current.forEach((e=>clearInterval(e))),y.current=[]}),[]),(0,a.useEffect)((()=>{var e=new AbortController;return t&&Qe(e.signal),()=>{e.abort()}}),[t,Qe]);var[E,b]=(0,a.useState)([]),[w,z]=(0,a.useState)([]),[M,F]=(0,a.useState)(d||""),[j,R]=(0,a.useState)([]),[N,_]=(0,a.useState)(!1),[L,W]=(0,a.useState)(!1),[G,V]=(0,a.useState)(""),[q,U]=(0,a.useState)([]),[H,K]=(0,a.useState)(!1),[Z,J]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(0),[Q,$]=(0,a.useState)({fileTypes:[],sizeRange:[0,Number.MAX_SAFE_INTEGER],dateRange:{start:null,end:null},modifiedBy:"",customPrefix:""}),[ee,te]=(0,a.useState)(0),[ne,ae]=(0,a.useState)({hasFileTypeFilters:!1,hasSizeFilter:!1,hasDateFilter:!1,hasCustomPrefix:!1}),[re,le]=(0,a.useState)([]),[oe,ie]=(0,a.useState)(!1),[ce,se]=(0,a.useState)(!1),[me,de]=(0,a.useState)(""),[ue,pe]=(0,a.useState)(""),[ge,ye]=(0,a.useState)({inProgress:!1,completed:!1,failed:!1,message:"",details:null,progress:0}),[he,fe]=(0,a.useState)(!1),[Ee,be]=(0,a.useState)(""),[ve,xe]=(0,a.useState)(!1),[Ce,Te]=(0,a.useState)(""),[Se,we]=(0,a.useState)(!1),[ke,Ie]=(0,a.useState)(null),[Be,Pe]=(0,a.useState)(!1),[De,Oe]=(0,a.useState)(null),[Ae,ze]=(0,a.useState)([]),[Me,Fe]=(0,a.useState)(0),[je,Re]=(0,a.useState)(0),[Ne,_e]=(0,a.useState)({overwriteExisting:!0,makePublic:!1}),[Le,We]=(0,a.useState)(null),[Ge,Ve]=(0,a.useState)(null),[qe,Ue]=(0,a.useState)(!1),[He,Ke]=(0,a.useState)(""),[Ze,Je]=(0,a.useState)(""),[Xe,Ye]=(0,a.useState)(null),Qe=(0,a.useCallback)(function(){var e=i()((function*(e){if(t){W(!0),Ye(null);try{console.log("Loading S3 buckets with config:",t);var n=new Promise(((t,n)=>{var a=setTimeout((()=>{t({status:"success",buckets:[{name:"data-bucket-1",creationDate:new Date(Date.now()-15552e6).toISOString()},{name:"data-bucket-2",creationDate:new Date(Date.now()-7776e6).toISOString()},{name:"logs-bucket",creationDate:new Date(Date.now()-31104e6).toISOString()},{name:"backup-bucket",creationDate:new Date(Date.now()-62208e6).toISOString()},{name:"test-integration-bucket",creationDate:(new Date).toISOString()}]})}),1e3);e&&e.addEventListener("abort",(()=>{clearTimeout(a),n(new Error("Operation cancelled"))})),g.current.push(a)})),a=yield n;if(!p.current)return;"success"===a.status?(b(a.buckets),m&&a.buckets.some((e=>e.name===m))&&$e(m,d||"",e)):Ye(a.message||"Failed to load S3 buckets")}catch(r){"Operation cancelled"!==r.message&&p.current&&(console.error("Error loading buckets:",r),Ye(r.message||"An error occurred while loading S3 buckets"))}finally{p.current&&W(!1)}}}));return function(t){return e.apply(this,arguments)}}(),[t,m,d,p]),$e=(0,a.useCallback)(function(){var e=i()((function*(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&e){_(!0),Ye(null);try{console.log("Loading objects from bucket: ".concat(e,", prefix: ").concat(n));var a=yield new Promise((t=>setTimeout((()=>{var a=[];""===n?a=[{key:"folder1/",size:0,lastModified:new Date(Date.now()-864e5).toISOString(),type:"folder"},{key:"folder2/",size:0,lastModified:new Date(Date.now()-1728e5).toISOString(),type:"folder"},{key:"data/",size:0,lastModified:new Date(Date.now()-2592e5).toISOString(),type:"folder"},{key:"sample.csv",size:1024,lastModified:new Date(Date.now()-3456e5).toISOString(),contentType:"text/csv",type:"file"},{key:"readme.txt",size:512,lastModified:new Date(Date.now()-432e6).toISOString(),contentType:"text/plain",type:"file"}]:"folder1/"===n?a=[{key:"folder1/subfolder/",size:0,lastModified:new Date(Date.now()-5184e5).toISOString(),type:"folder"},{key:"folder1/data1.json",size:2048,lastModified:new Date(Date.now()-6048e5).toISOString(),contentType:"application/json",type:"file"}]:"folder1/subfolder/"===n?a=[{key:"folder1/subfolder/deep.xml",size:4096,lastModified:new Date(Date.now()-6912e5).toISOString(),contentType:"application/xml",type:"file"}]:"folder2/"===n?a=[{key:"folder2/image.png",size:102400,lastModified:new Date(Date.now()-7776e5).toISOString(),contentType:"image/png",type:"file"},{key:"folder2/document.pdf",size:204800,lastModified:new Date(Date.now()-864e6).toISOString(),contentType:"application/pdf",type:"file"}]:"data/"===n&&(a=[{key:"data/dataset1.csv",size:5120,lastModified:new Date(Date.now()-9504e5).toISOString(),contentType:"text/csv",type:"file"},{key:"data/dataset2.csv",size:6144,lastModified:new Date(Date.now()-10368e5).toISOString(),contentType:"text/csv",type:"file"},{key:"data/dataset3.xlsx",size:8192,lastModified:new Date(Date.now()-11232e5).toISOString(),contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file"}]),t({status:"success",objects:a,bucketName:e,prefix:n})}),1e3)));"success"===a.status?(e!==m&&(o(e),R([])),z(a.objects),F(n),n!==M&&R((e=>M?[...e,M]:e))):Ye(a.message||"Failed to load objects")}catch(r){console.error("Error loading objects:",r),Ye(r.message||"An error occurred while loading objects")}finally{_(!1),K(!1)}}}));return function(t){return e.apply(this,arguments)}}(),[t,M,o,m]),et=(0,a.useCallback)((e=>{if("folder"===e.type){var t=e.key;$e(m,t)}else"file"===e.type&&c({bucketName:m,prefix:M,key:e.key,size:e.size,lastModified:e.lastModified,contentType:e.contentType})}),[M,$e,c,m]),tt=(0,a.useCallback)((()=>{if(j.length>0){var e=j[j.length-1];R((e=>e.slice(0,-1))),$e(m,e)}else z([]),F(""),o("")}),[$e,o,j,m]),nt=(0,a.useCallback)(i()((function*(){if(G&&m){K(!0),_(!0),Ye(null);try{console.log('Searching for "'.concat(G,'" in bucket: ').concat(m));var e=yield new Promise((e=>setTimeout((()=>{var t=[{key:"folder1/data1.json",size:2048,lastModified:new Date(Date.now()-6048e5).toISOString(),contentType:"application/json",type:"file"},{key:"folder1/subfolder/deep.xml",size:4096,lastModified:new Date(Date.now()-6912e5).toISOString(),contentType:"application/xml",type:"file"},{key:"folder2/image.png",size:102400,lastModified:new Date(Date.now()-7776e5).toISOString(),contentType:"image/png",type:"file"},{key:"folder2/document.pdf",size:204800,lastModified:new Date(Date.now()-864e6).toISOString(),contentType:"application/pdf",type:"file"},{key:"data/dataset1.csv",size:5120,lastModified:new Date(Date.now()-9504e5).toISOString(),contentType:"text/csv",type:"file"},{key:"data/dataset2.csv",size:6144,lastModified:new Date(Date.now()-10368e5).toISOString(),contentType:"text/csv",type:"file"},{key:"data/dataset3.xlsx",size:8192,lastModified:new Date(Date.now()-11232e5).toISOString(),contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file"},{key:"sample.csv",size:1024,lastModified:new Date(Date.now()-3456e5).toISOString(),contentType:"text/csv",type:"file"},{key:"readme.txt",size:512,lastModified:new Date(Date.now()-432e6).toISOString(),contentType:"text/plain",type:"file"}],n=G.toLowerCase(),a=t.filter((e=>e.key.toLowerCase().includes(n)));e({status:"success",objects:a})}),1e3)));"success"===e.status?U(e.objects):Ye(e.message||"Failed to search objects")}catch(t){console.error("Error searching objects:",t),Ye(t.message||"An error occurred while searching objects")}finally{_(!1)}}})),[G,m]),at=(0,a.useCallback)((()=>{V(""),U([]),K(!1),m&&$e(m,M)}),[M,$e,m]),rt=(0,a.useCallback)((()=>{if(m){_(!0);try{var e=((e,t)=>e&&t?e.filter((e=>{if("folder"===e.type||"directory"===e.type){var n=!0,a=!0;if(t.customPrefix&&(n=e.key.toLowerCase().includes(t.customPrefix.toLowerCase())),t.dateRange.start&&t.dateRange.end){var r=new Date(e.lastModified);a=r>=t.dateRange.start&&r<=t.dateRange.end}return n&&a}var l=!0;t.fileTypes&&t.fileTypes.length>0&&(l=t.fileTypes.some((t=>{var n,a=e.contentType||"";return null===(n=S.MimeTypeCategories[t])||void 0===n?void 0:n.some((e=>a.toLowerCase().includes(e.toLowerCase())))})));var o=!0;if(t.sizeRange&&2===t.sizeRange.length){var i=e.size||0;o=i>=t.sizeRange[0]&&i<=t.sizeRange[1]}var c=!0;if(t.dateRange.start&&t.dateRange.end){var s=new Date(e.lastModified);c=s>=t.dateRange.start&&s<=t.dateRange.end}var m=!0;return t.customPrefix&&(m=e.key.toLowerCase().includes(t.customPrefix.toLowerCase())),l&&o&&c&&m})):e)(H?q:w,Q);H||K(!0),U(e)}catch(t){console.error("Error applying filters:",t),Ye("An error occurred while applying filters")}finally{_(!1),J(!1)}}}),[Q,H,w,q,m]),lt=(0,a.useCallback)((()=>{$({fileTypes:[],sizeRange:[0,Number.MAX_SAFE_INTEGER],dateRange:{start:null,end:null},modifiedBy:"",customPrefix:""}),H&&!G?(K(!1),m&&$e(m,M)):H&&G&&nt()}),[M,H,$e,nt,G,m]),ot=(0,a.useCallback)((()=>{ie((e=>!e)),oe&&le([])}),[oe]),it=(0,a.useCallback)(((e,t)=>{e.stopPropagation(),le((e=>e.some((e=>e.key===t.key&&e.type===t.type))?e.filter((e=>!(e.key===t.key&&e.type===t.type))):[...e,t]))}),[]),ct=(0,a.useCallback)((e=>re.some((t=>t.key===e.key&&t.type===e.type))),[re]),st=(0,a.useCallback)((()=>{re.length===(H?q.length:w.length)?le([]):le(H?q:w)}),[H,w,q,re]),mt=(0,a.useCallback)(i()((function*(){if(re.length&&me){_(!0),Ye(null);try{var e=yield A(me,re);if(e.success){if("delete"===me){var t=re.map((e=>e.key));H?U((e=>e.filter((e=>!t.includes(e.key))))):z((e=>e.filter((e=>!t.includes(e.key)))))}le([]),ie(!1)}else Ye(e.message||"Batch operation failed")}catch(n){console.error("Error executing batch action:",n),Ye("An error occurred during batch operation")}finally{_(!1),se(!1)}}})),[me,H,re]),dt=(0,a.useCallback)(i()((function*(){if(Ee){_(!0),Ye(null);try{console.log("Creating bucket: ".concat(Ee));var e=yield new Promise((e=>setTimeout((()=>{Ee.includes(" ")?e({status:"error",message:"Bucket name cannot contain spaces"}):E.some((e=>e.name===Ee))?e({status:"error",message:"Bucket already exists"}):e({status:"success",bucket:{name:Ee,creationDate:(new Date).toISOString()}})}),1e3)));"success"===e.status?(b((t=>[...t,e.bucket])),fe(!1),be(""),o(e.bucket.name),$e(e.bucket.name,"")):Ye(e.message||"Failed to create bucket")}catch(t){console.error("Error creating bucket:",t),Ye(t.message||"An error occurred while creating bucket")}finally{_(!1)}}})),[E,$e,Ee,o]),ut=(0,a.useCallback)(i()((function*(){if(Ce&&m){_(!0),Ye(null);try{var e=M?"".concat(M).concat(Ce,"/"):"".concat(Ce,"/");console.log("Creating folder: ".concat(e," in bucket: ").concat(m));var t=yield new Promise((t=>setTimeout((()=>{t({status:"success",folder:{key:e,size:0,lastModified:(new Date).toISOString(),type:"folder"}})}),1e3)));"success"===t.status?(z((e=>[...e,t.folder])),xe(!1),Te("")):Ye(t.message||"Failed to create folder")}catch(n){console.error("Error creating folder:",n),Ye(n.message||"An error occurred while creating folder")}finally{_(!1)}}})),[M,Ce,m]),pt=(0,a.useCallback)(i()((function*(){if(ke){_(!0),Ye(null);try{console.log("Deleting ".concat(ke.type,": ").concat(ke.name||ke.key));var e=yield new Promise((e=>setTimeout((()=>{e({status:"success"})}),1e3)));"success"===e.status?("bucket"===ke.type?(b((e=>e.filter((e=>e.name!==ke.name)))),m===ke.name&&(o(""),z([]),F(""))):z((e=>e.filter((e=>e.key!==ke.key)))),we(!1),Ie(null)):Ye(e.message||"Failed to delete item")}catch(t){console.error("Error deleting item:",t),Ye(t.message||"An error occurred while deleting item")}finally{_(!1)}}})),[ke,o,m]),gt=(0,a.useCallback)((e=>{if(e&&0!==e.length){var t=Array.from(e);1===t.length?(Oe(t[0]),ze([])):(ze(t),Oe(t[0]),Fe(0))}}),[]),yt=(0,a.useCallback)(function(){var e=i()((function*(e){if(!e||!m)return!1;try{var t=M?"".concat(M).concat(e.name):e.name;console.log("Uploading file: ".concat(t," to bucket: ").concat(m));var n=0,a=f((()=>{if(n<80?n+=5*Math.random():n<95?n+=.5*Math.random():n<99&&(n+=.1),n>=100){var e=y.current.indexOf(a);-1!==e&&y.current.splice(e,1),clearInterval(a),n=100}Re(Math.min(Math.floor(n),100))}),200),r=yield new Promise((n=>{var r=Math.min(e.size/1e4,5e3);h((()=>{var r=y.current.indexOf(a);-1!==r&&y.current.splice(r,1),clearInterval(a),Re(100),n({status:"success",object:{key:t,size:e.size,lastModified:(new Date).toISOString(),contentType:e.type||"application/octet-stream",type:"file"}})}),1e3+r)}));return"success"===r.status?(z((e=>[...e,r.object])),!0):(Ye(r.message||"Failed to upload file: ".concat(e.name)),!1)}catch(l){return console.error("Error uploading file ".concat(e.name,":"),l),Ye(l.message||"An error occurred while uploading file: ".concat(e.name)),!1}}));return function(t){return e.apply(this,arguments)}}(),[M,m]),ht=(0,a.useCallback)(i()((function*(){if(m){_(!0),Ye(null);try{if(Ae.length>0){for(var e=0,t=0;t<Ae.length;t++){Fe(t),Oe(Ae[t]),Re(0),(yield yt(Ae[t]))&&e++,t<Ae.length-1&&(yield new Promise((e=>setTimeout(e,500))))}console.log("Uploaded ".concat(e," of ").concat(Ae.length," files successfully")),e>0&&setTimeout((()=>{Pe(!1),Oe(null),ze([]),Re(0)}),1500)}else if(De){(yield yt(De))&&setTimeout((()=>{Pe(!1),Oe(null),Re(0)}),1500)}}catch(n){console.error("Error in upload process:",n),Ye(n.message||"An unexpected error occurred during upload")}finally{_(!1)}}})),[m,De,Ae,yt]),ft=(0,a.useCallback)((e=>{e&&m&&(console.log("Downloading object: ".concat(e.key," from bucket: ").concat(m)),alert("Simulated download of file: ".concat(e.key)))}),[m]),Et=(0,a.useCallback)((e=>{if(e&&m){console.log("Viewing object: ".concat(e.key," from bucket: ").concat(m)),Ke("https://example.com/preview/".concat(m,"/").concat(e.key));var t=e.contentType||"";Je(t),Ve(e),Ue(!0)}}),[m]),bt=(0,a.useCallback)(((e,t)=>{e.preventDefault(),s||(We({x:e.clientX,y:e.clientY}),Ve(t))}),[s]),vt=(0,a.useCallback)((()=>{We(null),Ve(null)}),[]);(0,a.useEffect)((()=>{t&&Qe()}),[t,Qe]);var xt=(e,t)=>{if("bucket"===t)return e;if("folder"===t){var n=e.split("/");return n[n.length-2]||e}var a=e.split("/");return a[a.length-1]||e};return r().createElement(l.Box,{sx:{display:"flex",flexDirection:"column",height:"100%"}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",mb:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden"}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"}},r().createElement(l.Typography,{variant:"h6",sx:{flexShrink:0,whiteSpace:"nowrap"}},m?r().createElement(r().Fragment,null,r().createElement(l.Tooltip,{title:"Back to buckets"},r().createElement(l.Box,{component:"span",onClick:()=>o(""),sx:{cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline"}}},"Buckets"))," / ",r().createElement(l.Tooltip,{title:"Bucket: ".concat(m)},r().createElement("strong",null,m))):"AWS S3 Buckets"),m&&M&&r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",ml:1,overflow:"hidden",flexWrap:"nowrap"}},r().createElement(l.Typography,{component:"span",variant:"body2",sx:{display:"flex",alignItems:"center",color:"text.secondary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}," / ",M.split("/").filter(Boolean).map(((e,t,n)=>{var a=n.slice(0,t+1).join("/")+"/";return r().createElement(r().Fragment,{key:t},t>0&&" / ",r().createElement(l.Tooltip,{title:"Navigate to ".concat(e)},r().createElement(l.Box,{component:"span",onClick:()=>$e(m,a),sx:{cursor:"pointer",color:"primary.main",flexShrink:0,"&:hover":{textDecoration:"underline"}}},e)))})))))),r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",ml:2}},m&&r().createElement(l.Tooltip,{title:"Go up"},r().createElement(l.IconButton,{onClick:tt,disabled:N,size:"small"},r().createElement(u.ArrowUpward,null))),r().createElement(l.Tooltip,{title:"Refresh"},r().createElement(l.IconButton,{onClick:()=>m?$e(m,M):Qe(),disabled:N,size:"small"},r().createElement(u.Refresh,null))),!s&&r().createElement(r().Fragment,null,m?r().createElement(l.Tooltip,{title:"Upload File"},r().createElement(l.IconButton,{onClick:()=>Pe(!0),disabled:N,size:"small",color:"primary"},r().createElement(u.CloudUpload,null))):r().createElement(l.Tooltip,{title:"New Bucket"},r().createElement(l.IconButton,{onClick:()=>fe(!0),disabled:N||L,size:"small",color:"primary"},r().createElement(u.AddCircleOutline,null))),m&&r().createElement(l.Tooltip,{title:"New Folder"},r().createElement(l.IconButton,{onClick:()=>xe(!0),disabled:N,size:"small",color:"primary"},r().createElement(u.CreateNewFolder,null)))))),m&&r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",mb:1}},r().createElement(l.TextField,{fullWidth:!0,placeholder:"Search objects...",value:G,onChange:e=>V(e.target.value),disabled:N,size:"small",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Search,null)),endAdornment:H&&!Q.fileTypes.length&&r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.Button,{size:"small",onClick:at,disabled:N},"Clear"))},onKeyPress:e=>{"Enter"===e.key&&G&&nt()}}),r().createElement(l.Button,{variant:"contained",onClick:nt,disabled:N||!G,sx:{ml:1}},"Search"),r().createElement(l.Tooltip,{title:"Advanced Filters"},r().createElement(l.IconButton,{color:Q.fileTypes.length>0?"primary":"default",onClick:()=>{Y(0),J(!0)},sx:{ml:1}},r().createElement(u.FilterAlt,null))),!s&&r().createElement(l.Tooltip,{title:oe?"Exit Selection Mode":"Selection Mode"},r().createElement(l.IconButton,{color:oe?"primary":"default",onClick:ot,sx:{ml:1}},r().createElement(u.SelectAll,null)))),(Q.fileTypes.length>0||Q.dateRange.start||Q.sizeRange[0]>0||Q.sizeRange[1]<Number.MAX_SAFE_INTEGER||Q.customPrefix)&&r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1,mb:1}},r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},"Filters:"),Q.fileTypes.map((e=>{var t;return r().createElement(l.Chip,{key:e,label:"Type: ".concat((null===(t=I.find((t=>t.value===e)))||void 0===t?void 0:t.label)||e),size:"small",onDelete:()=>{$((t=>k(k({},t),{},{fileTypes:t.fileTypes.filter((t=>t!==e))}))),setTimeout(rt,0)}})})),Q.sizeRange[0]>0&&r().createElement(l.Chip,{label:"Min size: ".concat(D(Q.sizeRange[0])),size:"small",onDelete:()=>{$((e=>k(k({},e),{},{sizeRange:[0,e.sizeRange[1]]}))),setTimeout(rt,0)}}),Q.sizeRange[1]<Number.MAX_SAFE_INTEGER&&r().createElement(l.Chip,{label:"Max size: ".concat(D(Q.sizeRange[1])),size:"small",onDelete:()=>{$((e=>k(k({},e),{},{sizeRange:[e.sizeRange[0],Number.MAX_SAFE_INTEGER]}))),setTimeout(rt,0)}}),Q.dateRange.start&&Q.dateRange.end&&r().createElement(l.Chip,{label:"Date: ".concat(O(Q.dateRange.start)," - ").concat(O(Q.dateRange.end)),size:"small",onDelete:()=>{$((e=>k(k({},e),{},{dateRange:{start:null,end:null}}))),setTimeout(rt,0)}}),Q.customPrefix&&r().createElement(l.Chip,{label:"Prefix: ".concat(Q.customPrefix),size:"small",onDelete:()=>{$((e=>k(k({},e),{},{customPrefix:""}))),setTimeout(rt,0)}}),r().createElement(l.Button,{size:"small",variant:"outlined",startIcon:r().createElement(u.Clear,{fontSize:"small"}),onClick:lt},"Clear All")),oe&&re.length>0&&r().createElement(l.Paper,{variant:"outlined",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,mt:1}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(l.Typography,{variant:"body2",fontWeight:"bold",color:"primary.main"},re.length," item",1!==re.length?"s":""," selected"),r().createElement(l.Tooltip,{title:"Clear selection"},r().createElement(l.IconButton,{size:"small",onClick:()=>le([]),sx:{ml:1}},r().createElement(u.Clear,{fontSize:"small"})))),r().createElement(l.Box,null,r().createElement(l.Tooltip,{title:"Download Selected"},r().createElement(l.IconButton,{size:"small",onClick:()=>{de("download"),se(!0)}},r().createElement(u.Download,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Delete Selected"},r().createElement(l.IconButton,{size:"small",color:"error",onClick:()=>{de("delete"),se(!0)}},r().createElement(u.Delete,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Copy Selected"},r().createElement(l.IconButton,{size:"small",onClick:()=>{de("copy"),se(!0)}},r().createElement(u.ContentCopy,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Move Selected"},r().createElement(l.IconButton,{size:"small",onClick:()=>{de("move"),se(!0)}},r().createElement(u.MoveToInbox,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Make Public"},r().createElement(l.IconButton,{size:"small",onClick:()=>{de("makePublic"),se(!0)}},r().createElement(u.Public,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Make Private"},r().createElement(l.IconButton,{size:"small",onClick:()=>{de("makePrivate"),se(!0)}},r().createElement(u.Lock,{fontSize:"small"}))),r().createElement(l.Button,{size:"small",variant:"outlined",color:"primary",onClick:st,sx:{ml:1}},re.length===(H?q.length:w.length)?"Deselect All":"Select All")))),Xe&&r().createElement(l.Typography,{color:"error",sx:{mb:2}},"Error: ",Xe),L||N?r().createElement(l.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4}},r().createElement(l.CircularProgress,null)):m?r().createElement(l.TableContainer,{component:l.Paper,sx:{flexGrow:1,overflow:"auto"}},r().createElement(l.Table,{size:"small"},r().createElement(l.TableHead,null,r().createElement(l.TableRow,null,oe&&r().createElement(l.TableCell,{padding:"checkbox",width:"50px"}),r().createElement(l.TableCell,null,"Name"),r().createElement(l.TableCell,{align:"right"},"Size"),r().createElement(l.TableCell,{align:"right"},"Last Modified"),r().createElement(l.TableCell,{align:"right"},"Actions"))),r().createElement(l.TableBody,null,0===(H?q:w).length?r().createElement(l.TableRow,null,r().createElement(l.TableCell,{colSpan:oe?5:4,align:"center"},H?"No search results":"No objects in this location")):(H?q:w).map((e=>{return r().createElement(l.TableRow,{key:e.key,hover:!0,onClick:t=>oe?it(t,e):et(e),sx:k({cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},oe&&ct(e)?{backgroundColor:"action.selected","&:hover":{backgroundColor:"action.selectedHover"}}:{}),onContextMenu:t=>bt(t,e)},oe&&r().createElement(l.TableCell,{padding:"checkbox"},r().createElement(l.Checkbox,{checked:ct(e),onChange:t=>it(t,e),onClick:e=>e.stopPropagation(),color:"primary",size:"small"})),r().createElement(l.TableCell,null,r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(l.ListItemIcon,{sx:{minWidth:36}},"folder"===e.type?r().createElement(u.Folder,{color:"primary"}):r().createElement(u.InsertDriveFile,{sx:{color:(t=e.contentType||"",t.startsWith("image/")?"success.main":t.startsWith("text/")?"info.main":t.includes("spreadsheet")||t.includes("excel")?"success.dark":t.includes("pdf")?"error.main":t.includes("zip")||t.includes("compressed")?"warning.dark":t.includes("json")||t.includes("xml")?"secondary.main":"info.main")}})),r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"body2",sx:{fontWeight:500}},xt(e.key,e.type)),"file"===e.type&&e.contentType&&r().createElement(l.Typography,{variant:"caption",color:"text.secondary"},e.contentType)))),r().createElement(l.TableCell,{align:"right"},"folder"===e.type?"-":r().createElement(l.Typography,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:500,color:"text.secondary"}},D(e.size||0))),r().createElement(l.TableCell,{align:"right"},r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},O(e.lastModified))),r().createElement(l.TableCell,{align:"right"},r().createElement(l.Box,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},"file"===e.type&&r().createElement(r().Fragment,null,r().createElement(l.Tooltip,{title:"View"},r().createElement(l.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),Et(e)}},r().createElement(u.Visibility,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Download"},r().createElement(l.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),ft(e)}},r().createElement(u.Download,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Select this file"},r().createElement(l.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),c({bucketName:m,prefix:M,key:e.key,size:e.size,lastModified:e.lastModified,contentType:e.contentType})}},r().createElement(u.CheckCircle,{fontSize:"small"})))),!s&&r().createElement(l.Tooltip,{title:"More actions"},r().createElement(l.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),bt(t,e)}},r().createElement(u.MoreVert,{fontSize:"small"}))))));var t}))))):r().createElement(l.TableContainer,{component:l.Paper,sx:{flexGrow:1,overflow:"auto"}},r().createElement(l.Table,{size:"small"},r().createElement(l.TableHead,null,r().createElement(l.TableRow,null,oe&&r().createElement(l.TableCell,{padding:"checkbox",width:"50px"}),r().createElement(l.TableCell,null,"Bucket Name"),r().createElement(l.TableCell,{align:"right"},"Creation Date"),r().createElement(l.TableCell,{align:"right"},"Actions"))),r().createElement(l.TableBody,null,0===E.length?r().createElement(l.TableRow,null,r().createElement(l.TableCell,{colSpan:oe?4:3,align:"center"},"No buckets found")):E.map((e=>r().createElement(l.TableRow,{key:e.name,hover:!0,onClick:t=>oe?it(t,k(k({},e),{},{type:"bucket"})):$e(e.name,""),sx:k({cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},oe&&ct(k(k({},e),{},{type:"bucket"}))?{backgroundColor:"action.selected","&:hover":{backgroundColor:"action.selectedHover"}}:{}),onContextMenu:t=>bt(t,k(k({},e),{},{type:"bucket"}))},oe&&r().createElement(l.TableCell,{padding:"checkbox"},r().createElement(l.Checkbox,{checked:ct(k(k({},e),{},{type:"bucket"})),onChange:t=>it(t,k(k({},e),{},{type:"bucket"})),onClick:e=>e.stopPropagation(),color:"primary",size:"small"})),r().createElement(l.TableCell,null,r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(l.ListItemIcon,{sx:{minWidth:36}},r().createElement(u.Storage,{color:"primary"})),r().createElement(l.Typography,{variant:"body2",sx:{fontWeight:500}},e.name))),r().createElement(l.TableCell,{align:"right"},r().createElement(l.Typography,{variant:"body2",color:"text.secondary"},O(e.creationDate))),r().createElement(l.TableCell,{align:"right"},r().createElement(l.Box,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r().createElement(l.Tooltip,{title:"Browse bucket"},r().createElement(l.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),$e(e.name,"")}},r().createElement(u.FolderOpen,{fontSize:"small"}))),r().createElement(l.Tooltip,{title:"Select bucket"},r().createElement(l.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),o(e.name)}},r().createElement(u.CheckCircle,{fontSize:"small"}))),!s&&r().createElement(l.Tooltip,{title:"More actions"},r().createElement(l.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),bt(t,k(k({},e),{},{type:"bucket"}))}},r().createElement(u.MoreVert,{fontSize:"small"}))))))))))),r().createElement(l.Menu,{open:Boolean(Le),onClose:vt,anchorReference:"anchorPosition",anchorPosition:Le?{top:Le.y,left:Le.x}:void 0},Ge&&"bucket"===Ge.type&&r().createElement("div",null,r().createElement(l.MenuItem,{onClick:()=>{$e(Ge.name,""),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.FolderOpen,{fontSize:"small",color:"primary"})),"Browse bucket"),r().createElement(l.MenuItem,{onClick:()=>{o(Ge.name),vt()},divider:!0},r().createElement(l.ListItemIcon,null,r().createElement(u.CheckCircle,{fontSize:"small",color:"primary"})),"Select bucket"),!s&&r().createElement(l.MenuItem,{onClick:()=>{Ie(Ge),we(!0),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete bucket")),Ge&&"folder"===Ge.type&&r().createElement("div",null,r().createElement(l.MenuItem,{onClick:()=>{et(Ge),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.FolderOpen,{fontSize:"small",color:"primary"})),"Open folder"),!s&&r().createElement(l.MenuItem,{onClick:()=>{Ie(Ge),we(!0),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete folder")),Ge&&"file"===Ge.type&&r().createElement("div",null,r().createElement(l.MenuItem,{onClick:()=>{Et(Ge),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.Visibility,{fontSize:"small"})),"View"),r().createElement(l.MenuItem,{onClick:()=>{ft(Ge),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.Download,{fontSize:"small"})),"Download"),r().createElement(l.MenuItem,{onClick:()=>{c({bucketName:m,prefix:M,key:Ge.key,size:Ge.size,lastModified:Ge.lastModified,contentType:Ge.contentType}),vt()},divider:!0},r().createElement(l.ListItemIcon,null,r().createElement(u.CheckCircle,{fontSize:"small",color:"primary"})),"Select this file"),!s&&r().createElement(l.MenuItem,{onClick:()=>{Ie(Ge),we(!0),vt()}},r().createElement(l.ListItemIcon,null,r().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete"))),r().createElement(l.Dialog,{open:Z,onClose:()=>J(!1),maxWidth:"md",fullWidth:!0},r().createElement(l.DialogTitle,null,r().createElement(l.Box,{display:"flex",alignItems:"center"},r().createElement(u.FilterAlt,{sx:{mr:1}}),r().createElement(l.Typography,{variant:"h6"},"Advanced Filtering"))),r().createElement(l.DialogContent,{dividers:!0},r().createElement(l.Tabs,{value:X,onChange:(e,t)=>Y(t),sx:{borderBottom:1,borderColor:"divider",mb:2}},r().createElement(l.Tab,{label:"File Types"}),r().createElement(l.Tab,{label:"Size"}),r().createElement(l.Tab,{label:"Date"}),r().createElement(l.Tab,{label:"Prefix"})),r().createElement(l.Box,{sx:{p:1,display:0===X?"block":"none"}},r().createElement(l.Typography,{variant:"subtitle1",gutterBottom:!0},"Filter by File Type"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Select file types to include in the results"),r().createElement(l.FormGroup,null,r().createElement(l.Grid,{container:!0,spacing:2},I.map((e=>r().createElement(l.Grid,{item:!0,xs:12,sm:6,md:4,key:e.value},r().createElement(l.FormControlLabel,{control:r().createElement(l.Checkbox,{checked:Q.fileTypes.includes(e.value),onChange:t=>{var n=t.target.checked?[...Q.fileTypes,e.value]:Q.fileTypes.filter((t=>t!==e.value));$(k(k({},Q),{},{fileTypes:n}))}}),label:r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"body2"},e.label),r().createElement(l.Typography,{variant:"caption",color:"text.secondary"},e.description))})))))),r().createElement(l.Box,{sx:{mt:4,display:1===X?"block":"none"}},r().createElement(l.Typography,{variant:"subtitle1",gutterBottom:!0},"Filter by Size"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Select a size range or use the slider"),r().createElement(l.FormControl,{fullWidth:!0,sx:{mb:2}},r().createElement(l.InputLabel,null,"Size Presets"),r().createElement(l.Select,{value:"",onChange:e=>{var t=B.find((t=>t.label===e.target.value));t&&$(k(k({},Q),{},{sizeRange:t.value}))}},r().createElement(l.MenuItem,{value:""},"Custom"),B.map((e=>r().createElement(l.MenuItem,{value:e.label,key:e.label},e.label))))),r().createElement(l.Box,{sx:{px:2}},r().createElement(l.Typography,{id:"size-slider",gutterBottom:!0},"Size Range: ",D(Q.sizeRange[0])," - ",D(Q.sizeRange[1])),r().createElement(l.Slider,{value:Q.sizeRange,onChange:(e,t)=>{$(k(k({},Q),{},{sizeRange:t}))},valueLabelDisplay:"auto",valueLabelFormat:e=>D(e),min:0,max:1073741824,step:1024,marks:[{value:0,label:"0"},{value:1048576,label:"1 MB"},{value:104857600,label:"100 MB"},{value:1073741824,label:"1 GB"}]}))),r().createElement(l.Box,{sx:{mt:4,display:2===X?"block":"none"}},r().createElement(l.Typography,{variant:"subtitle1",gutterBottom:!0},"Filter by Date"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Select a date range or choose a preset"),r().createElement(l.FormControl,{fullWidth:!0,sx:{mb:2}},r().createElement(l.InputLabel,null,"Date Presets"),r().createElement(l.Select,{value:"",onChange:e=>{var t=P.find((t=>t.label===e.target.value));if(t&&"custom"!==t.value){var n=new Date,a=(e=>{var t=new Date;return t.setDate(t.getDate()-e),t})(t.value.days);$(k(k({},Q),{},{dateRange:{start:a,end:n}}))}}},r().createElement(l.MenuItem,{value:""},"Custom Range"),P.map((e=>r().createElement(l.MenuItem,{value:e.label,key:e.label},e.label))))),r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12,sm:6},r().createElement(C.LocalizationProvider,{dateAdapter:T.AdapterDateFns},r().createElement(x.DatePicker,{label:"Start Date",value:Q.dateRange.start,onChange:e=>{$(k(k({},Q),{},{dateRange:k(k({},Q.dateRange),{},{start:e})}))},renderInput:e=>r().createElement(l.TextField,v()({},e,{fullWidth:!0}))}))),r().createElement(l.Grid,{item:!0,xs:12,sm:6},r().createElement(C.LocalizationProvider,{dateAdapter:T.AdapterDateFns},r().createElement(x.DatePicker,{label:"End Date",value:Q.dateRange.end,onChange:e=>{$(k(k({},Q),{},{dateRange:k(k({},Q.dateRange),{},{end:e})}))},renderInput:e=>r().createElement(l.TextField,v()({},e,{fullWidth:!0}))}))))),r().createElement(l.Box,{sx:{mt:4,display:3===X?"block":"none"}},r().createElement(l.Typography,{variant:"subtitle1",gutterBottom:!0},"Filter by Prefix"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Enter a custom prefix to filter items"),r().createElement(l.TextField,{fullWidth:!0,label:"Custom Prefix",value:Q.customPrefix,onChange:e=>{$(k(k({},Q),{},{customPrefix:e.target.value}))},placeholder:"e.g. data/ or report-",helperText:"Filter items by key prefix or substring"})))),r().createElement(l.DialogActions,null,r().createElement(l.Button,{startIcon:r().createElement(u.Clear,null),onClick:()=>{$({fileTypes:[],sizeRange:[0,Number.MAX_SAFE_INTEGER],dateRange:{start:null,end:null},modifiedBy:"",customPrefix:""})}},"Clear All"),r().createElement(l.Button,{onClick:()=>J(!1)},"Cancel"),r().createElement(l.Button,{variant:"contained",color:"primary",onClick:()=>{J(!1)},startIcon:r().createElement(u.FilterAlt,null)},"Apply Filters"))),r().createElement(l.Dialog,{open:he,onClose:()=>fe(!1)},r().createElement(l.DialogTitle,null,"Create New Bucket"),r().createElement(l.DialogContent,null,r().createElement(l.DialogContentText,null,"Enter a name for the new bucket. Bucket names must be globally unique, lowercase letters, numbers, or hyphens."),r().createElement(l.TextField,{autoFocus:!0,margin:"dense",id:"bucket-name",label:"Bucket Name",type:"text",fullWidth:!0,value:Ee,onChange:e=>be(e.target.value),error:Boolean(Xe),helperText:Xe,disabled:N})),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>fe(!1),disabled:N},"Cancel"),r().createElement(l.Button,{onClick:dt,color:"primary",disabled:N||!Ee},N?r().createElement(l.CircularProgress,{size:24}):"Create"))),r().createElement(l.Dialog,{open:ce,onClose:()=>se(!1)},r().createElement(l.DialogTitle,null,"delete"===me&&"Confirm Delete","download"===me&&"Confirm Download","copy"===me&&"Confirm Copy","move"===me&&"Confirm Move","makePublic"===me&&"Confirm Make Public","makePrivate"===me&&"Confirm Make Private"),r().createElement(l.DialogContent,null,r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",mb:2}},"delete"===me&&r().createElement(u.Delete,{color:"error",sx:{mr:1}}),"download"===me&&r().createElement(u.Download,{color:"primary",sx:{mr:1}}),"copy"===me&&r().createElement(u.ContentCopy,{color:"primary",sx:{mr:1}}),"move"===me&&r().createElement(u.MoveToInbox,{color:"primary",sx:{mr:1}}),"makePublic"===me&&r().createElement(u.Public,{color:"primary",sx:{mr:1}}),"makePrivate"===me&&r().createElement(u.Lock,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,null,"delete"===me&&"Are you sure you want to delete ".concat(re.length," item").concat(1!==re.length?"s":"","?"),"download"===me&&"Download ".concat(re.length," item").concat(1!==re.length?"s":"","?"),"copy"===me&&"Copy ".concat(re.length," item").concat(1!==re.length?"s":"","?"),"move"===me&&"Move ".concat(re.length," item").concat(1!==re.length?"s":"","?"),"makePublic"===me&&"Make ".concat(re.length," item").concat(1!==re.length?"s":""," public?"),"makePrivate"===me&&"Make ".concat(re.length," item").concat(1!==re.length?"s":""," private?"))),re.length<=5?r().createElement(l.List,{dense:!0},re.map(((e,t)=>r().createElement(l.ListItem,{key:t},r().createElement(l.ListItemIcon,null,"folder"===e.type||"directory"===e.type?r().createElement(u.Folder,{fontSize:"small",color:"primary"}):r().createElement(u.InsertDriveFile,{fontSize:"small"})),r().createElement(l.ListItemText,{primary:e.key.split("/").pop()||e.key,secondary:"file"===e.type?D(e.size):""}))))):r().createElement(l.Alert,{severity:"info"},re.length," items selected. Proceeding will affect all selected items."),("copy"===me||"move"===me)&&r().createElement(l.Box,{sx:{mt:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Destination:"),r().createElement(l.FormControl,{fullWidth:!0,sx:{mt:1}},r().createElement(l.InputLabel,null,"Destination Folder"),r().createElement(l.Select,{value:"",onChange:()=>{}},r().createElement(l.MenuItem,{value:""},"Root Directory"),w.filter((e=>"folder"===e.type||"directory"===e.type)).map(((e,t)=>r().createElement(l.MenuItem,{key:t,value:e.key},e.key))))))),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>se(!1)},"Cancel"),r().createElement(l.Button,{variant:"contained",color:"delete"===me?"error":"primary",onClick:mt,startIcon:"delete"===me?r().createElement(u.Delete,null):"download"===me?r().createElement(u.Download,null):"copy"===me?r().createElement(u.ContentCopy,null):"move"===me?r().createElement(u.MoveToInbox,null):"makePublic"===me?r().createElement(u.Public,null):"makePrivate"===me?r().createElement(u.Lock,null):null},"delete"===me?"Delete":"download"===me?"Download":"copy"===me?"Copy":"move"===me?"Move":"makePublic"===me?"Make Public":"makePrivate"===me?"Make Private":"Confirm"))),r().createElement(l.Dialog,{open:ve,onClose:()=>xe(!1)},r().createElement(l.DialogTitle,null,"Create New Folder"),r().createElement(l.DialogContent,null,r().createElement(l.DialogContentText,null,"Enter a name for the new folder."),r().createElement(l.TextField,{autoFocus:!0,margin:"dense",id:"folder-name",label:"Folder Name",type:"text",fullWidth:!0,value:Ce,onChange:e=>Te(e.target.value),error:Boolean(Xe),helperText:Xe,disabled:N})),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>xe(!1),disabled:N},"Cancel"),r().createElement(l.Button,{onClick:ut,color:"primary",disabled:N||!Ce},N?r().createElement(l.CircularProgress,{size:24}):"Create"))),r().createElement(l.Dialog,{open:Se,onClose:()=>we(!1)},r().createElement(l.DialogTitle,null,"Confirm Delete"),r().createElement(l.DialogContent,null,r().createElement(l.DialogContentText,null,"Are you sure you want to delete the ","bucket"===(null===ke||void 0===ke?void 0:ke.type)?"bucket":"folder"===(null===ke||void 0===ke?void 0:ke.type)?"folder":"file",":",r().createElement(l.Box,{component:"span",sx:{fontWeight:"bold",display:"block",mt:1}},(null===ke||void 0===ke?void 0:ke.name)||(null===ke||void 0===ke?void 0:ke.key)),"bucket"===(null===ke||void 0===ke?void 0:ke.type)&&r().createElement(l.Typography,{color:"error",sx:{mt:2}},"This will delete all objects in the bucket!"),"folder"===(null===ke||void 0===ke?void 0:ke.type)&&r().createElement(l.Typography,{color:"error",sx:{mt:2}},"This will delete all contents of the folder!"))),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>we(!1),disabled:N},"Cancel"),r().createElement(l.Button,{onClick:pt,color:"error",disabled:N},N?r().createElement(l.CircularProgress,{size:24}):"Delete"))),r().createElement(l.Dialog,{open:Be,onClose:()=>{N||(Pe(!1),Oe(null),Re(0))},fullWidth:!0,maxWidth:"md"},r().createElement(l.DialogTitle,null,r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},"Upload Files to S3",r().createElement(l.IconButton,{onClick:()=>{N||(Pe(!1),Oe(null),Re(0))}},r().createElement(u.Close,null)))),r().createElement(l.DialogContent,null,r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Upload Location:"),r().createElement(l.Paper,{variant:"outlined",sx:{p:1.5,mb:2,bgcolor:"background.default"}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Storage,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,{sx:{fontWeight:"medium"}},m,M?"/".concat(M):""))),r().createElement(l.Box,{sx:{border:"2px dashed",borderColor:"divider",borderRadius:1,p:3,mb:3,textAlign:"center",transition:"all 0.2s ease","&:hover":{borderColor:"primary.main",bgcolor:"action.hover"},position:"relative"},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor=e=>e.palette.primary.main,e.currentTarget.style.backgroundColor=e=>e.palette.action.hover},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor="",e.currentTarget.style.backgroundColor=""},onDrop:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor="",e.currentTarget.style.backgroundColor="",e.dataTransfer.files&&e.dataTransfer.files.length>0&&gt(e.dataTransfer.files)}},r().createElement(u.CloudUpload,{color:"primary",sx:{fontSize:40,mb:2}}),r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Drag & Drop Files Here"),r().createElement(l.Typography,{variant:"body2",color:"textSecondary",paragraph:!0},"or"),r().createElement(l.Button,{variant:"contained",component:"label",startIcon:r().createElement(u.CloudUpload,null)},"Browse Files",r().createElement("input",{type:"file",hidden:!0,multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&gt(e.target.files)}})),r().createElement(l.Typography,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:2}},"Supported file types: CSV, JSON, XML, PDF, Images, Text files")),De&&r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"File Preview"),r().createElement(l.Paper,{variant:"outlined",sx:{p:2,mb:2}},r().createElement(l.Grid,{container:!0,spacing:2,alignItems:"center"},r().createElement(l.Grid,{item:!0,xs:12,md:6},(()=>{var e=n(829).Z;(0,S.generateFileMetadata)(De);return r().createElement(e,{file:De,showActions:!1,showPreview:!1,variant:"outlined"})})()),r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"File Details"),r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},r().createElement("span",null,"File name:"),r().createElement("span",{style:{fontWeight:"medium"}},De.name)),r().createElement(l.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},r().createElement("span",null,"Size:"),r().createElement("span",null,D(De.size))),r().createElement(l.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},r().createElement("span",null,"Type:"),r().createElement("span",null,De.type||"Unknown")),r().createElement(l.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},r().createElement("span",null,"Last modified:"),r().createElement("span",null,new Date(De.lastModified).toLocaleString()))),(()=>{var{isPreviewSupported:e,getFileTypeDescription:t}=n(939),a=De.type,o=e(a);return r().createElement(l.Box,{sx:{mb:2}},o?r().createElement(l.Alert,{severity:"success",icon:r().createElement(u.CheckCircle,null)},"This file type (",t(a),") is fully supported."):r().createElement(l.Alert,{severity:"warning"},r().createElement(l.AlertTitle,null,"Limited Support"),"This file type may have limited preview capabilities in the system."))})(),r().createElement(l.Button,{fullWidth:!0,variant:"outlined",color:"error",startIcon:r().createElement(u.Close,null),onClick:()=>Oe(null),sx:{mt:1}},"Remove File")))),je>0&&r().createElement(l.Box,{sx:{mt:2,mb:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0,display:"flex",justifyContent:"space-between"},r().createElement("span",null,"Upload Progress"),r().createElement("span",null,je,"%")),r().createElement(l.LinearProgress,{variant:"determinate",value:je,sx:{height:10,borderRadius:5,mb:1}}),r().createElement(l.Typography,{variant:"caption",color:"textSecondary"},je<100?"Uploading ".concat(De.name,"..."):"Successfully uploaded ".concat(De.name)),Ae.length>1&&r().createElement(l.Box,{sx:{mt:1,display:"flex",alignItems:"center",justifyContent:"space-between"}},r().createElement(l.Typography,{variant:"caption",color:"textSecondary"},"File ",Me+1," of ",Ae.length),r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},Array.from({length:Math.min(Ae.length,5)}).map(((e,t)=>{var n="grey.300";return t<Me?n="success.main":t===Me&&(n=100===je?"success.main":"primary.main"),r().createElement(l.Box,{key:t,sx:{width:8,height:8,borderRadius:"50%",bgcolor:n,mx:.5}})})),Ae.length>5&&r().createElement(l.Typography,{variant:"caption",color:"textSecondary",sx:{ml:1}},"+",Ae.length-5," more")))),r().createElement(l.Box,{sx:{mt:3}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Upload Options"),r().createElement(l.FormControlLabel,{control:r().createElement(l.Checkbox,{checked:Ne.overwriteExisting,onChange:()=>_e((e=>k(k({},e),{},{overwriteExisting:!e.overwriteExisting}))),name:"overwriteExisting"}),label:"Overwrite if file already exists"}),r().createElement(l.FormControlLabel,{control:r().createElement(l.Checkbox,{checked:Ne.makePublic,onChange:()=>_e((e=>k(k({},e),{},{makePublic:!e.makePublic}))),name:"makePublic"}),label:"Make file publicly accessible"}),Ae.length>1&&r().createElement(l.Box,{sx:{mt:2,p:1,bgcolor:"info.lightest",borderRadius:1}},r().createElement(l.Typography,{variant:"body2",gutterBottom:!0,sx:{fontWeight:"medium",color:"info.main",display:"flex",alignItems:"center"}},r().createElement(u.Info,{fontSize:"small",sx:{mr:.5}}),"Batch Upload Information"),r().createElement(l.Typography,{variant:"body2"},Ae.length," files selected for upload (",D(Ae.reduce(((e,t)=>e+t.size),0)),")"),r().createElement(l.Button,{size:"small",variant:"text",color:"primary",onClick:()=>{ze([]),Oe(null)},sx:{mt:1},startIcon:r().createElement(u.Close,{fontSize:"small"})},"Clear Batch Selection"))))),r().createElement(l.DialogActions,{sx:{px:3,py:2}},r().createElement(l.Button,{onClick:()=>{Pe(!1),Oe(null),Re(0)},disabled:N},"Cancel"),r().createElement(l.Button,{onClick:ht,variant:"contained",color:"primary",disabled:N||!De||je>0,startIcon:N?r().createElement(l.CircularProgress,{size:20}):r().createElement(u.CloudUpload,null)},N?"Uploading...":Ae.length>1?"Upload ".concat(Ae.length," Files"):"Upload File"))),r().createElement(l.Dialog,{open:qe,onClose:()=>Ue(!1),fullWidth:!0,maxWidth:"lg"},r().createElement(l.DialogContent,{dividers:!0,sx:{p:0}},((e,t)=>{var a=n(345).Z,l=Ge?{name:xt(Ge.key,Ge.type),type:t,size:Ge.size||0,lastModified:Ge.lastModified}:null,o="text/plain"===t||"text/csv"===t||"application/json"===t||"application/xml"===t||"text/xml"===t?"text/plain"===t?"This is a simulated preview of a plain text file.\n\nFilename: ".concat(Ge.key,"\nSize: ").concat(D(Ge.size||0),"\nLast Modified: ").concat(O(Ge.lastModified),"\n\nIn a production environment, this would fetch the actual file content from the S3 bucket."):"text/csv"===t?'id,name,email,department\n1,"John Smith",john.smith@example.com,Marketing\n2,"Jane Doe",jane.doe@example.com,Engineering\n3,"Robert Johnson",robert.johnson@example.com,Finance\n4,"Sarah Williams",sarah.williams@example.com,Human Resources\n5,"Michael Brown",michael.brown@example.com,Sales':"application/json"===t?JSON.stringify({id:12345,name:"Sample JSON Data",items:[{id:1,value:"First item"},{id:2,value:"Second item"},{id:3,value:"Third item"}],metadata:{created:(new Date).toISOString(),version:"1.0.0",source:"S3 Object"}},null,2):"application/xml"===t||"text/xml"===t?'<?xml version="1.0" encoding="UTF-8"?>\n<root>\n  <item id="1">\n    <n>First Item</n>\n    <value>100</value>\n  </item>\n  <item id="2">\n    <n>Second Item</n>\n    <value>200</value>\n  </item>\n  <metadata>\n    <created>'.concat((new Date).toISOString(),"</created>\n    <source>S3 Object</source>\n  </metadata>\n</root>"):"This is a simulated preview of content type: ".concat(t,"\n\nIn a production environment, this would display the actual file content."):null;return r().createElement(a,{file:l,url:e,content:o,mimeType:t,filename:null===l||void 0===l?void 0:l.name,onDownload:()=>ft(Ge),maxHeight:"600px",fullWidth:!0})})(He,Ze)),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:()=>Ue(!1)},"Close"),Ge&&"file"===Ge.type&&r().createElement(r().Fragment,null,r().createElement(l.Button,{onClick:()=>{ft(Ge)},startIcon:r().createElement(u.Download,null)},"Download"),r().createElement(l.Button,{onClick:()=>{c({bucketName:m,prefix:M,key:Ge.key,size:Ge.size,lastModified:Ge.lastModified,contentType:Ge.contentType}),Ue(!1)},variant:"contained",color:"primary",startIcon:r().createElement(u.CheckCircle,null)},"Select This File")))))};F.propTypes={config:d().object.isRequired,onSelectBucket:d().func.isRequired,onSelectObject:d().func.isRequired,readOnly:d().bool,selectedBucket:d().string,selectedPrefix:d().string};const j=F;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=e=>{var{onChange:t,value:o,readOnly:c=!1}=e,[s,m]=(0,a.useState)({credentials:null,region:"us-east-1",bucket:"",path:"",selectedObject:null}),[d,p]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[b,v]=(0,a.useState)(null);(0,a.useEffect)((()=>{o&&m((e=>N(N({},e),o)))}),[o]);var x,C=(0,a.useCallback)((e=>{m((n=>{var a=N(N({},n),{},{credentials:e,region:(null===e||void 0===e?void 0:e.region)||n.region});return t&&t(a),a})),e&&p(!0)}),[t]),T=(0,a.useCallback)((e=>{m((n=>{var a=N(N({},n),{},{bucket:e,path:"",selectedObject:null});return t&&t(a),a}))}),[t]),w=(0,a.useCallback)((e=>{m((n=>{var a=N(N({},n),{},{bucket:e.bucketName,path:e.key,selectedObject:e});return t&&t(a),a}))}),[t]),k=(0,a.useCallback)(i()((function*(){if(s.credentials&&s.bucket){y(!0),v(null),f(null);try{if(yield new Promise((e=>setTimeout(e,1500))),Math.random()>.2)f({success:!0,message:"Successfully connected to S3 bucket",details:{bucket:s.bucket,region:s.region,objectsCount:Math.floor(100*Math.random())+1,lastAccessed:(new Date).toISOString()}});else{var e=["Access Denied","Bucket Not Found","Network Error","Configuration Error"],t=e[Math.floor(Math.random()*e.length)];f({success:!1,message:"Failed to connect to S3 bucket: ".concat(t),details:{error:t,code:"S3Error".concat(t.replace(/\s/g,""))}}),v("Failed to connect to S3 bucket: ".concat(t))}}catch(n){console.error("Error testing S3 connection:",n),v(n.message||"An unexpected error occurred during connection test"),f({success:!1,message:"Connection test failed",details:{error:n.message}})}finally{y(!1)}}else v("Credentials and bucket are required to test connection")})),[s.bucket,s.credentials,s.region]),I={region:s.region,credentials:s.credentials};return r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Amazon S3 Configuration"),r().createElement(l.Alert,{severity:"info",sx:{mb:3}},"Configure connection to Amazon S3 for accessing and using S3 objects as data sources. First, set up your AWS credentials, then browse and select a bucket or specific object."),r().createElement(l.Accordion,{defaultExpanded:!0},r().createElement(l.AccordionSummary,{expandIcon:r().createElement(u.ExpandMore,null),"aria-controls":"credentials-content",id:"credentials-header"},r().createElement(l.Typography,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Storage,{sx:{mr:1}}),"Step 1: Configure AWS Credentials")),r().createElement(l.AccordionDetails,null,r().createElement(E,{onCredentialsSaved:C,onCredentialsLoaded:C,readOnly:c,showSaveControls:!0,initialVisible:!0}))),r().createElement(l.Accordion,{expanded:d,onChange:()=>p(!d),disabled:!s.credentials},r().createElement(l.AccordionSummary,{expandIcon:r().createElement(u.ExpandMore,null),"aria-controls":"browser-content",id:"browser-header"},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",mr:2}},r().createElement(l.Typography,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.InsertDriveFile,{sx:{mr:1}}),"Step 2: Select S3 Bucket or Object"),s.bucket&&r().createElement(l.Chip,{label:s.bucket,color:"primary",size:"small",variant:"outlined",onClick:e=>{e.stopPropagation(),p(!0)}}))),r().createElement(l.AccordionDetails,null,s.credentials?r().createElement(j,{config:I,onSelectBucket:T,onSelectObject:w,readOnly:c,selectedBucket:s.bucket,selectedPrefix:s.path?s.path.substring(0,s.path.lastIndexOf("/")+1):""}):r().createElement(l.Alert,{severity:"warning"},"You need to configure and save AWS credentials first."))),r().createElement(l.Card,{variant:"outlined",sx:{mt:3}},r().createElement(l.CardHeader,{title:"Configuration Summary",action:r().createElement(l.Button,{variant:"outlined",color:"primary",disabled:!s.credentials||!s.bucket||g||c,onClick:k,startIcon:g?r().createElement(l.CircularProgress,{size:20}):r().createElement(u.Refresh,null),size:"small"},"Test Connection")}),r().createElement(l.Divider,null),r().createElement(l.CardContent,null,r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"AWS Region"),r().createElement(l.Typography,{variant:"body2"},s.region||"Not configured")),r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"S3 Bucket"),r().createElement(l.Typography,{variant:"body2"},s.bucket||"No bucket selected")),r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Object Path"),r().createElement(l.Typography,{variant:"body2"},s.path||"No specific object selected")),r().createElement(l.Box,{sx:{mb:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Credentials Status"),r().createElement(l.Chip,{label:s.credentials?"Configured":"Not Configured",color:s.credentials?"success":"default",size:"small",icon:s.credentials?r().createElement(u.CheckCircle,null):r().createElement(u.Info,null)}))),r().createElement(l.Grid,{item:!0,xs:12,md:6},s.selectedObject&&r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Selected Object"),r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},(()=>{var e=n(829).Z,t={name:s.selectedObject.key.split("/").pop(),type:s.selectedObject.contentType||"",size:s.selectedObject.size||0,lastModified:s.selectedObject.lastModified||(new Date).toISOString()},a=(0,S.generateFileMetadata)(t);return r().createElement(e,{file:t,metadata:a,showPreview:!1,variant:"outlined"})})())),h&&r().createElement(l.Box,{sx:{mt:2}},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Connection Test Result"),r().createElement(l.Alert,{severity:h.success?"success":"error",icon:h.success?r().createElement(u.CloudDone,null):r().createElement(u.Error,null)},r().createElement(l.Typography,{variant:"body2"},h.message),h.details&&h.success&&r().createElement(l.Box,{sx:{mt:1,fontSize:"0.875rem"}},r().createElement(l.Typography,{variant:"body2",component:"div"},r().createElement("strong",null,"Bucket:")," ",h.details.bucket),r().createElement(l.Typography,{variant:"body2",component:"div"},r().createElement("strong",null,"Region:")," ",h.details.region),r().createElement(l.Typography,{variant:"body2",component:"div"},r().createElement("strong",null,"Objects:")," ",h.details.objectsCount),r().createElement(l.Typography,{variant:"body2",component:"div"},r().createElement("strong",null,"Last Accessed:")," ",(x=h.details.lastAccessed)?new Date(x).toLocaleString():"Unknown")))))),b&&r().createElement(l.Alert,{severity:"error",sx:{mt:2}},b))))};_.propTypes={onChange:d().func,value:d().object,readOnly:d().bool};const L=_;const W=()=>{var[e,t]=(0,a.useState)({credentials:null,region:"us-east-1",bucket:"",path:"",selectedObject:null}),[n,o]=(0,a.useState)(!1);return r().createElement(l.Container,{maxWidth:"lg",sx:{my:4}},r().createElement(l.Paper,{sx:{p:3}},r().createElement(l.Typography,{variant:"h4",gutterBottom:!0},"S3 Configuration Component Test"),r().createElement(l.Typography,{variant:"body1",color:"text.secondary",paragraph:!0},"This page allows testing the S3Configuration component in isolation."),r().createElement(l.Box,{sx:{mb:3,display:"flex",justifyContent:"flex-end"}},r().createElement(l.FormControlLabel,{control:r().createElement(l.Switch,{checked:n,onChange:()=>{o(!n)},name:"readOnly"}),label:"Read-only mode"})),r().createElement(l.Divider,{sx:{mb:3}}),r().createElement(L,{onChange:e=>{console.log("Configuration changed:",e),t(e)},value:e,readOnly:n}),r().createElement(l.Divider,{sx:{my:3}}),r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Current Configuration:"),r().createElement(l.Paper,{variant:"outlined",sx:{p:2,bgcolor:"background.default"}},r().createElement("pre",{style:{margin:0,overflow:"auto"}},JSON.stringify(e,null,2)))))}},960:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(689),r=n.n(a),l=n(692),o=n(591),i=n.n(o),c=n(779),s=n.n(c),m=n(580),d=n.n(m),u=n(915);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=e=>{var{credentials:t={},onChange:n=()=>{},onTest:o=()=>{},testResults:i=null,loading:c=!1,disabled:s=!1}=e,[m,d]=(0,a.useState)((null===t||void 0===t?void 0:t.authMethod)||"oauth"),[p,y]=(0,a.useState)((null===t||void 0===t?void 0:t.tenantId)||""),[h,f]=(0,a.useState)((null===t||void 0===t?void 0:t.clientId)||""),[E,b]=(0,a.useState)((null===t||void 0===t?void 0:t.clientSecret)||""),[v,x]=(0,a.useState)(!1),[C,T]=(0,a.useState)((null===t||void 0===t?void 0:t.appId)||""),[S,w]=(0,a.useState)((null===t||void 0===t?void 0:t.appSecret)||""),[k,I]=(0,a.useState)(!1),[B,P]=(0,a.useState)((null===t||void 0===t?void 0:t.certificateThumbprint)||""),[D,O]=(0,a.useState)((null===t||void 0===t?void 0:t.certificatePrivateKey)||""),[A,z]=(0,a.useState)(!1),[M,F]=(0,a.useState)((null===t||void 0===t?void 0:t.resourceUrl)||"https://graph.microsoft.com"),[j,R]=(0,a.useState)(!1),[N,_]=(0,a.useState)(null);(0,a.useEffect)((()=>{var e={};"oauth"===m?e={tenantId:p,clientId:h,clientSecret:E}:"app"===m?e={tenantId:p,appId:C,appSecret:S}:"certificate"===m&&(e={tenantId:p,clientId:h,certificateThumbprint:B,certificatePrivateKey:D}),p&&n(g(g({},{authMethod:m,resourceUrl:M}),e))}),[m,p,h,E,C,S,B,D,M,n]);var L=(0,a.useCallback)((()=>{_(null),o()}),[o]);(0,a.useCallback)((()=>{_("Test credentials can only be generated in development environment")}),[m]);return r().createElement(l.Card,{variant:"outlined"},r().createElement(l.CardContent,null,r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"SharePoint Connection Credentials"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Configure Microsoft SharePoint credentials using the Microsoft Graph API for secure access to sites and document libraries."),r().createElement(l.FormControl,{component:"fieldset",sx:{mb:3},disabled:s||c},r().createElement(l.Typography,{variant:"subtitle2",gutterBottom:!0},"Authentication Method"),r().createElement(l.RadioGroup,{name:"auth-method",value:m,onChange:e=>{d(e.target.value)},row:!0},r().createElement(l.FormControlLabel,{value:"oauth",control:r().createElement(l.Radio,null),label:r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.AccountCircle,{fontSize:"small",sx:{mr:.5}}),r().createElement(l.Typography,{variant:"body2"},"OAuth 2.0"))}),r().createElement(l.FormControlLabel,{value:"app",control:r().createElement(l.Radio,null),label:r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Apps,{fontSize:"small",sx:{mr:.5}}),r().createElement(l.Typography,{variant:"body2"},"App-only authentication"))}),r().createElement(l.FormControlLabel,{value:"certificate",control:r().createElement(l.Radio,null),label:r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Security,{fontSize:"small",sx:{mr:.5}}),r().createElement(l.Typography,{variant:"body2"},"Certificate-based"))}))),r().createElement(l.Divider,{sx:{my:2}}),r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.TextField,{id:"tenant-id",label:"Tenant ID or Domain",fullWidth:!0,value:p,onChange:e=>y(e.target.value),disabled:s||c,required:!0,variant:"outlined",placeholder:"contoso.onmicrosoft.com",helperText:"Enter your Microsoft 365 tenant ID or domain name",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Link,{fontSize:"small"}))}}))),"oauth"===m&&r().createElement(l.Grid,{container:!0,spacing:2,sx:{mt:1}},r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.TextField,{id:"client-id",label:"Application (client) ID",fullWidth:!0,value:h,onChange:e=>f(e.target.value),disabled:s||c,required:!0,variant:"outlined",placeholder:"12345678-1234-1234-1234-123456789012",helperText:"Client ID from Azure App Registration",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Apps,{fontSize:"small"}))}})),r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.FormControl,{variant:"outlined",fullWidth:!0,required:!0},r().createElement(l.InputLabel,{htmlFor:"client-secret"},"Client Secret"),r().createElement(l.OutlinedInput,{id:"client-secret",type:v?"text":"password",value:E,onChange:e=>b(e.target.value),disabled:s||c,placeholder:"Enter client secret",startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Key,{fontSize:"small"})),endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.IconButton,{"aria-label":"toggle secret visibility",onClick:()=>x(!v),edge:"end"},v?r().createElement(u.VisibilityOff,null):r().createElement(u.Visibility,null))),label:"Client Secret"}),r().createElement(l.FormHelperText,null,"Secret value from Azure App Registration")))),"app"===m&&r().createElement(l.Grid,{container:!0,spacing:2,sx:{mt:1}},r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.TextField,{id:"app-id",label:"App ID",fullWidth:!0,value:C,onChange:e=>T(e.target.value),disabled:s||c,required:!0,variant:"outlined",placeholder:"87654321-4321-4321-4321-210987654321",helperText:"Application ID from Azure App Registration",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Apps,{fontSize:"small"}))}})),r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.FormControl,{variant:"outlined",fullWidth:!0,required:!0},r().createElement(l.InputLabel,{htmlFor:"app-secret"},"App Secret"),r().createElement(l.OutlinedInput,{id:"app-secret",type:k?"text":"password",value:S,onChange:e=>w(e.target.value),disabled:s||c,placeholder:"Enter app secret",startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Key,{fontSize:"small"})),endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.IconButton,{"aria-label":"toggle secret visibility",onClick:()=>I(!k),edge:"end"},k?r().createElement(u.VisibilityOff,null):r().createElement(u.Visibility,null))),label:"App Secret"}),r().createElement(l.FormHelperText,null,"App secret value from Azure App Registration")))),"certificate"===m&&r().createElement(l.Grid,{container:!0,spacing:2,sx:{mt:1}},r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.TextField,{id:"client-id-cert",label:"Application (client) ID",fullWidth:!0,value:h,onChange:e=>f(e.target.value),disabled:s||c,required:!0,variant:"outlined",placeholder:"12345678-1234-1234-1234-123456789012",helperText:"Client ID from Azure App Registration",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Apps,{fontSize:"small"}))}})),r().createElement(l.Grid,{item:!0,xs:12,md:6},r().createElement(l.TextField,{id:"certificate-thumbprint",label:"Certificate Thumbprint",fullWidth:!0,value:B,onChange:e=>P(e.target.value),disabled:s||c,required:!0,variant:"outlined",placeholder:"1234567890ABCDEF1234567890ABCDEF12345678",helperText:"Thumbprint of the certificate registered in Azure AD",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.VerifiedUser,{fontSize:"small"}))}})),r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.FormControl,{variant:"outlined",fullWidth:!0,required:!0},r().createElement(l.InputLabel,{htmlFor:"certificate-private-key"},"Certificate Private Key"),r().createElement(l.OutlinedInput,{id:"certificate-private-key",type:A?"text":"password",value:D,onChange:e=>O(e.target.value),disabled:s||c,placeholder:"-----BEGIN PRIVATE KEY-----...",multiline:!0,rows:3,startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Key,{fontSize:"small"})),endAdornment:r().createElement(l.InputAdornment,{position:"end"},r().createElement(l.IconButton,{"aria-label":"toggle private key visibility",onClick:()=>z(!A),edge:"end"},A?r().createElement(u.VisibilityOff,null):r().createElement(u.Visibility,null))),label:"Certificate Private Key"}),r().createElement(l.FormHelperText,null,"Private key in PEM format")))),r().createElement(l.Box,{sx:{mt:3}},r().createElement(l.Button,{startIcon:r().createElement(u.Settings,null),onClick:()=>R(!j),size:"small",color:"primary",disabled:s||c},j?"Hide Advanced Options":"Show Advanced Options"),r().createElement(l.Collapse,{in:j},r().createElement(l.Paper,{variant:"outlined",sx:{p:2,mt:2}},r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.TextField,{id:"resource-url",label:"Resource URL",fullWidth:!0,value:M,onChange:e=>F(e.target.value),disabled:s||c,variant:"outlined",placeholder:"https://graph.microsoft.com",helperText:"The Microsoft Graph API endpoint (default: https://graph.microsoft.com)",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Link,{fontSize:"small"}))}})),!1)))),N&&r().createElement(l.Alert,{severity:"error",sx:{mt:2}},r().createElement(l.AlertTitle,null,"Error"),N),i&&r().createElement(l.Alert,{severity:"success"===i.status?"success":"error",sx:{mt:2}},r().createElement(l.AlertTitle,null,"success"===i.status?"Connection Successful":"Connection Failed"),i.message,i.details&&r().createElement(l.Box,{sx:{mt:1}},r().createElement(l.Typography,{variant:"body2",fontWeight:"bold"},"Details:"),r().createElement(l.Box,{component:"pre",sx:{mt:1,p:1,bgcolor:"background.paper",borderRadius:1,fontSize:"0.75rem",maxHeight:"150px",overflow:"auto"}},"string"===typeof i.details?i.details:JSON.stringify(i.details,null,2))))),r().createElement(l.CardActions,{sx:{p:2,pt:0}},r().createElement(l.Button,{variant:"contained",color:"primary",onClick:L,disabled:s||c||!p||"oauth"===m&&(!h||!E)||"app"===m&&(!C||!S)||"certificate"===m&&(!h||!B||!D),startIcon:c?r().createElement(l.CircularProgress,{size:20}):r().createElement(u.VerifiedUser,null)},c?"Testing Connection...":"Test Connection"),r().createElement(l.Tooltip,{title:"Information about required permissions"},r().createElement(l.IconButton,{color:"info","aria-label":"help",onClick:()=>{window.open("https://docs.microsoft.com/en-us/graph/permissions-reference","_blank")}},r().createElement(u.InfoOutlined,null)))))};y.propTypes={credentials:d().shape({authMethod:d().string,tenantId:d().string,clientId:d().string,clientSecret:d().string,appId:d().string,appSecret:d().string,certificateThumbprint:d().string,certificatePrivateKey:d().string,resourceUrl:d().string}),onChange:d().func,onTest:d().func,testResults:d().shape({status:d().string,message:d().string,details:d().any}),loading:d().bool,disabled:d().bool};const h=y;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=e=>{var{credentials:t,onSelectSite:n,onSelectLibrary:o,onSelectFolder:c,onSelectFile:s,readOnly:m=!1,selectedSite:d="",selectedLibrary:p="",selectedFolder:g=""}=e,[y,h]=(0,a.useState)([]),[f,b]=(0,a.useState)([]),[v,x]=(0,a.useState)([]),[C,T]=(0,a.useState)([]),[S,w]=(0,a.useState)(!1),[k,I]=(0,a.useState)(null),[B,P]=(0,a.useState)("sites"),[D,O]=(0,a.useState)("list"),[A,z]=(0,a.useState)("name"),[M,F]=(0,a.useState)("asc"),[j,R]=(0,a.useState)(null),[N,_]=(0,a.useState)(null),[L,W]=(0,a.useState)({top:0,left:0}),[G,V]=(0,a.useState)(null),[q,U]=(0,a.useState)(!1),[H,K]=(0,a.useState)(""),[Z,J]=(0,a.useState)({template:"",owner:"",siteCollection:"",createdAfter:null,createdBefore:null,modifiedAfter:null,modifiedBefore:null,favoritesOnly:!1}),[X,Y]=(0,a.useState)(!1),[Q,$]=(0,a.useState)([]),[ee,te]=(0,a.useState)([]),[ne,ae]=(0,a.useState)({}),[re,le]=(0,a.useState)(null),[oe,ie]=(0,a.useState)([]),[ce,se]=(0,a.useState)(!1),[me,de]=(0,a.useState)(!1),[ue,pe]=(0,a.useState)(!1),[ge,ye]=(0,a.useState)([]),[he,fe]=(0,a.useState)(null),[Ee,be]=(0,a.useState)(0),[ve,xe]=(0,a.useState)(!1),[Ce,Te]=(0,a.useState)(!1),[Se,we]=(0,a.useState)({success:[],failed:[],skipped:[],total:0}),[ke,Ie]=(0,a.useState)(""),[Be,Pe]=(0,a.useState)([]),[De,Oe]=(0,a.useState)(!1),[Ae,ze]=(0,a.useState)({title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},severity:"warning"}),[Me,Fe]=(0,a.useState)({fileTypes:[],metadata:{},dateRange:{start:null,end:null},sizeRange:{min:null,max:null},author:""}),[je,Re]=(0,a.useState)([]),[Ne,_e]=(0,a.useState)(!1),[Le,We]=(0,a.useState)(0),[Ge,Ve]=(0,a.useState)(10),qe=(0,a.useCallback)((e=>{Fe(e);var t=e.fileTypes.length>0||Object.values(e.metadata).some((e=>!!e))||e.dateRange.start||e.dateRange.end||null!==e.sizeRange.min||null!==e.sizeRange.max||e.author;if(_e(t),t){var n=v.filter((t=>{if(e.fileTypes.length>0)if(t.isFolder){if(e.fileTypes.length===Object.keys(e).filter((t=>!!e[t]&&(!Array.isArray(e[t])||e[t].length>0))).length)return!0}else if(t.contentType){var n=t.contentType.split("/").pop();if(!e.fileTypes.includes(n))return!1}else if(!t.isFolder)return!1;if(Object.keys(e.metadata).length>0)for(var[a,r]of Object.entries(e.metadata))if(r&&(!t.metadata||!t.metadata[a]||!t.metadata[a].toLowerCase().includes(r.toLowerCase())))return!1;if(e.dateRange.start||e.dateRange.end){var l=new Date(t.lastModified);if(e.dateRange.start)if(l<new Date(e.dateRange.start))return!1;if(e.dateRange.end){var o=new Date(e.dateRange.end);if(o.setHours(23,59,59,999),l>o)return!1}}if(!t.isFolder&&(null!==e.sizeRange.min||null!==e.sizeRange.max)){if(null!==e.sizeRange.min&&t.size<e.sizeRange.min)return!1;if(null!==e.sizeRange.max&&t.size>e.sizeRange.max)return!1}return!e.author||t.createdBy===e.author||t.modifiedBy===e.author}));Re(n)}else Re([])}),[v]),[Ue,He]=(0,a.useState)(!1),[Ke,Ze]=(0,a.useState)(null),[Je,Xe]=(0,a.useState)({open:!1,message:"",severity:"info"}),[Ye,Qe]=(0,a.useState)(!1),[$e,et]=(0,a.useState)(!1),[tt,nt]=(0,a.useState)(0),[at,rt]=(0,a.useState)(!1),[lt,ot]=(0,a.useState)(null),it=((0,a.useRef)(null),(0,a.useRef)(null),(0,a.useRef)(null));(0,a.useEffect)((()=>()=>{it.current&&it.current.abort()}),[]);var ct=(0,a.useCallback)((()=>{if(!H.trim()&&!Object.values(Z).some((e=>""!==e&&null!==e&&!1!==e)))return Y(!1),void $([]);Y(!0),w(!0),it.current&&it.current.abort(),it.current=new AbortController;var e={term:H.trim().toLowerCase(),view:B,filters:E({},Z)},t=JSON.stringify(e),n=Date.now();if(ne[t]&&ne[t].timestamp&&n-ne[t].timestamp<3e4)return console.log("Using cached search results"),$(ne[t].results),w(!1),void mt(H,Z);var a=re&&n-re<36e5,r=function(){var e=i()((function*(){try{var e=st(H,Z,B,a);ae((a=>E(E({},a),{},{[t]:{results:e,timestamp:n}}))),$(e),le(n),mt(H,Z)}catch(k){"AbortError"===k.name?console.log("Search aborted"):I("Error performing search: "+k.message)}finally{w(!1)}}));return function(){return e.apply(this,arguments)}}();return r(),()=>{it.current&&it.current.abort()}}),[H,Z,B,ne,re]),st=(e,t,n,a)=>{var r=[];return"sites"===n?r=y.filter((t=>{var n;return!e||t.name.toLowerCase().includes(e)||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))||t.url.toLowerCase().includes(e)})):"libraries"===n?r=f.filter((t=>{var n;return!e||t.name.toLowerCase().includes(e)||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))})):"items"===n&&(r=v.filter((t=>!e||t.name.toLowerCase().includes(e)))),r},mt=(0,a.useCallback)(((e,t)=>{if(e.trim()){var n={term:e,filters:t},a=JSON.stringify(n);te((e=>e.some((e=>JSON.stringify(e)===a))?[n,...e.filter((e=>JSON.stringify(e)!==a))].slice(0,10):[n,...e].slice(0,10)))}}),[]),dt=(0,a.useCallback)((()=>{se((e=>(e&&ie([]),!e)))}),[]),ut=(0,a.useCallback)((e=>{ie((t=>t.some((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))}),[]),pt=(0,a.useCallback)((()=>{ie(Ne?je:v)}),[Ne,je,v]),gt=(0,a.useCallback)((()=>{ie([])}),[]),yt=(0,a.useCallback)((()=>{if(0!==oe.length){var e=ht();Pe(e),ye(oe),pe(!0)}else Xe({open:!0,message:"Please select at least one item",severity:"warning"})}),[oe]),ht=(0,a.useCallback)((()=>[{id:"root",name:"Root",path:"/"},{id:"folder1",name:"Documents",path:"/Documents"},{id:"folder2",name:"Shared Files",path:"/Shared Files"},{id:"folder3",name:"Archive",path:"/Archive"},{id:"folder4",name:"Reports",path:"/Reports"}]),[]),ft=(0,a.useCallback)((e=>{fe(e),"copy"===e||"move"===e||("delete"===e?(ze({title:"Confirm Delete",message:"Are you sure you want to delete ".concat(ge.length," item(s)? This cannot be undone."),confirmText:"Delete",cancelText:"Cancel",severity:"error",onConfirm:()=>bt(e)}),Oe(!0),pe(!1)):(bt(e),pe(!1)))}),[ge]),Et=(0,a.useCallback)((e=>{Ie(e),bt(he),pe(!1)}),[he]),bt=(0,a.useCallback)((e=>{be(0),we({success:[],failed:[],skipped:[],total:ge.length}),xe(!0),Te(!0);var t=function(){var e=i()((function*(e,n){if(n>=e.length)xe(!1);else{var a=e[n],r=Math.round((n+1)/e.length*100);try{yield new Promise((e=>setTimeout(e,300)));var l=Math.random()>.1;we(l?e=>E(E({},e),{},{success:[...e.success,a]}):e=>E(E({},e),{},{failed:[...e.failed,a]})),be(r),t(e,n+1)}catch(k){we((e=>E(E({},e),{},{failed:[...e.failed,a]}))),be(r),t(e,n+1)}}}));return function(t,n){return e.apply(this,arguments)}}();t(ge,0)}),[ge]),vt=(0,a.useCallback)((()=>{pe(!1),fe(null),Ie("")}),[]),xt=(0,a.useCallback)((()=>{ve||(Te(!1),Se.success.length>0&&(ie([]),se(!1),Xe({open:!0,message:"Successfully processed ".concat(Se.success.length," of ").concat(Se.total," items"),severity:"success"})))}),[ve,Se]),Ct=(0,a.useCallback)((()=>{Oe(!1)}),[]),Tt=(0,a.useCallback)((()=>{var{onConfirm:e}=Ae;Ct(),e()}),[Ae,Ct]),St=(0,a.useCallback)((()=>{var e=Ne?je:v;if(0===e.length)return r().createElement(l.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4}},Ne?r().createElement(r().Fragment,null,r().createElement(u.FilterList,{sx:{fontSize:50,color:"text.secondary",mb:2}}),r().createElement(l.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0},"No items match the current filters"),r().createElement(l.Button,{startIcon:r().createElement(u.ClearAll,null),onClick:()=>{Fe({fileTypes:[],metadata:{},dateRange:{start:null,end:null},sizeRange:{min:null,max:null},author:""}),_e(!1),Re([])},color:"primary"},"Clear all filters")):r().createElement(r().Fragment,null,r().createElement(u.FolderOpen,{sx:{fontSize:50,color:"text.secondary",mb:2}}),r().createElement(l.Typography,{variant:"h6",color:"text.secondary"},"This folder is empty")));var t=e.slice(Le*Ge,Le*Ge+Ge);return r().createElement(r().Fragment,null,r().createElement(l.TableContainer,{component:l.Paper,elevation:0},r().createElement(l.Table,{"aria-label":"SharePoint items"},r().createElement(l.TableHead,null,r().createElement(l.TableRow,null,ce&&r().createElement(l.TableCell,{padding:"checkbox"},r().createElement(l.Checkbox,{indeterminate:oe.length>0&&oe.length<e.length,checked:oe.length===e.length&&e.length>0,onChange:e=>{e.target.checked?pt():gt()},inputProps:{"aria-label":"select all items"}})),r().createElement(l.TableCell,null,"Name"),r().createElement(l.TableCell,null,"Modified"),r().createElement(l.TableCell,null,"Modified By"),r().createElement(l.TableCell,null,"Size"),r().createElement(l.TableCell,{align:"right"},"Actions"))),r().createElement(l.TableBody,null,t.map((e=>r().createElement(l.TableRow,{key:e.id,hover:!0,selected:oe.some((t=>t.id===e.id)),onClick:()=>{ce?ut(e):e.isFolder?c(e):s(e)},sx:{cursor:"pointer","&.Mui-selected":{backgroundColor:"rgba(25, 118, 210, 0.08)"}}},ce&&r().createElement(l.TableCell,{padding:"checkbox"},r().createElement(l.Checkbox,{checked:oe.some((t=>t.id===e.id)),onChange:t=>{t.stopPropagation(),ut(e)},inputProps:{"aria-labelledby":"enhanced-table-checkbox-".concat(e.id)},onClick:e=>e.stopPropagation()})),r().createElement(l.TableCell,null,r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(l.Box,{sx:{mr:1}},e.isFolder?r().createElement(u.Folder,{color:"primary"}):r().createElement(u.InsertDriveFile,{color:"action"})),r().createElement(l.Box,null,r().createElement(l.Typography,{variant:"body2"},e.name),e.metadata&&Object.keys(e.metadata).length>0&&r().createElement(l.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5}},Object.entries(e.metadata).slice(0,3).map((e=>{var[t,n]=e;return r().createElement(l.Chip,{key:t,label:"".concat(t,": ").concat(n),size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}})})),Object.keys(e.metadata).length>3&&r().createElement(l.Chip,{label:"+".concat(Object.keys(e.metadata).length-3," more"),size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}}))))),r().createElement(l.TableCell,null,new Date(e.lastModified).toLocaleDateString()),r().createElement(l.TableCell,null,e.modifiedBy),r().createElement(l.TableCell,null,e.isFolder?"-":wt(e.size)),r().createElement(l.TableCell,{align:"right"},r().createElement(l.IconButton,{"aria-label":"more options",size:"small",onClick:t=>{t.stopPropagation(),V(e),_(t.currentTarget)}},r().createElement(u.MoreVert,{fontSize:"small"}))))))))),r().createElement(l.TablePagination,{rowsPerPageOptions:[5,10,25,50],component:"div",count:e.length,rowsPerPage:Ge,page:Le,onPageChange:(e,t)=>We(t),onRowsPerPageChange:e=>{Ve(parseInt(e.target.value,10)),We(0)}}))}),[v,Ne,je,Le,Ge,ce,oe,c,s,pt,gt,ut]),wt=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},kt=(0,a.useCallback)((()=>Ne?r().createElement(l.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2,mt:1}},Me.fileTypes.length>0&&r().createElement(l.Chip,{label:"File Types: ".concat(Me.fileTypes.join(", ")),onDelete:()=>{var e=E(E({},Me),{},{fileTypes:[]});qe(e)},color:"primary",variant:"outlined",size:"small"}),Object.entries(Me.metadata).map((e=>{var[t,n]=e;return n&&r().createElement(l.Chip,{key:t,label:"".concat(t,": ").concat(n),onDelete:()=>{var e=E(E({},Me),{},{metadata:E(E({},Me.metadata),{},{[t]:""})});qe(e)},color:"primary",variant:"outlined",size:"small"})})),(Me.dateRange.start||Me.dateRange.end)&&r().createElement(l.Chip,{label:"Date: ".concat(Me.dateRange.start?new Date(Me.dateRange.start).toLocaleDateString():"Any"," - ").concat(Me.dateRange.end?new Date(Me.dateRange.end).toLocaleDateString():"Any"),onDelete:()=>{var e=E(E({},Me),{},{dateRange:{start:null,end:null}});qe(e)},color:"primary",variant:"outlined",size:"small"}),(null!==Me.sizeRange.min||null!==Me.sizeRange.max)&&r().createElement(l.Chip,{label:"Size: ".concat(null!==Me.sizeRange.min?wt(Me.sizeRange.min):"Any"," - ").concat(null!==Me.sizeRange.max?wt(Me.sizeRange.max):"Any"),onDelete:()=>{var e=E(E({},Me),{},{sizeRange:{min:null,max:null}});qe(e)},color:"primary",variant:"outlined",size:"small"}),Me.author&&r().createElement(l.Chip,{label:"Author: ".concat(Me.author),onDelete:()=>{var e=E(E({},Me),{},{author:""});qe(e)},color:"primary",variant:"outlined",size:"small"}),r().createElement(l.Chip,{label:"Clear All",onDelete:()=>{qe({fileTypes:[],metadata:{},dateRange:{start:null,end:null},sizeRange:{min:null,max:null},author:""})},deleteIcon:r().createElement(u.ClearAll,null),color:"secondary",variant:"outlined",size:"small"})):null),[Me,Ne,qe]),It=(0,a.useCallback)((()=>ce?r().createElement(l.Paper,{sx:{position:"sticky",bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:1,zIndex:10,borderTop:"1px solid rgba(0, 0, 0, 0.12)"},elevation:3},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(l.Typography,{variant:"body2",sx:{mr:1}},oe.length," item(s) selected"),r().createElement(l.Button,{size:"small",onClick:gt,sx:{mr:1}},"Clear")),r().createElement(l.Box,null,r().createElement(l.Button,{variant:"contained",color:"primary",startIcon:r().createElement(u.CheckBox,null),onClick:yt,disabled:0===oe.length,size:"small",sx:{mr:1}},"Batch Operations"),r().createElement(l.Button,{variant:"outlined",color:"primary",onClick:dt,size:"small"},"Cancel"))):null),[ce,oe,gt,dt,yt]),Bt=(0,a.useCallback)((()=>r().createElement(l.Dialog,{open:ue,onClose:vt,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"batch-operations-dialog-title"},r().createElement(l.DialogTitle,{id:"batch-operations-dialog-title"},"Batch Operations"),r().createElement(l.DialogContent,null,r().createElement(l.Typography,{variant:"body2",color:"textSecondary",paragraph:!0},"Selected ",ge.length," item(s). Choose an operation to perform on these items."),he?r().createElement(l.Box,{sx:{mt:2}},("copy"===he||"move"===he)&&r().createElement(r().Fragment,null,r().createElement(l.Typography,{variant:"subtitle1",gutterBottom:!0},"Select destination folder:"),r().createElement(l.FormControl,{fullWidth:!0,sx:{mt:2}},r().createElement(l.InputLabel,{id:"destination-folder-label"},"Destination Folder"),r().createElement(l.Select,{labelId:"destination-folder-label",value:ke,onChange:e=>Ie(e.target.value),label:"Destination Folder"},Be.map((e=>r().createElement(l.MenuItem,{key:e.id,value:e.id},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Folder,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,null,e.name),r().createElement(l.Typography,{variant:"caption",color:"textSecondary",sx:{ml:1}},e.path))))))))):r().createElement(l.Grid,{container:!0,spacing:2,sx:{mt:1}},r().createElement(l.Grid,{item:!0,xs:6},r().createElement(l.Card,{sx:{height:"100%",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},onClick:()=>ft("download")},r().createElement(l.CardContent,{sx:{textAlign:"center",pb:1}},r().createElement(u.CloudDownload,{color:"primary",sx:{fontSize:48}}),r().createElement(l.Typography,{variant:"h6",component:"div",sx:{mt:1}},"Download"),r().createElement(l.Typography,{variant:"body2",color:"textSecondary"},"Download selected items as ZIP archive")))),r().createElement(l.Grid,{item:!0,xs:6},r().createElement(l.Card,{sx:{height:"100%",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},onClick:()=>ft("copy")},r().createElement(l.CardContent,{sx:{textAlign:"center",pb:1}},r().createElement(u.ContentCopy,{color:"primary",sx:{fontSize:48}}),r().createElement(l.Typography,{variant:"h6",component:"div",sx:{mt:1}},"Copy"),r().createElement(l.Typography,{variant:"body2",color:"textSecondary"},"Copy to another location in SharePoint")))),r().createElement(l.Grid,{item:!0,xs:6},r().createElement(l.Card,{sx:{height:"100%",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},onClick:()=>ft("move")},r().createElement(l.CardContent,{sx:{textAlign:"center",pb:1}},r().createElement(u.DriveFileMove,{color:"primary",sx:{fontSize:48}}),r().createElement(l.Typography,{variant:"h6",component:"div",sx:{mt:1}},"Move"),r().createElement(l.Typography,{variant:"body2",color:"textSecondary"},"Move to another location in SharePoint")))),r().createElement(l.Grid,{item:!0,xs:6},r().createElement(l.Card,{sx:{height:"100%",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},onClick:()=>ft("delete")},r().createElement(l.CardContent,{sx:{textAlign:"center",pb:1}},r().createElement(u.Delete,{color:"error",sx:{fontSize:48}}),r().createElement(l.Typography,{variant:"h6",component:"div",sx:{mt:1}},"Delete"),r().createElement(l.Typography,{variant:"body2",color:"textSecondary"},"Permanently delete selected items")))))),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:vt},"Cancel"),("copy"===he||"move"===he)&&r().createElement(l.Button,{variant:"contained",color:"primary",onClick:()=>Et(ke),disabled:!ke},"copy"===he?"Copy":"Move")))),[ue,vt,ge,he,ke,Be,ft,Et]),Pt=(0,a.useCallback)((()=>r().createElement(l.Dialog,{open:Ce,onClose:xt,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"batch-progress-dialog-title"},r().createElement(l.DialogTitle,{id:"batch-progress-dialog-title"},ve?"Processing Items...":"Operation Complete"),r().createElement(l.DialogContent,null,ve?r().createElement(l.Box,{sx:{width:"100%"}},r().createElement(l.Typography,{variant:"body2",gutterBottom:!0},"download"===he&&"Downloading files...","copy"===he&&"Copying files...","move"===he&&"Moving files...","delete"===he&&"Deleting files..."),r().createElement(l.LinearProgress,{variant:"determinate",value:Ee,sx:{height:10,borderRadius:5,my:2}}),r().createElement(l.Typography,{variant:"body2",color:"textSecondary",align:"right"},"".concat(Math.round(Ee),"%")),r().createElement(l.Typography,{variant:"body2",color:"textSecondary",sx:{mt:1}},"Processed ",Se.success.length+Se.failed.length," of ",Se.total," items")):r().createElement(l.Box,{sx:{width:"100%"}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",mb:2}},r().createElement(u.CheckCircleOutline,{color:"success",sx:{fontSize:40,mr:2}}),r().createElement(l.Typography,{variant:"h6"},"Operation Complete")),r().createElement(l.Typography,{variant:"body1",gutterBottom:!0},"Summary:"),r().createElement(l.Box,{sx:{mt:2,mb:3}},r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between",mb:1}},r().createElement(l.Typography,{variant:"body2"},"Total items:"),r().createElement(l.Typography,{variant:"body2",fontWeight:"bold"},Se.total)),r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between",mb:1}},r().createElement(l.Typography,{variant:"body2",color:"success.main"},"Successful:"),r().createElement(l.Typography,{variant:"body2",fontWeight:"bold",color:"success.main"},Se.success.length)),r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between",mb:1}},r().createElement(l.Typography,{variant:"body2",color:"error.main"},"Failed:"),r().createElement(l.Typography,{variant:"body2",fontWeight:"bold",color:"error.main"},Se.failed.length)),r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between"}},r().createElement(l.Typography,{variant:"body2",color:"warning.main"},"Skipped:"),r().createElement(l.Typography,{variant:"body2",fontWeight:"bold",color:"warning.main"},Se.skipped.length))),Se.failed.length>0&&r().createElement(l.Alert,{severity:"warning",sx:{mb:2}},Se.failed.length," operation(s) failed. See details below."),Se.failed.length>0&&r().createElement(l.Box,{sx:{mt:2}},r().createElement(l.Typography,{variant:"subtitle2",color:"error",gutterBottom:!0},"Failed Items:"),r().createElement(l.Paper,{variant:"outlined",sx:{maxHeight:150,overflow:"auto",p:1}},Se.failed.map(((e,t)=>r().createElement(l.Box,{key:t,sx:{display:"flex",alignItems:"center",mb:.5}},r().createElement(u.Error,{color:"error",sx:{fontSize:16,mr:1}}),r().createElement(l.Typography,{variant:"body2",noWrap:!0},e.name)))))))),r().createElement(l.DialogActions,null,!ve&&r().createElement(l.Button,{onClick:xt,color:"primary"},"Close"),ve&&r().createElement(l.Button,{onClick:()=>{xe(!1),Te(!1),Xe({open:!0,message:"Operation cancelled",severity:"info"})},color:"secondary"},"Cancel")))),[Ce,xt,ve,Ee,Se,he]),Dt=(0,a.useCallback)((()=>r().createElement(l.Dialog,{open:De,onClose:Ct,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirm-dialog-title"},r().createElement(l.DialogTitle,{id:"confirm-dialog-title"},Ae.title),r().createElement(l.DialogContent,null,r().createElement(l.Alert,{severity:Ae.severity||"warning",sx:{mb:2}},Ae.message)),r().createElement(l.DialogActions,null,r().createElement(l.Button,{onClick:Ct},Ae.cancelText||"Cancel"),r().createElement(l.Button,{variant:"contained",color:"error"===Ae.severity?"error":"primary",onClick:Tt},Ae.confirmText||"Confirm")))),[De,Ct,Ae,Tt]),Ot=(0,a.useCallback)((()=>r().createElement(l.Box,{sx:{display:"flex",alignItems:"center",mb:2}},r().createElement(l.Box,{sx:{flexGrow:1,display:"flex",alignItems:"center"}},r().createElement(l.TextField,{placeholder:"Search...",size:"small",InputProps:{startAdornment:r().createElement(l.InputAdornment,{position:"start"},r().createElement(u.Search,null))},sx:{mr:2,width:300},value:H,onChange:e=>K(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ct()}}),r().createElement(l.IconButton,{onClick:()=>de(!0),color:Ne?"primary":"default",size:"small",sx:{mr:1}},r().createElement(l.Badge,{badgeContent:(Me.fileTypes.length>0?1:0)+(Object.values(Me.metadata).some((e=>!!e))?1:0)+(Me.dateRange.start||Me.dateRange.end?1:0)+(null!==Me.sizeRange.min||null!==Me.sizeRange.max?1:0)+(Me.author?1:0),color:"primary",invisible:!Ne},r().createElement(u.FilterList,null))),r().createElement(l.IconButton,{onClick:e=>{Ze(e.currentTarget),He(!0)},size:"small",sx:{mr:1}},r().createElement(u.Sort,null)),r().createElement(l.IconButton,{onClick:()=>{w(!0),setTimeout((()=>{w(!1)}),500)},size:"small",sx:{mr:1},disabled:S},r().createElement(u.Refresh,null))),r().createElement(l.Box,null,r().createElement(l.Tooltip,{title:"list"===D?"Grid view":"List view"},r().createElement(l.IconButton,{onClick:()=>O("list"===D?"grid":"list"),size:"small",sx:{mr:1}},"list"===D?r().createElement(u.ViewModule,null):r().createElement(u.ViewList,null))),r().createElement(l.Tooltip,{title:ce?"Exit select mode":"Select multiple items"},r().createElement(l.IconButton,{onClick:dt,color:ce?"primary":"default",size:"small",sx:{mr:1}},r().createElement(u.CheckBox,null)))))),[H,ct,D,Ne,ce,Me,S,dt]);return r().createElement(l.Paper,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"}},Ot(),r().createElement(l.Breadcrumbs,{separator:r().createElement(u.NavigateNext,{fontSize:"small"}),"aria-label":"breadcrumb",sx:{mb:2}},C.map(((e,t)=>r().createElement(l.Link,{key:t,component:"button",underline:"hover",color:t===C.length-1?"text.primary":"inherit",onClick:()=>{},sx:{display:"flex",alignItems:"center"}},0===t&&r().createElement(u.Web,{fontSize:"small",sx:{mr:.5}}),1===t&&r().createElement(u.Article,{fontSize:"small",sx:{mr:.5}}),t>1&&r().createElement(u.Folder,{fontSize:"small",sx:{mr:.5}}),e.name)))),kt(),S?r().createElement(l.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1}},r().createElement(l.CircularProgress,null)):k?r().createElement(l.Alert,{severity:"error",sx:{mb:2}},k,r().createElement(l.Button,{size:"small",sx:{ml:2},onClick:()=>I(null)},"Dismiss")):r().createElement(l.Box,{sx:{flexGrow:1,overflow:"auto"}},St()),It(),r().createElement(Bt,null),r().createElement(Pt,null),r().createElement(Dt,null),r().createElement(l.Menu,{open:!!N,anchorEl:N,onClose:()=>_(null)},r().createElement(l.MenuItem,{onClick:()=>{_(null)}},r().createElement(l.ListItemIcon,null,r().createElement(u.Visibility,{fontSize:"small"})),r().createElement(l.ListItemText,null,"View")),r().createElement(l.MenuItem,{onClick:()=>{_(null)}},r().createElement(l.ListItemIcon,null,r().createElement(u.CloudDownload,{fontSize:"small"})),r().createElement(l.ListItemText,null,"Download")),r().createElement(l.Divider,null),r().createElement(l.MenuItem,{onClick:()=>{G&&(ut(G),ce||se(!0)),_(null)}},r().createElement(l.ListItemIcon,null,r().createElement(u.CheckBox,{fontSize:"small"})),r().createElement(l.ListItemText,null,"Select"))),r().createElement(l.Snackbar,{open:Je.open,autoHideDuration:6e3,onClose:()=>Xe((e=>E(E({},e),{},{open:!1}))),anchorOrigin:{vertical:"bottom",horizontal:"right"}},r().createElement(l.Alert,{onClose:()=>Xe((e=>E(E({},e),{},{open:!1}))),severity:Je.severity,variant:"filled",sx:{width:"100%"}},Je.message)))};b.propTypes={credentials:d().object,onSelectSite:d().func,onSelectLibrary:d().func,onSelectFolder:d().func,onSelectFile:d().func,readOnly:d().bool,selectedSite:d().string,selectedLibrary:d().string,selectedFolder:d().string};const v=b;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=e=>{var{value:t={},onChange:n=()=>{},readOnly:o=!1}=e,[c,s]=(0,a.useState)(t.credentials||{}),[m,d]=(0,a.useState)(t.site||null),[p,g]=(0,a.useState)(t.library||null),[y,f]=(0,a.useState)(t.folder||null),[E,b]=(0,a.useState)(t.file||null),[x,T]=(0,a.useState)(0),[w,k]=(0,a.useState)(null),[I,B]=(0,a.useState)(!1),[P,D]=(0,a.useState)(null),[O,A]=(0,a.useState)(!1),z=(0,a.useCallback)((e=>{s(e),n(C(C({},t),{},{credentials:e,site:m,library:p,folder:y,file:E}))}),[n,E,y,p,m,t]),M=(0,a.useCallback)(i()((function*(){B(!0),k(null),D(null);try{console.log("Testing SharePoint credentials:",c);var e=function(){var e=i()((function*(e){var t,n,a=function(){var t=i()((function*(){return new Promise(((t,n)=>{setTimeout((()=>{if("oauth"===e.authMethod){if(!e.tenantId||!e.clientId||!e.clientSecret)return void n(new Error("Missing required OAuth credentials"));t({access_token:"mock_".concat(e.clientId,"_token"),token_type:"Bearer",expires_in:3600,ext_expires_in:3600,scope:"Sites.Read.All"})}else if("app"===e.authMethod){if(!e.tenantId||!e.appId||!e.appSecret)return void n(new Error("Missing required App credentials"));t({access_token:"mock_".concat(e.appId,"_token"),token_type:"Bearer",expires_in:3600,ext_expires_in:3600})}else if("certificate"===e.authMethod){if(!e.tenantId||!e.clientId||!e.certificateThumbprint||!e.certificatePrivateKey)return void n(new Error("Missing required certificate credentials"));t({access_token:"mock_".concat(e.clientId,"_cert_token"),token_type:"Bearer",expires_in:3600,ext_expires_in:3600})}else n(new Error("Invalid authentication method"))}),600)}))}));return function(){return t.apply(this,arguments)}}(),r=function(){var t=i()((function*(t){return new Promise(((t,n)=>{setTimeout((()=>{t({value:[{id:"sample-site-1",displayName:"Test Connection Site",webUrl:"https://".concat(e.tenantId.replace(".onmicrosoft.com",""),".sharepoint.com/sites/test"),siteCollection:{hostname:"".concat(e.tenantId.replace(".onmicrosoft.com",""),".sharepoint.com")}}],"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#sites"})}),500)}))}));return function(e){return t.apply(this,arguments)}}(),l=yield a(),o=yield r(l.access_token);return{status:"success",message:"Successfully connected to SharePoint using ".concat("oauth"===e.authMethod?"OAuth":"app"===e.authMethod?"App-only authentication":"certificate-based authentication"),details:C(C({tenant:e.tenantId},"oauth"===e.authMethod?{clientId:e.clientId,scope:"Sites.Read.All"}:"app"===e.authMethod?{appId:e.appId}:{clientId:e.clientId,thumbprint:e.certificateThumbprint}),{},{resource:e.resourceUrl||"https://graph.microsoft.com",token:{type:l.token_type,expires_in:l.expires_in,scopes:(null===(t=l.scope)||void 0===t?void 0:t.split(" "))||["Sites.Read.All"]},apiTest:{endpoint:"/sites",sitesFound:o.value.length,firstSite:(null===(n=o.value[0])||void 0===n?void 0:n.displayName)||"No sites found"}})}}));return function(t){return e.apply(this,arguments)}}();try{var t=yield e(c);k(t)}catch(n){k({status:"error",message:n.message||"Failed to authenticate with Microsoft Graph API",details:{error:n.message,credentials:{authMethod:c.authMethod,tenantId:c.tenantId,hasClientId:!!c.clientId,hasClientSecret:!!c.clientSecret,hasAppId:!!c.appId,hasAppSecret:!!c.appSecret,hasCertThumbprint:!!c.certificateThumbprint}}})}}catch(a){console.error("Error testing credentials:",a),D(a.message||"An error occurred while testing credentials"),k({status:"error",message:a.message||"Unknown error"})}finally{B(!1)}})),[c]),F=(0,a.useCallback)((e=>{d(e),g(null),f(null),b(null),n(C(C({},t),{},{credentials:c,site:e,library:null,folder:null,file:null}))}),[c,n,t]),j=(0,a.useCallback)((e=>{g(e),f(null),b(null),n(C(C({},t),{},{credentials:c,site:m,library:e,folder:null,file:null}))}),[c,n,m,t]),R=(0,a.useCallback)((e=>{f(e),b(null),n(C(C({},t),{},{credentials:c,site:m,library:p,folder:e,file:null}))}),[c,n,p,m,t]),N=(0,a.useCallback)((e=>{b(e),n(C(C({},t),{},{credentials:c,site:m,library:p,folder:y,file:e}))}),[c,n,y,p,m,t]),_=Boolean(c&&c.tenantId&&("oauth"===c.authMethod&&c.clientId&&c.clientSecret||"app"===c.authMethod&&c.appId&&c.appSecret||"certificate"===c.authMethod&&c.clientId&&c.certificateThumbprint)),L=Boolean(m),W=Boolean(p),G=Boolean(y),V=Boolean(E);return r().createElement(l.Card,{variant:"outlined"},r().createElement(l.CardContent,{sx:{p:2}},r().createElement(l.Typography,{variant:"h5",gutterBottom:!0,sx:{mb:2,display:"flex",alignItems:"center"}},r().createElement(u.Web,{sx:{mr:1}}),"SharePoint Configuration"),r().createElement(l.Typography,{variant:"body2",color:"text.secondary",paragraph:!0},"Configure SharePoint integration using Microsoft Graph API for accessing sites, document libraries, and files."),r().createElement(l.Tabs,{value:x,onChange:(e,t)=>T(t),sx:{borderBottom:1,borderColor:"divider",mb:2}},r().createElement(l.Tab,{label:"Credentials"}),r().createElement(l.Tab,{label:"Browse",disabled:!_||o}),r().createElement(l.Tab,{label:"Selection",disabled:!V&&!G&&!W&&!L})),r().createElement(l.Box,{sx:{display:0===x?"block":"none",mt:2}},r().createElement(h,{credentials:c,onChange:z,onTest:M,testResults:w,loading:I,disabled:o}),r().createElement(l.Button,{sx:{mt:2},variant:"outlined",startIcon:r().createElement(u.Settings,null),onClick:()=>A(!O)},O?"Hide Advanced Options":"Show Advanced Options"),r().createElement(l.Collapse,{in:O},r().createElement(l.Paper,{variant:"outlined",sx:{p:2,mt:2}},r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Advanced Configuration"),r().createElement(l.Grid,{container:!0,spacing:2},r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Alert,{severity:"info"},r().createElement(l.AlertTitle,null,"Microsoft Graph API Usage"),"This component uses the Microsoft Graph API instead of the legacy SharePoint REST API, providing better performance, more capabilities, and improved security. Make sure your app registration has the appropriate permissions.")))))),r().createElement(l.Box,{sx:{display:1===x?"block":"none",mt:2}},_?r().createElement(l.Box,{sx:{height:500}},r().createElement(v,{credentials:c,onSelectSite:F,onSelectLibrary:j,onSelectFolder:R,onSelectFile:N,readOnly:o,selectedSite:(null===m||void 0===m?void 0:m.id)||"",selectedLibrary:(null===p||void 0===p?void 0:p.id)||"",selectedFolder:(null===y||void 0===y?void 0:y.id)||""})):r().createElement(l.Alert,{severity:"warning"},r().createElement(l.AlertTitle,null,"Credentials Required"),"Please configure valid SharePoint credentials in the Credentials tab before browsing.")),r().createElement(l.Box,{sx:{display:2===x?"block":"none",mt:2}},r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Selected Items"),r().createElement(l.Grid,{container:!0,spacing:2},m&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Web,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,{variant:"body1",fontWeight:"medium"},"Site: ",m.name)),m.description&&r().createElement(l.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1}},m.description),r().createElement(l.Typography,{variant:"caption",display:"block",sx:{mt:1}},"URL: ",m.webUrl||m.url))),p&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Article,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,{variant:"body1",fontWeight:"medium"},"Library: ",p.name)),p.description&&r().createElement(l.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1}},p.description),r().createElement(l.Typography,{variant:"caption",display:"block",sx:{mt:1}},"Items: ",p.itemCount||0))),y&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Folder,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,{variant:"body1",fontWeight:"medium"},"Folder: ",y.name)),r().createElement(l.Typography,{variant:"caption",display:"block",sx:{mt:1}},"Path: ",y.webUrl))),E&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Paper,{variant:"outlined",sx:{p:2}},r().createElement(l.Box,{sx:{display:"flex",alignItems:"center"}},r().createElement(u.Description,{color:"primary",sx:{mr:1}}),r().createElement(l.Typography,{variant:"body1",fontWeight:"medium"},"File: ",E.name)),r().createElement(l.Typography,{variant:"body2",sx:{mt:1}},"Type: ",E.contentType||"Unknown"),r().createElement(l.Typography,{variant:"body2",sx:{mt:.5}},"Size: ",S(E.size||0)),r().createElement(l.Typography,{variant:"caption",display:"block",sx:{mt:1}},"URL: ",E.webUrl))),!m&&!p&&!y&&!E&&r().createElement(l.Grid,{item:!0,xs:12},r().createElement(l.Alert,{severity:"info"},"No items selected. Please browse and select SharePoint items.")))),r().createElement(l.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"}},r().createElement(l.Button,{variant:"outlined",color:"secondary",onClick:()=>{d(null),g(null),f(null),b(null),n(C(C({},t),{},{credentials:c,site:null,library:null,folder:null,file:null}))},sx:{mr:1}},"Clear Selection"),r().createElement(l.Button,{variant:"contained",color:"primary",startIcon:r().createElement(u.CloudDone,null),disabled:!_||!V&&!G&&!W&&!L,onClick:()=>{console.log("SharePoint configuration completed:",{credentials:c,site:m,library:p,folder:y,file:E})}},"Confirm Selection")))))},S=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};T.propTypes={value:d().shape({credentials:d().object,site:d().object,library:d().object,folder:d().object,file:d().object}),onChange:d().func,readOnly:d().bool};const w=T;const k=()=>{var[e,t]=(0,a.useState)({credentials:{tenantId:"",authMethod:"oauth",clientId:"",clientSecret:""},site:null,library:null,folder:null,file:null}),[n,o]=(0,a.useState)(!1);return r().createElement(l.Container,{maxWidth:"lg",sx:{py:4}},r().createElement(l.Typography,{variant:"h4",gutterBottom:!0},"SharePoint Configuration Test"),r().createElement(l.Typography,{variant:"body1",paragraph:!0},"This page allows testing of the SharePoint configuration component with Microsoft Graph API integration."),r().createElement(l.Card,{sx:{mb:4}},r().createElement(l.CardContent,null,r().createElement(l.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},r().createElement(l.Typography,{variant:"h6"},"Control Panel"),r().createElement(l.FormControlLabel,{control:r().createElement(l.Switch,{checked:n,onChange:e=>o(e.target.checked)}),label:"Read Only Mode"})),r().createElement(l.Button,{variant:"outlined",color:"secondary",onClick:()=>{t({credentials:{tenantId:"",authMethod:"oauth",clientId:"",clientSecret:""},site:null,library:null,folder:null,file:null})},sx:{mr:2}},"Reset"),r().createElement(l.Button,{variant:"outlined",onClick:()=>{t({credentials:{tenantId:"contoso.onmicrosoft.com",authMethod:"oauth",clientId:"12345678-1234-1234-1234-123456789012",clientSecret:"testsecret"},site:null,library:null,folder:null,file:null})}},"Load Test Data"))),r().createElement(l.Box,{sx:{mb:4}},r().createElement(w,{value:e,onChange:t,readOnly:n})),r().createElement(l.Paper,{variant:"outlined",sx:{p:3}},r().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Current Configuration"),r().createElement(l.Divider,{sx:{my:2}}),r().createElement(l.Typography,{variant:"subtitle2"},"Raw Configuration Object:"),r().createElement(l.Box,{component:"pre",sx:{p:2,mt:2,bgcolor:"background.default",borderRadius:1,overflow:"auto",maxHeight:"400px"}},JSON.stringify(e,null,2))))}},470:(e,t,n)=>{n.d(t,{iE:()=>y,yD:()=>g});var a=n(779),r=n.n(a),l=n(689),o=n.n(l),i=n(580),c=n.n(i);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={integration:{creation:{title:"Integration Creation",content:"Create a new integration by specifying its name, description, and type. An integration defines how data moves between systems."},configuration:{title:"Configuration",content:"Configure your integration with source/destination details, transformation rules, and scheduling options."},schedule:{title:"Scheduling",content:"Set up when your integration should run automatically. Supports one-time, recurring, and event-based schedules."},azureBlob:{title:"Azure Blob Storage",content:"Connect to Azure Blob Storage to use it as a source or destination for your integration data."},fieldMapping:{title:"Field Mapping",content:"Map fields from your source data to your destination schema, with optional transformations."}},transformation:{dataType:{title:"Data Type Conversion",content:"Convert data between different types such as string, number, boolean, date, etc."},textFormat:{title:"Text Formatting",content:"Apply text formatting operations like case conversion, trimming, concatenation, etc."},formulas:{title:"Custom Formulas",content:"Create custom formulas to transform your data using expressions with various functions and operators."}},admin:{users:{title:"User Management",content:"Manage user accounts, roles, and permissions for accessing different parts of the platform."},monitoring:{title:"Monitoring Dashboard",content:"View the status and performance metrics of your integrations, including success rates, execution times, and error logs."}},general:{navigation:{title:"Navigation",content:"Use the navigation menu to access different areas of the platform including integrations, datasets, templates, and admin features."},settings:{title:"Settings",content:"Configure your user preferences, notifications, and account settings."}}},u=[{id:"integration-basics",title:"Integration Basics",description:"Learn the fundamentals of creating and managing integrations",duration:"2",steps:[{content:"Welcome to the Integration Platform! This tour will guide you through the basics of creating and managing integrations.",overlay:!0,pulse:!1},{elementSelector:".integration-list",content:"This is the integration list where you can see all your existing integrations and their status.",overlay:!0,pulse:!0},{elementSelector:".create-integration-button",content:"Click here to create a new integration. This will open a dialog where you can define the basic properties of your integration.",overlay:!0,pulse:!0},{elementSelector:".integration-filters",content:"Use these filters to quickly find specific integrations by status, type, or other properties.",overlay:!0,pulse:!0},{content:"That's the basics of working with integrations! You can now explore more features or take other guided tours to learn more.",overlay:!0,pulse:!1}]},{id:"data-transformation",title:"Data Transformation Tour",description:"Learn how to transform and map data between systems",duration:"3",steps:[{content:"This tour will show you how to transform data between different systems using our transformation nodes.",overlay:!0,pulse:!1},{elementSelector:".transformation-nodes",content:"These are transformation nodes that you can add to your integration flow to modify data as it passes through.",overlay:!0,pulse:!0},{elementSelector:".node-palette",content:"The node palette contains all available transformation types. You can drag and drop them onto your integration flow.",overlay:!0,pulse:!0},{elementSelector:".field-mapping",content:"The field mapping interface allows you to connect source fields to destination fields, with transformations in between.",overlay:!0,pulse:!0},{elementSelector:".formula-editor",content:"The formula editor lets you create custom transformations using expressions with various functions and operators.",overlay:!0,pulse:!0},{content:"Now you know how to transform data in your integrations! You can create complex transformations by combining multiple nodes.",overlay:!0,pulse:!1}]},{id:"scheduling",title:"Integration Scheduling",description:"Learn how to schedule integrations to run automatically",duration:"2",steps:[{content:"This tour will show you how to schedule your integrations to run automatically at specific times or on specific events.",overlay:!0,pulse:!1},{elementSelector:".schedule-configuration",content:"The scheduling tab lets you configure when your integration should run. You can choose from various schedule types.",overlay:!0,pulse:!0},{elementSelector:".schedule-options",content:"Choose from options like on-demand, recurring, or event-based schedules. Each has different configuration options.",overlay:!0,pulse:!0},{elementSelector:".cron-builder",content:"For advanced scheduling, you can use the cron expression builder to create complex schedules with precise timing.",overlay:!0,pulse:!0},{content:"Now you know how to schedule your integrations to run automatically! You can monitor execution results in the history tab.",overlay:!0,pulse:!1}]}],p=(0,l.createContext)(),g=()=>{var e=(0,l.useContext)(p);if(!e)throw new Error("useHelp must be used within a HelpProvider");return e},y=e=>{var{children:t}=e,[n,a]=(0,l.useState)(d),[r,i]=(0,l.useState)(u),[c,s]=(0,l.useState)(null),[g,y]=(0,l.useState)({showHelp:!0,showTours:!0,completedTours:[]});(0,l.useEffect)((()=>{try{var e=localStorage.getItem("tap_help_preferences");e&&y(JSON.parse(e))}catch(t){console.error("Error loading help preferences:",t)}}),[]);var h=(0,l.useCallback)((e=>{try{localStorage.setItem("tap_help_preferences",JSON.stringify(e)),y(e)}catch(t){console.error("Error saving help preferences:",t)}}),[]),f=(0,l.useCallback)((()=>{var e=m(m({},g),{},{showHelp:!g.showHelp});h(e)}),[g,h]),E=(0,l.useCallback)((()=>{var e=m(m({},g),{},{showTours:!g.showTours});h(e)}),[g,h]),b=(0,l.useCallback)((e=>{r.find((t=>t.id===e))&&s(e)}),[r]),v=(0,l.useCallback)((e=>{var t=[...g.completedTours,e],n=m(m({},g),{},{completedTours:t});h(n),s(null)}),[g,h]),x=(0,l.useCallback)(((e,t)=>n[e]&&n[e][t]?n[e][t]:null),[n]),C=(0,l.useCallback)(((e,t,n)=>{a((a=>m(m({},a),{},{[e]:m(m({},a[e]||{}),{},{[t]:n})})))}),[]),T=(0,l.useCallback)((e=>{if(!e.id||!e.title||!e.steps||!Array.isArray(e.steps))throw new Error("Invalid tour configuration");i((t=>{var n=t.findIndex((t=>t.id===e.id));if(n>=0){var a=[...t];return a[n]=e,a}return[...t,e]}))}),[]),S=(0,l.useCallback)((()=>{var e=m(m({},g),{},{completedTours:[]});h(e)}),[g,h]),w={helpContent:n,tours:r,activeTourId:c,helpPreferences:g,getHelpContent:x,addHelpContent:C,addTour:T,startTour:b,toggleHelpVisibility:f,toggleToursVisibility:E,resetTourCompletion:S,handleTourComplete:v};return o().createElement(p.Provider,{value:w},t)};y.propTypes={children:c().node.isRequired}},108:(e,t,n)=>{n.d(t,{JB:()=>o,l4:()=>i,lm:()=>c,uj:()=>l});var a=n(689),r=n.n(a),l=(0,a.createContext)({});function o(e){var{children:t}=e;return r().createElement(i,arguments)}function i(e){var{children:t}=e,[n,o]=(0,a.useState)({});return r().createElement(l.Provider,{value:{state:n,setState:o}},t)}function c(){return(0,a.useContext)(l)}},274:(e,t,n)=>{n.d(t,{aF:()=>c,dr:()=>o});var a=n(689),r=n.n(a),l=(0,a.createContext)({});function o(e){var{children:t}=e;return r().createElement(i,null,t)}function i(e){var{children:t}=e,[n,o]=(0,a.useState)({});return r().createElement(l.Provider,{value:{state:n,setState:o}},t)}function c(){return(0,a.useContext)(l)}},905:(e,t,n)=>{n.d(t,{xu:()=>k,zx:()=>_,Zb:()=>z,T$:()=>F,aY:()=>M,W2:()=>B,rj:()=>P,hU:()=>R,UA:()=>N,Xk:()=>O,Kq:()=>D,OK:()=>W,mQ:()=>G,nv:()=>L,f6:()=>I,u:()=>j,ZT:()=>A});require("@babel/runtime/helpers/objectDestructuringEmpty");var a=n(213),r=n.n(a),l=n(779),o=n.n(l),i=n(838),c=n.n(i),s=["children"],m=["children"],d=["children"],u=["children","direction","spacing"],p=["children"],g=["variant","children"],y=["children"],h=["children"],f=["children"],E=["title","children"],b=["children"],v=["children"],x=["label"],C=["label"],T=["children"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=e=>{var{children:t}=e,n=c()(e,s);return React.createElement("div",n,t)},I=e=>{var{theme:t,children:n}=e;return n},B=e=>{var{children:t}=e,n=c()(e,m);return React.createElement("div",n,t)},P=e=>{var{children:t}=e,n=c()(e,d);return React.createElement("div",n,t)},D=e=>{var{children:t,direction:n="column",spacing:a=0}=e,l=c()(e,u);return React.createElement("div",r()({},l,{style:w({display:"flex",flexDirection:n,gap:"number"===typeof a?"".concat(8*a,"px"):a},l.style)}),t)},O=e=>{var{children:t}=e,n=c()(e,p);return React.createElement("div",r()({},n,{style:w({padding:"16px",border:"1px solid #e0e0e0",borderRadius:"4px"},n.style)}),t)},A=e=>{var{variant:t,children:n}=e,a=c()(e,g),r="h1"===t?"h1":"h2"===t?"h2":"h3"===t?"h3":"h4"===t?"h4":"h5"===t?"h5":"h6"===t?"h6":"p";return React.createElement(r,a,n)},z=e=>{var{children:t}=e,n=c()(e,y);return React.createElement("div",r()({},n,{style:w({border:"1px solid #e0e0e0",borderRadius:"4px"},n.style)}),t)},M=e=>{var{children:t}=e,n=c()(e,h);return React.createElement("div",r()({},n,{style:w({padding:"16px"},n.style)}),t)},F=e=>{var{children:t}=e,n=c()(e,f);return React.createElement("div",r()({},n,{style:w({padding:"8px 16px",display:"flex",justifyContent:"flex-end"},n.style)}),t)},j=e=>{var{title:t,children:n}=e,a=c()(e,E);return React.createElement("div",r()({},a,{title:t}),n)},R=e=>{var{children:t}=e,n=c()(e,b);return React.createElement("button",r()({},n,{style:w({background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%"},n.style)}),t)},N=()=>null,_=e=>{var{children:t}=e,n=c()(e,v);return React.createElement("button",n,t)},L=e=>{var{label:t}=e,n=c()(e,x);return React.createElement("div",null,t&&React.createElement("label",null,t),React.createElement("input",n))},W=e=>{var{label:t}=e,n=c()(e,C);return React.createElement("button",n,t)},G=e=>{var{children:t}=e,n=c()(e,T);return React.createElement("div",n,t)}},990:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(779),r=n.n(a),l=n(689),o=n.n(l),i=n(905),c=n(108);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=()=>{var[e,t]=(0,l.useState)(0),{setState:n}=(0,c.lm)(),[a,r]=(0,l.useState)({host:"smtp.office365.com",port:"587",username:"",password:"",encryption:"STARTTLS",fromAddress:""}),s=e=>t=>{r(m(m({},a),{},{[e]:t.target.value}))};return o().createElement(i.W2,{maxWidth:"lg"},o().createElement(i.xu,{my:4},o().createElement(i.ZT,{variant:"h4",component:"h1",gutterBottom:!0},"Admin Dashboard"),o().createElement(i.Xk,{sx:{mt:3,mb:4}},o().createElement(i.mQ,{value:e,onChange:(e,n)=>{t(n)},"aria-label":"admin tabs"},o().createElement(i.OK,{label:"Users"}),o().createElement(i.OK,{label:"Email Settings"}),o().createElement(i.OK,{label:"Tenants"}),o().createElement(i.OK,{label:"System Settings"})),o().createElement(i.xu,{sx:{p:3}},0===e&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"User Management"),o().createElement(i.ZT,{paragraph:!0},"Manage users, roles, and permissions"),o().createElement(i.xu,{mt:2},o().createElement(i.ZT,{variant:"subtitle1",fontWeight:"bold"},"Admin Users"),o().createElement(i.xu,{mt:1,p:2,border:"1px solid #e0e0e0",borderRadius:1},o().createElement(i.ZT,null,"Username: ai-dev"),o().createElement(i.ZT,null,"Email: ai-dev@example.com"),o().createElement(i.ZT,null,"Role: Administrator")))),1===e&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Email Configuration"),o().createElement(i.ZT,{paragraph:!0},"Configure SMTP settings for sending emails"),o().createElement(i.xu,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:600,mt:2}},o().createElement(i.nv,{label:"SMTP Host",value:a.host,onChange:s("host"),fullWidth:!0,helperText:"e.g., smtp.office365.com"}),o().createElement(i.nv,{label:"SMTP Port",value:a.port,onChange:s("port"),fullWidth:!0,helperText:"e.g., 587 for STARTTLS, 465 for SSL"}),o().createElement(i.nv,{label:"Username",value:a.username,onChange:s("username"),fullWidth:!0,helperText:"Usually your full email address"}),o().createElement(i.nv,{label:"Password",type:"password",value:a.password,onChange:s("password"),fullWidth:!0,helperText:"Your email account password or app password"}),o().createElement(i.nv,{label:"Encryption",value:a.encryption,onChange:s("encryption"),fullWidth:!0,helperText:"STARTTLS or SSL/TLS"}),o().createElement(i.nv,{label:"From Address",value:a.fromAddress,onChange:s("fromAddress"),fullWidth:!0,helperText:"Email address to send from"}),o().createElement(i.xu,{sx:{mt:2}},o().createElement(i.zx,{variant:"contained",color:"primary",onClick:()=>{n({type:"success",message:"SMTP settings saved successfully",open:!0})}},"Save SMTP Settings"),o().createElement(i.zx,{variant:"outlined",sx:{ml:2},onClick:()=>{n({type:"info",message:"Test email sent successfully",open:!0})}},"Test Connection")))),2===e&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Tenant Management"),o().createElement(i.ZT,{paragraph:!0},"Manage tenants and tenant-specific configurations")),3===e&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"System Settings"),o().createElement(i.ZT,{paragraph:!0},"Configure global system settings and defaults"))))))}},270:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(689),r=n.n(a),l=n(905);const o=()=>{var[e,t]=r().useState(0);return r().createElement(l.W2,{maxWidth:"lg"},r().createElement(l.xu,{my:4},r().createElement(l.ZT,{variant:"h4",component:"h1",gutterBottom:!0},"Earnings Management"),r().createElement(l.Xk,{sx:{mb:4}},r().createElement(l.mQ,{value:e,onChange:(e,n)=>{t(n)},"aria-label":"earnings tabs"},r().createElement(l.OK,{label:"Earnings Codes"}),r().createElement(l.OK,{label:"Mappings"}),r().createElement(l.OK,{label:"Employees"})),r().createElement(l.xu,{sx:{p:3}},0===e&&r().createElement(l.xu,null,r().createElement(l.ZT,{variant:"h6",gutterBottom:!0},"Earnings Codes"),r().createElement(l.ZT,{paragraph:!0},"Manage earnings codes and their attributes.")),1===e&&r().createElement(l.xu,null,r().createElement(l.ZT,{variant:"h6",gutterBottom:!0},"Earnings Mappings"),r().createElement(l.ZT,{paragraph:!0},"Configure mappings between source and target systems.")),2===e&&r().createElement(l.xu,null,r().createElement(l.ZT,{variant:"h6",gutterBottom:!0},"Employee Management"),r().createElement(l.ZT,{paragraph:!0},"Manage employee records and assignments."))))))}},987:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(689),r=n.n(a),l=n(661),o=n(905),i=n(274);const c=()=>{var{state:e}=(0,i.aF)();return r().createElement(o.W2,{maxWidth:"lg"},r().createElement(o.xu,{my:4},r().createElement(o.ZT,{variant:"h4",component:"h1",gutterBottom:!0},"Welcome to TAP Integration Platform"),r().createElement(o.ZT,{variant:"subtitle1",gutterBottom:!0},null!==e&&void 0!==e&&e.name?"Hello, ".concat(e.name,"!"):"Hello!"),r().createElement(o.rj,{container:!0,spacing:3,mt:2},r().createElement(o.rj,{item:!0,xs:12,md:4},r().createElement(o.Xk,{sx:{p:3,height:"100%"}},r().createElement(o.ZT,{variant:"h6",gutterBottom:!0},"Integrations"),r().createElement(o.ZT,{variant:"body2",paragraph:!0},"Manage and monitor your data integrations."),r().createElement(l.Link,{to:"/integrations"},"View Integrations"))),r().createElement(o.rj,{item:!0,xs:12,md:4},r().createElement(o.Xk,{sx:{p:3,height:"100%"}},r().createElement(o.ZT,{variant:"h6",gutterBottom:!0},"Earnings"),r().createElement(o.ZT,{variant:"body2",paragraph:!0},"Manage earnings codes and mappings."),r().createElement(l.Link,{to:"/earnings"},"View Earnings"))),r().createElement(o.rj,{item:!0,xs:12,md:4},r().createElement(o.Xk,{sx:{p:3,height:"100%"}},r().createElement(o.ZT,{variant:"h6",gutterBottom:!0},"Admin Tools"),r().createElement(o.ZT,{variant:"body2",paragraph:!0},"Administration and configuration options."),r().createElement(l.Link,{to:"/admin"},"Open Admin Dashboard"))))))}},998:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ft});var a=n(779),r=n.n(a),l=n(689),o=n.n(l),i=n(905),c=n(661),s=n(580),m=n.n(s),d=n(692),u=n(915);const p=require("reactflow");var g=n.n(p),y=n(379),h=n.n(y),f=n(795),E=n.n(f),b=n(569),v=n.n(b),x=n(565),C=n.n(x),T=n(216),S=n.n(T),w=n(589),k=n.n(w),I=n(102),B={};B.styleTagTransform=k(),B.setAttributes=C(),B.insert=v().bind(null,"head"),B.domAPI=E(),B.insertStyleElement=S();h()(I.Z,B);I.Z&&I.Z.locals&&I.Z.locals;var P={S3:{icon:u.Storage,color:"#ff9900",label:"S3"},AZURE_BLOB:{icon:u.Storage,color:"#0078d4",label:"Azure Blob"},SHAREPOINT:{icon:u.Storage,color:"#0078d4",label:"SharePoint"},API:{icon:u.Storage,color:"#4285f4",label:"API"},DATABASE:{icon:u.Storage,color:"#4CAF50",label:"Database"},default:{icon:u.Storage,color:"#757575",label:"Source"}};const D=(0,l.memo)((e=>{var{id:t,data:n,isConnectable:a,selected:r}=e,l=n.sourceType||"default",i=P[l]||P.default,c=i.icon,s=void 0!==n.error,m=n.isConfigured||!1;return o().createElement(d.Paper,{elevation:r?3:1,sx:{minHeight:80,width:200,padding:1,borderRadius:1,borderWidth:2,borderStyle:"solid",borderColor:r?"primary.main":i.color,backgroundColor:"background.paper",position:"relative"}},o().createElement(p.Handle,{type:"source",position:"right",id:"output",style:{right:-8,top:"50%",width:12,height:12,background:i.color,border:"2px solid #fff"},isConnectable:a}),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:1,backgroundColor:i.color,color:"#fff",marginLeft:-1,marginRight:-1,marginTop:-1,padding:.5,borderTopLeftRadius:4,borderTopRightRadius:4}},o().createElement(c,{fontSize:"small",sx:{mr:1}}),o().createElement(d.Typography,{variant:"subtitle2",sx:{flexGrow:1}},i.label),o().createElement(d.Badge,{color:s?"error":"success",variant:"dot",invisible:!m},o().createElement(d.Tooltip,{title:"Configure Source"},o().createElement(d.IconButton,{size:"small",sx:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}},o().createElement(u.Settings,{fontSize:"small"}))))),o().createElement(d.Box,{sx:{p:1}},o().createElement(d.Typography,{variant:"body2",sx:{mb:.5}},n.label||"Data Source"),s?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"error.main"}},o().createElement(u.Error,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"error"},n.error)):m?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"success.main"}},o().createElement(u.Check,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"success.main"},"Configured")):o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},"Click to configure")))}));var O={S3:{icon:u.CloudUpload,color:"#ff9900",label:"S3"},AZURE_BLOB:{icon:u.CloudUpload,color:"#0078d4",label:"Azure Blob"},SHAREPOINT:{icon:u.CloudUpload,color:"#0078d4",label:"SharePoint"},API:{icon:u.Api,color:"#4285f4",label:"API"},DATABASE:{icon:u.Storage,color:"#4CAF50",label:"Database"},default:{icon:u.Storage,color:"#2196f3",label:"Destination"}};const A=(0,l.memo)((e=>{var{id:t,data:n,isConnectable:a,selected:r}=e,l=n.destinationType||"default",i=O[l]||O.default,c=i.icon,s=void 0!==n.error,m=n.isConfigured||!1;return o().createElement(d.Paper,{elevation:r?3:1,sx:{minHeight:80,width:200,padding:1,borderRadius:1,borderWidth:2,borderStyle:"solid",borderColor:r?"primary.main":i.color,backgroundColor:"background.paper",position:"relative"}},o().createElement(p.Handle,{type:"target",position:"left",id:"input",style:{left:-8,top:"50%",width:12,height:12,background:i.color,border:"2px solid #fff"},isConnectable:a}),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:1,backgroundColor:i.color,color:"#fff",marginLeft:-1,marginRight:-1,marginTop:-1,padding:.5,borderTopLeftRadius:4,borderTopRightRadius:4}},o().createElement(c,{fontSize:"small",sx:{mr:1}}),o().createElement(d.Typography,{variant:"subtitle2",sx:{flexGrow:1}},i.label),o().createElement(d.Badge,{color:s?"error":"success",variant:"dot",invisible:!m},o().createElement(d.Tooltip,{title:"Configure Destination"},o().createElement(d.IconButton,{size:"small",sx:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}},o().createElement(u.Settings,{fontSize:"small"}))))),o().createElement(d.Box,{sx:{p:1}},o().createElement(d.Typography,{variant:"body2",sx:{mb:.5}},n.label||"Data Destination"),s?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"error.main"}},o().createElement(u.Error,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"error"},n.error)):m?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"success.main"}},o().createElement(u.Check,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"success.main"},"Configured")):o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},"Click to configure")))}));var z={MAPPING:{icon:u.SwapHoriz,color:"#ff9800",label:"Mapping"},FORMULA:{icon:u.Functions,color:"#ff9800",label:"Formula"},SCRIPT:{icon:u.Code,color:"#ff9800",label:"Script"},AI:{icon:u.AutoAwesome,color:"#ff9800",label:"AI Transform"},default:{icon:u.Transform,color:"#ff9800",label:"Transform"}};const M=(0,l.memo)((e=>{var{id:t,data:n,isConnectable:a,selected:r}=e,l=n.transformationType||"default",i=z[l]||z.default,c=i.icon,s=void 0!==n.error,m=n.isConfigured||!1;return o().createElement(d.Paper,{elevation:r?3:1,sx:{minHeight:80,width:200,padding:1,borderRadius:1,borderWidth:2,borderStyle:"solid",borderColor:r?"primary.main":i.color,backgroundColor:"background.paper",position:"relative"}},o().createElement(p.Handle,{type:"target",position:"left",id:"input",style:{left:-8,top:"50%",width:12,height:12,background:i.color,border:"2px solid #fff"},isConnectable:a}),o().createElement(p.Handle,{type:"source",position:"right",id:"output",style:{right:-8,top:"50%",width:12,height:12,background:i.color,border:"2px solid #fff"},isConnectable:a}),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:1,backgroundColor:i.color,color:"#fff",marginLeft:-1,marginRight:-1,marginTop:-1,padding:.5,borderTopLeftRadius:4,borderTopRightRadius:4}},o().createElement(c,{fontSize:"small",sx:{mr:1}}),o().createElement(d.Typography,{variant:"subtitle2",sx:{flexGrow:1}},i.label),o().createElement(d.Badge,{color:s?"error":"success",variant:"dot",invisible:!m},o().createElement(d.Tooltip,{title:"Configure Transformation"},o().createElement(d.IconButton,{size:"small",sx:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}},o().createElement(u.Settings,{fontSize:"small"}))))),o().createElement(d.Box,{sx:{p:1}},o().createElement(d.Typography,{variant:"body2",sx:{mb:.5}},n.label||"Data Transformation"),n.fields&&n.fields.length>0&&o().createElement(d.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5,my:.5}},o().createElement(d.Chip,{label:"".concat(n.fields.length," field").concat(n.fields.length>1?"s":""),size:"small",variant:"outlined",color:"primary"})),s?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"error.main"}},o().createElement(u.Error,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"error"},n.error)):m?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"success.main"}},o().createElement(u.Check,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"success.main"},"Configured")):o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},"Click to configure")))}));var F={CONDITION:{icon:u.Rule,color:"#9c27b0",label:"Condition"},VALIDATION:{icon:u.Check,color:"#9c27b0",label:"Validation"},SEARCH_REPLACE:{icon:u.FindReplace,color:"#9c27b0",label:"Search & Replace"},LIST_FILTER:{icon:u.FilterList,color:"#9c27b0",label:"List Filter"},default:{icon:u.FilterAlt,color:"#9c27b0",label:"Filter"}};const j=(0,l.memo)((e=>{var t,{id:n,data:a,isConnectable:r,selected:l}=e,i=a.filterType||"default",c=F[i]||F.default,s=c.icon,m=void 0!==a.error,g=a.isConfigured||!1,y=(null===(t=a.conditions)||void 0===t?void 0:t.length)||0;return o().createElement(d.Paper,{elevation:l?3:1,sx:{minHeight:80,width:200,padding:1,borderRadius:1,borderWidth:2,borderStyle:"solid",borderColor:l?"primary.main":c.color,backgroundColor:"background.paper",position:"relative"}},o().createElement(p.Handle,{type:"target",position:"left",id:"input",style:{left:-8,top:"50%",width:12,height:12,background:c.color,border:"2px solid #fff"},isConnectable:r}),o().createElement(p.Handle,{type:"source",position:"right",id:"output",style:{right:-8,top:"50%",width:12,height:12,background:c.color,border:"2px solid #fff"},isConnectable:r}),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:1,backgroundColor:c.color,color:"#fff",marginLeft:-1,marginRight:-1,marginTop:-1,padding:.5,borderTopLeftRadius:4,borderTopRightRadius:4}},o().createElement(s,{fontSize:"small",sx:{mr:1}}),o().createElement(d.Typography,{variant:"subtitle2",sx:{flexGrow:1}},c.label),o().createElement(d.Badge,{color:m?"error":"success",variant:"dot",invisible:!g},o().createElement(d.Tooltip,{title:"Configure Filter"},o().createElement(d.IconButton,{size:"small",sx:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}},o().createElement(u.Settings,{fontSize:"small"}))))),o().createElement(d.Box,{sx:{p:1}},o().createElement(d.Typography,{variant:"body2",sx:{mb:.5}},a.label||"Data Filter"),y>0&&o().createElement(d.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5,my:.5}},o().createElement(d.Chip,{label:"".concat(y," condition").concat(y>1?"s":""),size:"small",variant:"outlined",color:"secondary"})),m?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"error.main"}},o().createElement(u.Error,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"error"},a.error)):g?o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",color:"success.main"}},o().createElement(Check,{fontSize:"small",sx:{mr:.5}}),o().createElement(d.Typography,{variant:"caption",color:"success.main"},"Configured")):o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},"Click to configure")))}));var R=n(591),N=n.n(R);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={DATA:{label:"Data",icon:u.Bolt,description:"Transfers data records between nodes",color:"#2196F3"},CONTROL:{label:"Control",icon:u.SettingsEthernet,description:"Controls execution flow between nodes",color:"#9C27B0"},EVENT:{label:"Event",icon:u.EventNote,description:"Triggers based on events",color:"#FF9800"}},G={"sourceNode-destinationNode":"#4CAF50","sourceNode-transformationNode":"#FF9800","sourceNode-filterNode":"#9C27B0","transformationNode-destinationNode":"#2196F3","transformationNode-transformationNode":"#FF9800","transformationNode-filterNode":"#9C27B0","filterNode-destinationNode":"#2196F3","filterNode-transformationNode":"#FF9800","filterNode-filterNode":"#9C27B0",default:"#666666"},V={HIGH:{label:"High",color:"#f44336"},MEDIUM:{label:"Medium",color:"#ff9800"},LOW:{label:"Low",color:"#4caf50"}},q=(0,l.memo)((e=>{var{anchorEl:t,open:n,onClose:a,onDelete:r,onLabelEdit:l,onPriorityChange:i,onConnectionTypeChange:c,onTest:s,onAddBreakpoint:m,connectionType:p,priority:g}=e;return o().createElement(d.Menu,{anchorEl:t,open:Boolean(t),onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},o().createElement(d.MenuItem,{onClick:l},o().createElement(d.ListItemIcon,null,o().createElement(u.Label,{fontSize:"small"})),o().createElement(d.ListItemText,null,"Edit Label")),o().createElement(d.MenuItem,{onClick:e=>{e.stopPropagation(),e.preventDefault()}},o().createElement(d.ListItemIcon,null,o().createElement(u.TrendingFlat,{fontSize:"small"})),o().createElement(d.ListItemText,null,"Connection Type"),o().createElement(u.ExpandMore,{fontSize:"small"}),o().createElement(d.Menu,{anchorEl:t,open:Boolean(t),onClose:e=>e.stopPropagation(),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},Object.entries(W).map((e=>{var[t,n]=e,a=n.icon;return o().createElement(d.MenuItem,{key:t,onClick:()=>c(t),selected:p===t},o().createElement(d.ListItemIcon,null,o().createElement(a,{fontSize:"small",style:{color:n.color}})),o().createElement(d.ListItemText,null,n.label))})))),o().createElement(d.MenuItem,{onClick:e=>{e.stopPropagation(),e.preventDefault()}},o().createElement(d.ListItemIcon,null,o().createElement(u.PriorityHigh,{fontSize:"small"})),o().createElement(d.ListItemText,null,"Priority"),o().createElement(u.ExpandMore,{fontSize:"small"}),o().createElement(d.Menu,{anchorEl:t,open:Boolean(t),onClose:e=>e.stopPropagation(),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},Object.entries(V).map((e=>{var[t,n]=e;return o().createElement(d.MenuItem,{key:t,onClick:()=>i(t),selected:g===t},o().createElement(d.ListItemIcon,null,o().createElement(d.Box,{component:"span",sx:{width:12,height:12,borderRadius:"50%",backgroundColor:n.color,display:"inline-block"}})),o().createElement(d.ListItemText,null,n.label))})))),o().createElement(d.MenuItem,{onClick:m},o().createElement(d.ListItemIcon,null,o().createElement(u.BugReport,{fontSize:"small"})),o().createElement(d.ListItemText,null,"Add Breakpoint")),o().createElement(d.MenuItem,{onClick:s},o().createElement(d.ListItemIcon,null,o().createElement(u.PlayArrow,{fontSize:"small"})),o().createElement(d.ListItemText,null,"Test Connection")),o().createElement(d.MenuItem,{onClick:r},o().createElement(d.ListItemIcon,null,o().createElement(u.Delete,{fontSize:"small",color:"error"})),o().createElement(d.ListItemText,{primary:"Delete",primaryTypographyProps:{color:"error"}})))})),U=(0,l.memo)((e=>{var t,{id:n,sourceX:a,sourceY:r,targetX:i,targetY:c,sourcePosition:s,targetPosition:m,style:g={},data:y={},arrowHeadType:h,markerEndId:f,selected:E,source:b,target:v,sourceHandleId:x,targetHandleId:C,onClick:T,edgeUpdaterRadius:S}=e,[w,k]=(0,l.useState)(null),[I,B]=(0,l.useState)(!1),[P,D]=(0,l.useState)(!1),[O,A]=(0,l.useState)(null),z=null!==(t=null===y||void 0===y?void 0:y.animated)&&void 0!==t&&t,M=(null===b||void 0===b?void 0:b.split("-")[0])||"unknown",F=(null===v||void 0===v?void 0:v.split("-")[0])||"unknown",j="".concat(M,"-").concat(F),R=null!==y&&void 0!==y&&y.connectionType?W[y.connectionType]:null,_=(null===R||void 0===R?void 0:R.color)||G[j]||G.default,U=null!==y&&void 0!==y&&y.priority?V[y.priority]:null,H=L({stroke:_,strokeWidth:E?3:2},g);"CONTROL"!==(null===y||void 0===y?void 0:y.connectionType)&&"EVENT"!==(null===y||void 0===y?void 0:y.connectionType)||(H.strokeDasharray="5,5"),z&&(H.strokeDasharray="5,5",H.animation="flowAnimation 1s linear infinite");var[K,Z,J]=(0,p.getBezierPath)({sourceX:a,sourceY:r,sourcePosition:s,targetX:i,targetY:c,targetPosition:m}),X=(0,p.getMarkerEnd)(h,f),Y=(a+i)/2,Q=(r+c)/2,$=(null===y||void 0===y?void 0:y.validation)||{},ee=$.hasError||(null===y||void 0===y?void 0:y.error),te=$.hasWarning||(null===y||void 0===y?void 0:y.warning),ne=($.isValid||(null===y||void 0===y||y.validated),$.message||(null===y||void 0===y?void 0:y.message)||(ee?"Invalid connection":te?"Warning":"Valid connection")),ae=(0,l.useCallback)((e=>{e.preventDefault(),k(e.currentTarget)}),[]),re=(0,l.useCallback)((()=>{k(null)}),[]),le=(0,l.useCallback)((()=>{null!==y&&void 0!==y&&y.onDelete&&y.onDelete(n),re()}),[y,n,re]),oe=(0,l.useCallback)((()=>{null!==y&&void 0!==y&&y.onLabelEdit&&y.onLabelEdit(n),re()}),[y,n,re]),ie=(0,l.useCallback)((e=>{null!==y&&void 0!==y&&y.onConnectionTypeChange&&y.onConnectionTypeChange(n,e),re()}),[y,n,re]),ce=(0,l.useCallback)((e=>{null!==y&&void 0!==y&&y.onPriorityChange&&y.onPriorityChange(n,e),re()}),[y,n,re]),se=(0,l.useCallback)((()=>{null!==y&&void 0!==y&&y.onTest&&y.onTest(n),re()}),[y,n,re]),me=(0,l.useCallback)((()=>{null!==y&&void 0!==y&&y.onAddBreakpoint&&y.onAddBreakpoint(n),re()}),[y,n,re]);(0,l.useEffect)((()=>{(function(){var e=N()((function*(){if(null!==y&&void 0!==y&&y.onValidate)try{var e=yield y.onValidate({source:b,target:v,sourceHandleId:x,targetHandleId:C,data:y});A(e)}catch(t){console.error("Edge validation error:",t),A({isValid:!1,hasError:!0,message:t.message||"Validation error"})}}));return function(){return e.apply(this,arguments)}})()()}),[b,v,x,C,y]);var de=O||$;return o().createElement(o().Fragment,null,o().createElement("path",{className:"react-flow__edge-interaction-path",d:K,strokeWidth:15,stroke:"transparent",fill:"none",onClick:T,onContextMenu:ae,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1)}),o().createElement("path",{id:n,style:(()=>{var e=L({},H);return null!==de&&void 0!==de&&de.hasError?e.stroke="#f44336":null!==de&&void 0!==de&&de.hasWarning&&(e.stroke="#ff9800"),!U||null!==de&&void 0!==de&&de.hasError||(e.stroke=U.color),(I||E)&&(e.strokeWidth=3,e.filter="drop-shadow(0 0 2px rgba(0,0,0,0.3))"),e})(),className:"react-flow__edge-path",d:K,markerEnd:X,onContextMenu:ae}),z&&o().createElement("path",{className:"react-flow__edge-path react-flow__edge-animated",d:K,style:{stroke:_,strokeWidth:2,strokeDasharray:"5,5",animation:"flowAnimation 1s linear infinite"}}),R&&o().createElement("foreignObject",{width:24,height:24,x:Z-24-5,y:J-12,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-type-indicator"},o().createElement(d.Tooltip,{title:"".concat(R.label," Connection: ").concat(R.description)},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",borderRadius:"4px",backgroundColor:"background.paper",border:"1px solid ".concat(R.color),boxShadow:1}},o().createElement(R.icon,{style:{color:R.color,fontSize:16}})))),((null===de||void 0===de?void 0:de.hasError)||(null===de||void 0===de?void 0:de.hasWarning)||(null===de||void 0===de?void 0:de.isValid))&&o().createElement(d.Tooltip,{title:de.message||ne},o().createElement("foreignObject",{width:20,height:20,x:Y-10,y:Q-10,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-validation"},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:de.hasError?"#f44336":de.hasWarning?"#ff9800":"#4caf50",color:"#fff",boxShadow:1}},de.hasError?o().createElement(u.Error,{style:{fontSize:14}}):de.hasWarning?o().createElement(u.Info,{style:{fontSize:14}}):o().createElement(u.Check,{style:{fontSize:14}})))),U&&o().createElement("foreignObject",{width:24,height:24,x:Z+5,y:J-12,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-priority"},o().createElement(d.Tooltip,{title:"".concat(U.label," Priority")},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",borderRadius:"4px",backgroundColor:"background.paper",border:"1px solid ".concat(U.color),boxShadow:1}},o().createElement(u.PriorityHigh,{style:{color:U.color,fontSize:16}})))),(null===y||void 0===y?void 0:y.breakpoint)&&o().createElement("foreignObject",{width:20,height:20,x:(Y+Z)/2-10,y:(Q+J)/2-10,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-breakpoint"},o().createElement(d.Tooltip,{title:"Breakpoint"},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"#e91e63",color:"#fff",boxShadow:1}},o().createElement(u.BugReport,{style:{fontSize:14}})))),(null===y||void 0===y?void 0:y.label)&&o().createElement("foreignObject",{width:100,height:30,x:Z-50,y:J-15,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-label"},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.85)",padding:"2px 4px",borderRadius:1,border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:1,transition:"all 0.2s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.95)",boxShadow:2}},onClick:e=>{e.stopPropagation(),null!==y&&void 0!==y&&y.onLabelEdit&&y.onLabelEdit(n)}},o().createElement(d.Typography,{variant:"caption",align:"center",noWrap:!0,sx:{fontWeight:E?"bold":"normal"}},y.label))),o().createElement(q,{anchorEl:w,open:Boolean(w),onClose:re,onDelete:le,onLabelEdit:oe,onConnectionTypeChange:ie,onPriorityChange:ce,onTest:se,onAddBreakpoint:me,connectionType:null===y||void 0===y?void 0:y.connectionType,priority:null===y||void 0===y?void 0:y.priority}),(I||E)&&o().createElement("foreignObject",{width:72,height:24,x:Y-36,y:Q-36,requiredExtensions:"http://www.w3.org/1999/xhtml",className:"react-flow__edge-actions"},o().createElement(d.Fade,{in:!0},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:"background.paper",borderRadius:"4px",boxShadow:2,border:"1px solid rgba(0, 0, 0, 0.12)"}},o().createElement(d.Tooltip,{title:"Settings"},o().createElement(d.IconButton,{size:"small",onClick:ae,sx:{width:24,height:24}},o().createElement(u.Settings,{style:{fontSize:14}}))),o().createElement(d.Tooltip,{title:"Test"},o().createElement(d.IconButton,{size:"small",onClick:se,sx:{width:24,height:24}},o().createElement(u.PlayArrow,{style:{fontSize:14}}))),o().createElement(d.Tooltip,{title:"Delete"},o().createElement(d.IconButton,{size:"small",onClick:le,sx:{width:24,height:24}},o().createElement(u.Delete,{style:{fontSize:14},color:"error"})))))))}));const H=U;var K={sourceNode:{outputs:["data"],maxOutputConnections:null,description:"Source node providing data"},destinationNode:{inputs:["data"],maxInputConnections:10,description:"Destination node receiving data"},transformationNode:{inputs:["data"],outputs:["data"],maxInputConnections:5,maxOutputConnections:10,description:"Transformation node processing data"},filterNode:{inputs:["data"],outputs:["data","filtered"],maxInputConnections:5,maxOutputConnections:10,description:"Filter node routing data based on conditions"}},Z={string:["string","any"],number:["number","any"],boolean:["boolean","any"],date:["date","string","any"],object:["object","any"],array:["array","any"],any:["string","number","boolean","date","object","array","any"]},J=(e,t)=>K[e]?K[t]?K[e].outputs&&0!==K[e].outputs.length?K[t].inputs&&0!==K[t].inputs.length?{isValid:!0,message:"Connection from ".concat(e," to ").concat(t," is valid")}:{isValid:!1,hasError:!0,message:"Target node type ".concat(t," has no inputs")}:{isValid:!1,hasError:!0,message:"Source node type ".concat(e," has no outputs")}:{isValid:!1,hasError:!0,message:"Invalid target node type: ".concat(t)}:{isValid:!1,hasError:!0,message:"Invalid source node type: ".concat(e)},X=(e,t,n,a)=>{var r,l,o=(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(r=r.outputs)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.type)||"any",i=(null===t||void 0===t||null===(l=t.data)||void 0===l||null===(l=l.inputs)||void 0===l||null===(l=l[a])||void 0===l?void 0:l.type)||"any";return(Z[o]||[]).includes(i)?{isValid:!0,message:"Data types ".concat(o," and ").concat(i," are compatible")}:{isValid:!1,hasError:!0,message:"Incompatible data types: ".concat(o," cannot connect to ").concat(i)}},Y=(e,t,n)=>{var a=e.type,r=K[a];if(!r)return{isValid:!0,message:"Unknown node type, skipping constraint validation"};var l=t.filter((t=>"input"===n?t.target===e.id:t.source===e.id)).length,o="input"===n?r.maxInputConnections:r.maxOutputConnections;return null!==o&&l>=o?{isValid:!1,hasWarning:!0,message:"Maximum ".concat(n," connections (").concat(o,") reached for ").concat(a)}:{isValid:!0,message:"".concat(n," connection count is valid (").concat(l,"/").concat(o||"\u221e",")")}},Q=(e,t)=>{var n={};e.forEach((e=>{n[e.id]=[]})),t.forEach((e=>{e.source&&e.target&&n[e.source].push(e.target)}));var a={},r={};function l(e,t,a){if(!t[e]){t[e]=!0,a[e]=!0;var r=n[e]||[];for(var o of r){if(!t[o]&&l(o,t,a))return!0;if(a[o])return!0}}return a[e]=!1,!1}for(var o in n)if(!a[o]&&l(o,a,r))return{isValid:!1,hasError:!0,message:"Cycle detected in flow. This may cause infinite loops."};return{isValid:!0,message:"No cycles detected in flow."}},$=(e,t,n)=>{var a=t.find((t=>t.id===e.source)),r=t.find((t=>t.id===e.target));if(!a||!r)return{isValid:!1,hasError:!0,message:"Source or target node not found"};var l=J(a.type,r.type);if(!l.isValid)return l;var o=X(a,r,e.sourceHandle,e.targetHandle);if(!o.isValid)return o;var i=Y(a,n,"output");if(!i.isValid)return i;var c=Y(r,n,"input");if(!c.isValid)return c;var s=[...n,e].filter((t=>!(t.id!==e.id&&t.source===e.source&&t.target===e.target))),m=Q(t,s);return m.isValid?{isValid:!0,message:"Connection is valid"}:m},ee=(e,t)=>{var n={isValid:!0,hasErrors:!1,hasWarnings:!1,errors:[],warnings:[],nodeValidation:{},edgeValidation:{}},a=e.filter((e=>"sourceNode"===e.type));0===a.length&&(n.isValid=!1,n.hasErrors=!0,n.errors.push("Flow must have at least one source node"));var r=e.filter((e=>"destinationNode"===e.type));0===r.length&&(n.isValid=!1,n.hasErrors=!0,n.errors.push("Flow must have at least one destination node")),a.forEach((e=>{var a;t.some((t=>t.source===e.id))||(n.hasWarnings=!0,n.warnings.push("Source node ".concat((null===(a=e.data)||void 0===a?void 0:a.label)||e.id," is not connected to any destination")),n.nodeValidation[e.id]={isValid:!0,hasWarning:!0,message:"Source node not connected"})})),r.forEach((e=>{var a;t.some((t=>t.target===e.id))||(n.hasWarnings=!0,n.warnings.push("Destination node ".concat((null===(a=e.data)||void 0===a?void 0:a.label)||e.id," has no incoming connections")),n.nodeValidation[e.id]={isValid:!0,hasWarning:!0,message:"Destination node not connected"})})),t.forEach((a=>{var r=$(a,e,t);n.edgeValidation[a.id]=r,r.isValid||(r.hasError?(n.isValid=!1,n.hasErrors=!0,n.errors.push("Invalid connection: ".concat(r.message))):r.hasWarning&&(n.hasWarnings=!0,n.warnings.push("Warning for connection: ".concat(r.message))))}));var l=new Set;a.forEach((e=>{l.add(e.id)}));for(var o=!0;o;)o=!1,t.forEach((e=>{l.has(e.source)&&!l.has(e.target)&&(l.add(e.target),o=!0)}));return e.forEach((e=>{var t;l.has(e.id)||"sourceNode"===e.type||(n.hasWarnings=!0,n.warnings.push("Node ".concat((null===(t=e.data)||void 0===t?void 0:t.label)||e.id," is unreachable from any source")),n.nodeValidation[e.id]={isValid:!0,hasWarning:!0,message:"Node is unreachable"})})),n};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae={background:"#f7f7f7"},re={sourceNode:D,destinationNode:A,transformationNode:M,filterNode:j},le={flowEdge:H},oe={sourceNode:{type:"sourceNode",data:{label:"Source",sourceType:"default",config:{}}},destinationNode:{type:"destinationNode",data:{label:"Destination",destinationType:"default",config:{}}},transformationNode:{type:"transformationNode",data:{label:"Transform",transformationType:"default",config:{}}},filterNode:{type:"filterNode",data:{label:"Filter",filterType:"default",config:{}}}},ie=e=>{var{initialElements:t=[],readOnly:n=!1,onChange:a,onSave:r,onNodeSelect:i,onEdgeSelect:c,onValidate:s,validationErrors:m={}}=e,[y,h]=(0,l.useState)(t.filter((e=>(0,p.isNode)(e)))),[f,E]=(0,l.useState)(t.filter((e=>(0,p.isEdge)(e)))),[b,v]=(0,l.useState)([]),[x,C]=(0,l.useState)(0),[T,S]=(0,l.useState)([{nodes:t.filter((e=>(0,p.isNode)(e))),edges:t.filter((e=>(0,p.isEdge)(e))),timestamp:(new Date).toISOString(),action:"Initial state"}]),[w,k]=(0,l.useState)(null),[I,B]=(0,l.useState)({x:0,y:0}),[P,D]=(0,l.useState)({open:!1,message:"",severity:"info"}),O=(0,l.useRef)(null),A=(0,p.useReactFlow)();(0,l.useEffect)((()=>{a&&a([...y,...f])}),[y,f,a]);var z=(0,l.useCallback)(((e,t,n)=>{var a={nodes:[...e],edges:[...t],timestamp:(new Date).toISOString(),action:n||"Unknown action"},r=T.slice(0,x+1);r.push(a);var l=r.length>50?r.slice(r.length-50):r;S(l),C(l.length-1),console.log("History: ".concat(n," (").concat(l.length," states)"))}),[T,x]),M=(0,l.useCallback)((e=>{(0,p.isNode)(e)?h((t=>{var n=[...t,e];return z(n,f,"Added ".concat(e.type)),n})):(0,p.isEdge)(e)&&E((t=>{var n=[...t,e];return z(y,n,"Added connection"),n}))}),[z,y,f]),F=(0,l.useCallback)((()=>{if(x>0){var e=x-1,t=T[e];t&&t.nodes&&t.edges?(C(e),h(t.nodes),E(t.edges),D({open:!0,message:"Undo: ".concat(t.action),severity:"info"})):console.error("History record is invalid",t)}}),[T,x]),j=(0,l.useCallback)((()=>{if(x<T.length-1){var e=x+1,t=T[e];t&&t.nodes&&t.edges?(C(e),h(t.nodes),E(t.edges),D({open:!0,message:"Redo: ".concat(t.action),severity:"info"})):console.error("History record is invalid",t)}}),[T,x]),R=(0,l.useCallback)((e=>{if(v(e),1===e.length){var t=e[0];(0,p.isNode)(t)&&i?i(t):(0,p.isEdge)(t)&&c&&c(t)}}),[i,c]),N=(0,l.useCallback)((e=>{var t=e.filter((e=>(0,p.isNode)(e))),n=e.filter((e=>(0,p.isEdge)(e))),a=1===e.length?"Removed ".concat((0,p.isNode)(e[0])?"node":"edge"," ").concat(e[0].id):"Removed ".concat(e.length," elements");if(t.length>0){var r=t.map((e=>({id:e.id,type:"remove"})));h((e=>{var t=(0,p.applyNodeChanges)(r,e);return 0===n.length&&z(t,f,a),t}))}if(n.length>0){var l=n.map((e=>({id:e.id,type:"remove"})));E((e=>{var n=(0,p.applyEdgeChanges)(l,e);if(t.length>0){var r=y.filter((e=>!t.some((t=>t.id===e.id))));z(r,n,a)}else z(y,n,a);return n}))}}),[y,f,z]),_=(0,l.useCallback)((e=>{var t=y.find((t=>t.id===e.source)),n=y.find((t=>t.id===e.target));if(t&&n){var a=ne(ne({},e),{},{id:"edge-".concat(e.source,"-").concat(e.target,"-").concat(Date.now()),source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}),r=$(a,y,f),l=ne(ne({},e),{},{id:"edge-".concat(e.source,"-").concat(e.target,"-").concat(Date.now()),type:"flowEdge",animated:!0,data:{label:"Connection",validation:r,connectionType:"DATA",onDelete:e=>{var t=f.find((t=>t.id===e));t&&N([t])},onLabelEdit:e=>{console.log("Edit label for",e)},onConnectionTypeChange:(e,t)=>{E((n=>{var a=n.map((n=>n.id===e?ne(ne({},n),{},{animated:"DATA"===t,data:ne(ne({},n.data),{},{connectionType:t})}):n));return z(y,a,"Changed connection type to ".concat(t)),a}))},onPriorityChange:(e,t)=>{E((n=>{var a=n.map((n=>n.id===e?ne(ne({},n),{},{data:ne(ne({},n.data),{},{priority:t})}):n));return z(y,a,"Changed connection priority to ".concat(t)),a}))},onTest:e=>{D({open:!0,message:"Testing connection...",severity:"info"})},onAddBreakpoint:e=>{E((t=>{var n=t.map((t=>{if(t.id===e){var n,a=!(null===(n=t.data)||void 0===n||!n.breakpoint);return ne(ne({},t),{},{data:ne(ne({},t.data),{},{breakpoint:!a})})}return t}));return z(y,n,"Toggled breakpoint on connection ".concat(e)),n}))},onValidate:e=>$(e,y,f)}});!r.isValid&&(D({open:!0,message:r.message,severity:r.hasError?"error":"warning"}),r.hasError)||E((a=>{var r,o,i=(0,p.addEdge)(l,a),c=(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.label)||e.source,s=(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.label)||e.target;return z(y,i,"Connected ".concat(c," to ").concat(s)),i}))}else D({open:!0,message:"Cannot create connection: Source or target node not found",severity:"error"})}),[y,f,z,N]),L=(0,l.useCallback)((e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"}),[]),W=(0,l.useCallback)((e=>{e.preventDefault();var t=O.current.getBoundingClientRect(),n=e.dataTransfer.getData("application/reactflow/type");if("undefined"!==typeof n&&n&&oe[n]){var a=A.screenToFlowPosition({x:e.clientX-t.left,y:e.clientY-t.top}),r=ne(ne({},oe[n]),{},{position:a,id:"".concat(n,"-").concat(Date.now())});M(r),D({open:!0,message:"Added new ".concat(n.replace("Node","")," node"),severity:"success"})}}),[A,M]),G=(0,l.useCallback)((()=>{r&&(r([...y,...f]),D({open:!0,message:"Flow saved successfully",severity:"success"}))}),[y,f,r]),V=(0,l.useCallback)((()=>{var e=ee(y,f);if(e.isValid)D({open:!0,message:"Flow validation passed successfully",severity:"success"});else{var t=e.hasErrors?e.errors[0]:e.hasWarnings?e.warnings[0]:"Flow validation failed";D({open:!0,message:t,severity:e.hasErrors?"error":"warning"})}return h((t=>t.map((t=>e.nodeValidation[t.id]?ne(ne({},t),{},{data:ne(ne({},t.data),{},{validation:e.nodeValidation[t.id]})}):t)))),E((t=>t.map((t=>e.edgeValidation[t.id]?ne(ne({},t),{},{data:ne(ne({},t.data),{},{validation:e.edgeValidation[t.id]})}):t)))),s&&s([...y,...f],e),e.isValid}),[y,f,s]),q=(0,l.useCallback)((()=>{b.length>0&&(N(b),v([]),D({open:!0,message:"Deleted ".concat(b.length," element(s)"),severity:"info"}))}),[b,N]),U=(0,l.useCallback)((e=>{e.preventDefault();var t=O.current.getBoundingClientRect(),n=A.screenToFlowPosition({x:e.clientX-t.left,y:e.clientY-t.top});B(n),k(e.currentTarget)}),[A]),H=(0,l.useCallback)((()=>{k(null)}),[]),K=(0,l.useCallback)((e=>{if(oe[e]){var t=ne(ne({},oe[e]),{},{position:I,id:"".concat(e,"-").concat(Date.now())});M(t),H(),D({open:!0,message:"Added new ".concat(e.replace("Node","")," node"),severity:"success"})}}),[I,M,H]),Z=(0,l.useCallback)((()=>{D(ne(ne({},P),{},{open:!1}))}),[P]);return o().createElement(d.Box,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},o().createElement(d.Paper,{elevation:1,sx:{width:"100%"}},o().createElement(d.Toolbar,{variant:"dense"},o().createElement(d.Tooltip,{title:"Add Node"},o().createElement(d.IconButton,{onClick:e=>k(e.currentTarget),disabled:n},o().createElement(u.Add,null))),o().createElement(d.Tooltip,{title:"Delete Selected"},o().createElement("span",null,o().createElement(d.IconButton,{onClick:q,disabled:n||0===b.length},o().createElement(u.Delete,null)))),o().createElement(d.Divider,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),o().createElement(d.Tooltip,{title:"Undo"},o().createElement("span",null,o().createElement(d.IconButton,{onClick:F,disabled:n||0===x},o().createElement(u.Undo,null)))),o().createElement(d.Tooltip,{title:"Redo"},o().createElement("span",null,o().createElement(d.IconButton,{onClick:j,disabled:n||x===T.length-1},o().createElement(u.Redo,null)))),o().createElement(d.Divider,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),o().createElement(d.Tooltip,{title:"Save Flow"},o().createElement("span",null,o().createElement(d.IconButton,{onClick:G,disabled:n,color:"primary"},o().createElement(u.SaveAlt,null)))),o().createElement(d.Tooltip,{title:"Validate Flow"},o().createElement(d.IconButton,{onClick:V,color:"secondary"},o().createElement(u.PlayArrow,null))),o().createElement(d.Box,{sx:{flexGrow:1}}),o().createElement(d.Tooltip,{title:n?"Read Only Mode":"Edit Mode"},o().createElement(d.IconButton,{color:n?"error":"success"},n?o().createElement(u.Lock,null):o().createElement(u.LockOpen,null))),o().createElement(d.Tooltip,{title:"Flow Settings"},o().createElement(d.IconButton,null,o().createElement(u.Settings,null))))),o().createElement(d.Box,{ref:O,sx:{flexGrow:1,width:"100%",height:"calc(100% - 48px)","& .react-flow__node":{cursor:n?"default":"move"}}},o().createElement(g(),{nodes:y,edges:f,nodeTypes:re,edgeTypes:le,onNodesChange:e=>{h((t=>(0,p.applyNodeChanges)(e,t)))},onEdgesChange:e=>{E((t=>(0,p.applyEdgeChanges)(e,t)))},onConnect:_,onSelectionChange:R,deleteKeyCode:46,onInit:e=>{e.fitView({padding:.2})},onDragOver:L,onDrop:W,onContextMenu:U,snapToGrid:!0,snapGrid:[15,15],defaultZoom:1,minZoom:.1,maxZoom:1.5,style:ae,selectionOnDrag:!1,multiSelectionKeyCode:"Control",selectionMode:1,elementsSelectable:!n,nodesDraggable:!n,nodesConnectable:!n},o().createElement(p.Background,{variant:"dots",gap:12,size:1}),o().createElement(p.Controls,{showInteractive:!1}),o().createElement(p.MiniMap,{nodeColor:e=>"sourceNode"===e.type?"#00c853":"destinationNode"===e.type?"#2196f3":"transformationNode"===e.type?"#ff9800":"filterNode"===e.type?"#9c27b0":"#999"}))),o().createElement(d.Menu,{anchorEl:w,open:Boolean(w),onClose:H},o().createElement(d.MenuItem,{onClick:()=>K("sourceNode")},"Add Source"),o().createElement(d.MenuItem,{onClick:()=>K("destinationNode")},"Add Destination"),o().createElement(d.MenuItem,{onClick:()=>K("transformationNode")},"Add Transformation"),o().createElement(d.MenuItem,{onClick:()=>K("filterNode")},"Add Filter")),o().createElement(d.Snackbar,{open:P.open,autoHideDuration:4e3,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"left"}},o().createElement(d.Alert,{onClose:Z,severity:P.severity,variant:"filled"},P.message)))};ie.propTypes={initialElements:m().array,readOnly:m().bool,onChange:m().func,onSave:m().func,onNodeSelect:m().func,onEdgeSelect:m().func,onValidate:m().func,validationErrors:m().object};const ce=e=>o().createElement(p.ReactFlowProvider,null,o().createElement(ie,e));var se=[{id:"sourceNode",type:"sourceNode",label:"Data Source",icon:u.Storage,category:"sources",description:"Starting point for data flow"},{id:"s3SourceNode",type:"sourceNode",data:{sourceType:"S3"},label:"S3 Source",icon:u.CloudDownload,category:"sources",description:"Import data from Amazon S3"},{id:"azureBlobSourceNode",type:"sourceNode",data:{sourceType:"AZURE_BLOB"},label:"Azure Blob Source",icon:u.CloudDownload,category:"sources",description:"Import data from Azure Blob Storage"},{id:"sharepointSourceNode",type:"sourceNode",data:{sourceType:"SHAREPOINT"},label:"SharePoint Source",icon:u.CloudDownload,category:"sources",description:"Import data from SharePoint"},{id:"apiSourceNode",type:"sourceNode",data:{sourceType:"API"},label:"API Source",icon:u.Api,category:"sources",description:"Import data from external API"},{id:"databaseSourceNode",type:"sourceNode",data:{sourceType:"DATABASE"},label:"Database Source",icon:u.Storage,category:"sources",description:"Import data from database",permissions:["database.read"]},{id:"destinationNode",type:"destinationNode",label:"Data Destination",icon:u.CloudUpload,category:"destinations",description:"Endpoint for data flow"},{id:"s3DestinationNode",type:"destinationNode",data:{destinationType:"S3"},label:"S3 Destination",icon:u.CloudUpload,category:"destinations",description:"Export data to Amazon S3"},{id:"azureBlobDestinationNode",type:"destinationNode",data:{destinationType:"AZURE_BLOB"},label:"Azure Blob Destination",icon:u.CloudUpload,category:"destinations",description:"Export data to Azure Blob Storage"},{id:"sharepointDestinationNode",type:"destinationNode",data:{destinationType:"SHAREPOINT"},label:"SharePoint Destination",icon:u.CloudUpload,category:"destinations",description:"Export data to SharePoint"},{id:"apiDestinationNode",type:"destinationNode",data:{destinationType:"API"},label:"API Destination",icon:u.Api,category:"destinations",description:"Export data to external API"},{id:"databaseDestinationNode",type:"destinationNode",data:{destinationType:"DATABASE"},label:"Database Destination",icon:u.Storage,category:"destinations",description:"Export data to database",permissions:["database.write"]},{id:"transformationNode",type:"transformationNode",label:"Transformation",icon:u.Transform,category:"transformations",description:"Transform data passing through"},{id:"mappingTransformationNode",type:"transformationNode",data:{transformationType:"MAPPING"},label:"Field Mapping",icon:u.SwapHoriz,category:"transformations",description:"Map fields from source to destination"},{id:"formulaTransformationNode",type:"transformationNode",data:{transformationType:"FORMULA"},label:"Formula Transform",icon:u.Functions,category:"transformations",description:"Apply formulas to transform data"},{id:"scriptTransformationNode",type:"transformationNode",data:{transformationType:"SCRIPT"},label:"Script Transform",icon:u.Code,category:"transformations",description:"Use custom script to transform data",permissions:["script.execute"]},{id:"aiTransformationNode",type:"transformationNode",data:{transformationType:"AI"},label:"AI Transform",icon:u.AutoAwesome,category:"transformations",description:"Use AI to enhance or analyze data",permissions:["ai.access"]},{id:"filterNode",type:"filterNode",label:"Filter",icon:u.FilterAlt,category:"filters",description:"Filter data based on conditions"},{id:"conditionFilterNode",type:"filterNode",data:{filterType:"CONDITION"},label:"Condition Filter",icon:u.Rule,category:"filters",description:"Filter data based on conditions"},{id:"validationFilterNode",type:"filterNode",data:{filterType:"VALIDATION"},label:"Validation Filter",icon:u.FilterAlt,category:"filters",description:"Validate data against rules"},{id:"searchReplaceFilterNode",type:"filterNode",data:{filterType:"SEARCH_REPLACE"},label:"Search & Replace",icon:u.FindReplace,category:"filters",description:"Find and replace values in data"},{id:"listFilterNode",type:"filterNode",data:{filterType:"LIST_FILTER"},label:"List Filter",icon:u.FilterList,category:"filters",description:"Filter data using lists"}],me=[{id:"sources",label:"Data Sources",icon:u.Storage,defaultExpanded:!0},{id:"destinations",label:"Data Destinations",icon:u.CloudUpload,defaultExpanded:!0},{id:"transformations",label:"Transformations",icon:u.Transform,defaultExpanded:!1},{id:"filters",label:"Filters",icon:u.FilterAlt,defaultExpanded:!1}],de=(0,l.memo)((e=>{var{userPermissions:t=[],onRefresh:n}=e,a=(0,l.useCallback)((e=>!e.permissions||0===e.permissions.length||e.permissions.some((e=>t.includes(e)))),[t]),r=(0,l.useCallback)(((e,t)=>{e.dataTransfer.setData("application/reactflow/type",t.type),t.data&&e.dataTransfer.setData("application/reactflow/data",JSON.stringify(t.data)),e.dataTransfer.effectAllowed="move"}),[]);return o().createElement(d.Paper,{elevation:2,sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"}},o().createElement(d.Box,{sx:{p:1,backgroundColor:"primary.main",color:"primary.contrastText",display:"flex",alignItems:"center"}},o().createElement(d.Typography,{variant:"subtitle1",sx:{flexGrow:1}},"Flow Nodes"),o().createElement(d.Tooltip,{title:"Refresh Available Nodes"},o().createElement(d.IconButton,{size:"small",onClick:n,sx:{color:"inherit"}},o().createElement(u.Refresh,{fontSize:"small"})))),o().createElement(d.Box,{sx:{p:1,display:"flex",alignItems:"center"}},o().createElement(u.Search,{sx:{mr:1,color:"text.secondary"}}),o().createElement(d.Typography,{variant:"body2",color:"text.secondary"},"Search nodes...")),o().createElement(d.Divider,null),o().createElement(d.Box,{sx:{flexGrow:1,overflow:"auto",p:1}},me.map((e=>{var t=se.filter((t=>t.category===e.id&&a(t)));return 0===t.length?null:o().createElement(d.Accordion,{key:e.id,defaultExpanded:e.defaultExpanded,disableGutters:!0,sx:{mb:1}},o().createElement(d.AccordionSummary,{expandIcon:o().createElement(u.ExpandMore,null)},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(e.icon,{sx:{mr:1}}),o().createElement(d.Typography,null,e.label),o().createElement(d.Chip,{label:t.length,size:"small",sx:{ml:1},color:"primary"}))),o().createElement(d.AccordionDetails,{sx:{p:0}},o().createElement(d.List,{dense:!0,disablePadding:!0},t.map((e=>{var t=e.icon;return o().createElement(d.ListItem,{key:e.id,draggable:!0,onDragStart:t=>r(t,e),sx:{cursor:"grab","&:hover":{backgroundColor:"action.hover"},borderLeft:"3px solid",borderLeftColor:"sources"===e.category?"success.main":"destinations"===e.category?"info.main":"transformations"===e.category?"warning.main":"secondary.main"}},o().createElement(d.ListItemIcon,null,o().createElement(t,{fontSize:"small"})),o().createElement(d.ListItemText,{primary:e.label}),e.description&&o().createElement(d.Tooltip,{title:e.description},o().createElement(u.Info,{fontSize:"small",color:"action"})))})))))}))),o().createElement(d.Box,{sx:{p:1,borderTop:1,borderColor:"divider"}},o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},"Drag and drop nodes onto the canvas")))}));de.propTypes={userPermissions:m().arrayOf(m().string),onRefresh:m().func};const ue=de;function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=e=>{var{initialElements:t=[],readOnly:n=!1,userPermissions:a=[],onSave:r,onRun:i,onChange:c}=e,[s,m]=(0,l.useState)(t),[p,g]=(0,l.useState)(null),[y,h]=(0,l.useState)({}),[f,E]=(0,l.useState)(0),b=(0,l.useCallback)((e=>{m(e),c&&c(e)}),[c]),v=(0,l.useCallback)((e=>{g(ge(ge({},e),{},{type:"node"})),E(1)}),[]),x=(0,l.useCallback)((e=>{g(ge(ge({},e),{},{type:"edge"})),E(1)}),[]),C=(0,l.useCallback)((e=>{var t=e.filter((e=>"sourceNode"===e.type)),n=e.filter((e=>"destinationNode"===e.type)),a=e.filter((e=>e.source&&e.target)),r={},l=t.length>0&&n.length>0&&a.length>0;return l||(0===t.length?r.general="Flow must include at least one source node":0===n.length?r.general="Flow must include at least one destination node":0===a.length&&(r.general="Nodes must be connected")),h(r),l}),[]),T=(0,l.useCallback)((()=>{r&&r(s)}),[s,r]),S=(0,l.useCallback)((()=>{C(s)&&i&&i(s)}),[s,C,i]),w=(0,l.useCallback)((()=>{m(t),g(null)}),[t]);return o().createElement(d.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"}},o().createElement(d.Paper,{elevation:1,sx:{mb:1}},o().createElement(d.Box,{sx:{display:"flex",p:1,alignItems:"center"}},o().createElement(d.Tooltip,{title:"Save Flow"},o().createElement(d.IconButton,{onClick:T,disabled:n},o().createElement(u.Save,null))),o().createElement(d.Tooltip,{title:"Run Flow"},o().createElement(d.IconButton,{onClick:S,color:"primary"},o().createElement(u.PlayArrow,null))),o().createElement(d.Tooltip,{title:"Reset Flow"},o().createElement(d.IconButton,{onClick:w,disabled:n},o().createElement(u.SettingsBackupRestore,null))),o().createElement(d.Divider,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),o().createElement(d.Tooltip,{title:"View History"},o().createElement(d.IconButton,null,o().createElement(u.History,null))),o().createElement(d.Tooltip,{title:"View JSON"},o().createElement(d.IconButton,null,o().createElement(u.Code,null))),o().createElement(d.Box,{sx:{flexGrow:1}}),o().createElement(d.Tooltip,{title:"Fullscreen"},o().createElement(d.IconButton,null,o().createElement(u.Fullscreen,null))))),o().createElement(d.Box,{sx:{flexGrow:1,display:"flex"}},o().createElement(d.Grid,{container:!0,spacing:1,sx:{height:"100%"}},o().createElement(d.Grid,{item:!0,xs:2,sx:{height:"100%"}},o().createElement(ue,{userPermissions:a,onRefresh:()=>{}})),o().createElement(d.Grid,{item:!0,xs:8,sx:{height:"100%"}},o().createElement(d.Paper,{elevation:2,sx:{height:"100%",overflow:"hidden"}},o().createElement(ce,{initialElements:s,readOnly:n,onChange:b,onSave:T,onNodeSelect:v,onEdgeSelect:x,onValidate:C,validationErrors:y}))),o().createElement(d.Grid,{item:!0,xs:2,sx:{height:"100%"}},o().createElement(d.Paper,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"}},o().createElement(d.Tabs,{value:f,onChange:(e,t)=>E(t),variant:"fullWidth"},o().createElement(d.Tab,{label:"Info"}),o().createElement(d.Tab,{label:"Properties"})),o().createElement(d.Divider,null),o().createElement(d.Box,{sx:{flexGrow:1,overflow:"auto"}},0===f?o().createElement(d.Box,{sx:{p:2}},o().createElement("h3",null,"Flow Information"),o().createElement("p",null,"Nodes: ",s.filter((e=>!e.source)).length),o().createElement("p",null,"Connections: ",s.filter((e=>e.source)).length),Object.keys(y).length>0&&o().createElement(d.Box,{sx:{color:"error.main",mt:2}},o().createElement("h4",null,"Validation Errors"),Object.entries(y).map((e=>{var[t,n]=e;return o().createElement("p",{key:t},n)})))):p&&"node"===p.type?o().createElement(d.Box,{sx:{p:2}},o().createElement("h3",null,"Node Properties"),o().createElement("p",null,"ID: ",p.id),o().createElement("p",null,"Type: ",p.type)):o().createElement(d.Box,{sx:{p:2,textAlign:"center",color:"text.secondary"}},"Select a node to view properties")))))))};ye.propTypes={initialElements:m().array,readOnly:m().bool,userPermissions:m().arrayOf(m().string),onSave:m().func,onRun:m().func,onChange:m().func};const he=ye;var fe=n(792),Ee=n.n(fe),be=n(773),ve=n.n(be);const xe=require("@mui/icons-material/VisibilityOff");var Ce=n.n(xe);const Te=require("@mui/icons-material/Storage");var Se=n.n(Te);const we=require("@mui/icons-material/Folder");var ke=n.n(we);const Ie=require("@mui/icons-material/CheckCircle");var Be=n.n(Ie);const Pe=require("@mui/icons-material/Error");var De=n.n(Pe);const Oe=require("@mui/icons-material/Search");var Ae=n.n(Oe),ze=n(173),Me=n.n(ze);require("@mui/icons-material/Lock");const Fe=require("@mui/icons-material/Key");var je=n.n(Fe);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},Le=e=>e?new Date(e).toLocaleString():"Unknown",We=e=>{var{config:t,onSelectContainer:a,onSelectBlob:r,readOnly:i=!1,selectedContainer:c="",selectedPath:s=""}=e,[m,p]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[h,f]=(0,l.useState)(s||""),[E,b]=(0,l.useState)([]),[v,x]=(0,l.useState)(!1),[C,T]=(0,l.useState)(!1),[S,w]=(0,l.useState)(""),[k,I]=(0,l.useState)([]),[B,P]=(0,l.useState)(!1),[D,O]=(0,l.useState)(!1),[A,z]=(0,l.useState)(""),[M,F]=(0,l.useState)(!1),[j,R]=(0,l.useState)(""),[_,L]=(0,l.useState)(!1),[W,G]=(0,l.useState)(null),[V,q]=(0,l.useState)(!1),[U,H]=(0,l.useState)(null),[K,Z]=(0,l.useState)([]),[J,X]=(0,l.useState)(0),[Y,Q]=(0,l.useState)(0),[$,ee]=(0,l.useState)({overwriteExisting:!0,calculateMD5:!1}),[te,ne]=(0,l.useState)(null),[ae,re]=(0,l.useState)(null),[le,oe]=(0,l.useState)(!1),[ie,ce]=(0,l.useState)(""),[se,me]=(0,l.useState)(""),[de,ue]=(0,l.useState)(null),pe=(0,l.useCallback)(N()((function*(){if(t){T(!0),ue(null);try{console.log("Loading containers with config:",t);var e=yield new Promise((e=>setTimeout((()=>{e({status:"success",containers:[{name:"container1",properties:{lastModified:(new Date).toISOString()}},{name:"container2",properties:{lastModified:(new Date).toISOString()}},{name:"datasets",properties:{lastModified:(new Date).toISOString()}},{name:"exports",properties:{lastModified:(new Date).toISOString()}},{name:"imports",properties:{lastModified:(new Date).toISOString()}}]})}),1e3)));"success"===e.status?(p(e.containers),c&&e.containers.some((e=>e.name===c))&&ge(c,s||"")):ue(e.message||"Failed to load containers")}catch(n){console.error("Error loading containers:",n),ue(n.message||"An error occurred while loading containers")}finally{T(!1)}}})),[t,c,s]),ge=(0,l.useCallback)(function(){var e=N()((function*(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&e){x(!0),ue(null);try{console.log("Loading blobs from container: ".concat(e,", path: ").concat(n));var r=yield new Promise((t=>setTimeout((()=>{var a=[];""===n?a=[{name:"folder1/",properties:{contentLength:0,lastModified:new Date(Date.now()-864e5).toISOString(),contentType:"application/directory"},type:"directory"},{name:"folder2/",properties:{contentLength:0,lastModified:new Date(Date.now()-1728e5).toISOString(),contentType:"application/directory"},type:"directory"},{name:"data/",properties:{contentLength:0,lastModified:new Date(Date.now()-2592e5).toISOString(),contentType:"application/directory"},type:"directory"},{name:"sample.csv",properties:{contentLength:1024,lastModified:new Date(Date.now()-3456e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"readme.txt",properties:{contentLength:512,lastModified:new Date(Date.now()-432e6).toISOString(),contentType:"text/plain"},type:"blob"}]:"folder1/"===n?a=[{name:"folder1/subfolder/",properties:{contentLength:0,lastModified:new Date(Date.now()-5184e5).toISOString(),contentType:"application/directory"},type:"directory"},{name:"folder1/data1.json",properties:{contentLength:2048,lastModified:new Date(Date.now()-6048e5).toISOString(),contentType:"application/json"},type:"blob"}]:"folder1/subfolder/"===n?a=[{name:"folder1/subfolder/deep.xml",properties:{contentLength:4096,lastModified:new Date(Date.now()-6912e5).toISOString(),contentType:"application/xml"},type:"blob"}]:"folder2/"===n?a=[{name:"folder2/image.png",properties:{contentLength:102400,lastModified:new Date(Date.now()-7776e5).toISOString(),contentType:"image/png"},type:"blob"},{name:"folder2/document.pdf",properties:{contentLength:204800,lastModified:new Date(Date.now()-864e6).toISOString(),contentType:"application/pdf"},type:"blob"}]:"data/"===n&&(a=[{name:"data/dataset1.csv",properties:{contentLength:5120,lastModified:new Date(Date.now()-9504e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"data/dataset2.csv",properties:{contentLength:6144,lastModified:new Date(Date.now()-10368e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"data/dataset3.xlsx",properties:{contentLength:8192,lastModified:new Date(Date.now()-11232e5).toISOString(),contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},type:"blob"}]),t({status:"success",blobs:a,containerName:e,path:n})}),1e3)));"success"===r.status?(e!==c&&(a(e),b([])),y(r.blobs),f(n),n!==h&&b((e=>h?[...e,h]:e))):ue(r.message||"Failed to load blobs")}catch(l){console.error("Error loading blobs:",l),ue(l.message||"An error occurred while loading blobs")}finally{x(!1),P(!1)}}}));return function(t){return e.apply(this,arguments)}}(),[t,h,a,c]),ye=(0,l.useCallback)((e=>{if("directory"===e.type){var t=e.name;ge(c,t)}else"blob"===e.type&&r({containerName:c,path:h,blobName:e.name,blobProperties:e.properties})}),[h,ge,r,c]),he=(0,l.useCallback)((()=>{if(E.length>0){var e=E[E.length-1];b((e=>e.slice(0,-1))),ge(c,e)}else y([]),f(""),a("")}),[ge,a,E,c]),fe=(0,l.useCallback)(N()((function*(){if(S&&c){P(!0),x(!0),ue(null);try{console.log('Searching for "'.concat(S,'" in container: ').concat(c));var e=yield new Promise((e=>setTimeout((()=>{var t=[{name:"folder1/data1.json",properties:{contentLength:2048,lastModified:new Date(Date.now()-6048e5).toISOString(),contentType:"application/json"},type:"blob"},{name:"folder1/subfolder/deep.xml",properties:{contentLength:4096,lastModified:new Date(Date.now()-6912e5).toISOString(),contentType:"application/xml"},type:"blob"},{name:"folder2/image.png",properties:{contentLength:102400,lastModified:new Date(Date.now()-7776e5).toISOString(),contentType:"image/png"},type:"blob"},{name:"folder2/document.pdf",properties:{contentLength:204800,lastModified:new Date(Date.now()-864e6).toISOString(),contentType:"application/pdf"},type:"blob"},{name:"data/dataset1.csv",properties:{contentLength:5120,lastModified:new Date(Date.now()-9504e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"data/dataset2.csv",properties:{contentLength:6144,lastModified:new Date(Date.now()-10368e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"data/dataset3.xlsx",properties:{contentLength:8192,lastModified:new Date(Date.now()-11232e5).toISOString(),contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},type:"blob"},{name:"sample.csv",properties:{contentLength:1024,lastModified:new Date(Date.now()-3456e5).toISOString(),contentType:"text/csv"},type:"blob"},{name:"readme.txt",properties:{contentLength:512,lastModified:new Date(Date.now()-432e6).toISOString(),contentType:"text/plain"},type:"blob"}],n=S.toLowerCase(),a=t.filter((e=>e.name.toLowerCase().includes(n)));e({status:"success",blobs:a})}),1e3)));"success"===e.status?I(e.blobs):ue(e.message||"Failed to search blobs")}catch(t){console.error("Error searching blobs:",t),ue(t.message||"An error occurred while searching blobs")}finally{x(!1)}}})),[S,c]),Ee=(0,l.useCallback)((()=>{w(""),I([]),P(!1),c&&ge(c,h)}),[h,ge,c]),be=(0,l.useCallback)(N()((function*(){if(A){x(!0),ue(null);try{console.log("Creating container: ".concat(A));var e=yield new Promise((e=>setTimeout((()=>{A.includes(" ")?e({status:"error",message:"Container name cannot contain spaces"}):m.some((e=>e.name===A))?e({status:"error",message:"Container already exists"}):e({status:"success",container:{name:A,properties:{lastModified:(new Date).toISOString()}}})}),1e3)));"success"===e.status?(p((t=>[...t,e.container])),O(!1),z(""),a(e.container.name),ge(e.container.name,"")):ue(e.message||"Failed to create container")}catch(t){console.error("Error creating container:",t),ue(t.message||"An error occurred while creating container")}finally{x(!1)}}})),[m,ge,A,a]),ve=(0,l.useCallback)(N()((function*(){if(j&&c){x(!0),ue(null);try{var e=h?"".concat(h).concat(j,"/"):"".concat(j,"/");console.log("Creating folder: ".concat(e," in container: ").concat(c));var t=yield new Promise((t=>setTimeout((()=>{t({status:"success",folder:{name:e,properties:{contentLength:0,lastModified:(new Date).toISOString(),contentType:"application/directory"},type:"directory"}})}),1e3)));"success"===t.status?(y((e=>[...e,t.folder])),F(!1),R("")):ue(t.message||"Failed to create folder")}catch(n){console.error("Error creating folder:",n),ue(n.message||"An error occurred while creating folder")}finally{x(!1)}}})),[h,j,c]),xe=(0,l.useCallback)(N()((function*(){if(W){x(!0),ue(null);try{console.log("Deleting ".concat(W.type,": ").concat(W.name));var e=yield new Promise((e=>setTimeout((()=>{e({status:"success"})}),1e3)));"success"===e.status?("container"===W.type?(p((e=>e.filter((e=>e.name!==W.name)))),c===W.name&&(a(""),y([]),f(""))):y((e=>e.filter((e=>e.name!==W.name)))),L(!1),G(null)):ue(e.message||"Failed to delete item")}catch(t){console.error("Error deleting item:",t),ue(t.message||"An error occurred while deleting item")}finally{x(!1)}}})),[W,a,c]),Ce=(0,l.useCallback)((e=>{if(e&&0!==e.length){var t=Array.from(e);1===t.length?(H(t[0]),Z([])):(Z(t),H(t[0]),X(0))}}),[]),Te=(0,l.useCallback)(function(){var e=N()((function*(e){if(!e||!c)return!1;try{var t=h?"".concat(h).concat(e.name):e.name;console.log("Uploading file: ".concat(t," to container: ").concat(c));var n=0,a=setInterval((()=>{n<80?n+=5*Math.random():n<95?n+=.5*Math.random():n<99&&(n+=.1),n>=100&&(clearInterval(a),n=100),Q(Math.min(Math.floor(n),100))}),200),r=yield new Promise((n=>{var r=Math.min(e.size/1e4,5e3);setTimeout((()=>{clearInterval(a),Q(100),n({status:"success",blob:{name:t,properties:{contentLength:e.size,lastModified:(new Date).toISOString(),contentType:e.type||"application/octet-stream"},type:"blob"}})}),1e3+r)}));return"success"===r.status?(y((e=>[...e,r.blob])),!0):(ue(r.message||"Failed to upload file: ".concat(e.name)),!1)}catch(l){return console.error("Error uploading file ".concat(e.name,":"),l),ue(l.message||"An error occurred while uploading file: ".concat(e.name)),!1}}));return function(t){return e.apply(this,arguments)}}(),[h,c]),Se=(0,l.useCallback)(N()((function*(){if(c){x(!0),ue(null);try{if(K.length>0){for(var e=0,t=0;t<K.length;t++){X(t),H(K[t]),Q(0),(yield Te(K[t]))&&e++,t<K.length-1&&(yield new Promise((e=>setTimeout(e,500))))}console.log("Uploaded ".concat(e," of ").concat(K.length," files successfully")),e>0&&setTimeout((()=>{q(!1),H(null),Z([]),Q(0)}),1500)}else if(U){(yield Te(U))&&setTimeout((()=>{q(!1),H(null),Q(0)}),1500)}}catch(n){console.error("Error in upload process:",n),ue(n.message||"An unexpected error occurred during upload")}finally{x(!1)}}})),[h,c,U,K,Te]),we=(0,l.useCallback)((e=>{e&&c&&(console.log("Downloading blob: ".concat(e.name," from container: ").concat(c)),alert("Simulated download of file: ".concat(e.name)))}),[c]),ke=(0,l.useCallback)((e=>{var t;if(e&&c){console.log("Viewing blob: ".concat(e.name," from container: ").concat(c)),ce("https://example.com/preview/".concat(c,"/").concat(e.name));var n=(null===(t=e.properties)||void 0===t?void 0:t.contentType)||"";me(n),oe(!0)}}),[c]),Ie=(0,l.useCallback)(((e,t)=>{e.preventDefault(),i||(ne({x:e.clientX,y:e.clientY}),re(t))}),[i]),Be=(0,l.useCallback)((()=>{ne(null),re(null)}),[]);(0,l.useEffect)((()=>{t&&pe()}),[t,pe]);var Pe=(e,t)=>{if("container"===t)return e;if("directory"===t){var n=e.split("/");return n[n.length-2]||e}var a=e.split("/");return a[a.length-1]||e};return o().createElement(d.Box,{sx:{display:"flex",flexDirection:"column",height:"100%"}},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:2}},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden"}},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"}},o().createElement(d.Typography,{variant:"h6",sx:{flexShrink:0,whiteSpace:"nowrap"}},c?o().createElement(o().Fragment,null,o().createElement(d.Tooltip,{title:"Back to containers"},o().createElement(d.Box,{component:"span",onClick:()=>a(""),sx:{cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline"}}},"Containers"))," / ",o().createElement(d.Tooltip,{title:"Container: ".concat(c)},o().createElement("strong",null,c))):"Azure Blob Containers"),c&&h&&o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",ml:1,overflow:"hidden",flexWrap:"nowrap"}},o().createElement(d.Typography,{component:"span",variant:"body2",sx:{display:"flex",alignItems:"center",color:"text.secondary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}," / ",h.split("/").filter(Boolean).map(((e,t,n)=>{var a=n.slice(0,t+1).join("/")+"/";return o().createElement(o().Fragment,{key:t},t>0&&" / ",o().createElement(d.Tooltip,{title:"Navigate to ".concat(e)},o().createElement(d.Box,{component:"span",onClick:()=>ge(c,a),sx:{cursor:"pointer",color:"primary.main",flexShrink:0,"&:hover":{textDecoration:"underline"}}},e)))})))))),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",ml:2}},c&&o().createElement(d.Tooltip,{title:"Go up"},o().createElement(d.IconButton,{onClick:he,disabled:v,size:"small"},o().createElement(u.ArrowUpward,null))),o().createElement(d.Tooltip,{title:"Refresh"},o().createElement(d.IconButton,{onClick:()=>c?ge(c,h):pe(),disabled:v,size:"small"},o().createElement(u.Refresh,null))),!i&&o().createElement(o().Fragment,null,c?o().createElement(d.Tooltip,{title:"Upload File"},o().createElement(d.IconButton,{onClick:()=>q(!0),disabled:v,size:"small",color:"primary"},o().createElement(u.CloudUpload,null))):o().createElement(d.Tooltip,{title:"New Container"},o().createElement(d.IconButton,{onClick:()=>O(!0),disabled:v||C,size:"small",color:"primary"},o().createElement(u.AddCircleOutline,null))),c&&o().createElement(d.Tooltip,{title:"New Folder"},o().createElement(d.IconButton,{onClick:()=>F(!0),disabled:v,size:"small",color:"primary"},o().createElement(u.CreateNewFolder,null)))))),c&&o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",mb:2}},o().createElement(d.TextField,{fullWidth:!0,placeholder:"Search blobs...",value:S,onChange:e=>w(e.target.value),disabled:v,size:"small",InputProps:{startAdornment:o().createElement(d.InputAdornment,{position:"start"},o().createElement(u.Search,null)),endAdornment:B&&o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.Button,{size:"small",onClick:Ee,disabled:v},"Clear"))},onKeyPress:e=>{"Enter"===e.key&&S&&fe()}}),o().createElement(d.Button,{variant:"contained",onClick:fe,disabled:v||!S,sx:{ml:1}},"Search")),de&&o().createElement(d.Typography,{color:"error",sx:{mb:2}},"Error: ",de),C||v?o().createElement(d.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4}},o().createElement(d.CircularProgress,null)):c?o().createElement(d.TableContainer,{component:d.Paper,sx:{flexGrow:1,overflow:"auto"}},o().createElement(d.Table,{size:"small"},o().createElement(d.TableHead,null,o().createElement(d.TableRow,null,o().createElement(d.TableCell,null,"Name"),o().createElement(d.TableCell,{align:"right"},"Size"),o().createElement(d.TableCell,{align:"right"},"Last Modified"),o().createElement(d.TableCell,{align:"right"},"Actions"))),o().createElement(d.TableBody,null,0===(B?k:g).length?o().createElement(d.TableRow,null,o().createElement(d.TableCell,{colSpan:4,align:"center"},B?"No search results":"No items in this location")):(B?k:g).map((e=>{var t,n,a,l,s;return o().createElement(d.TableRow,{key:e.name,hover:!0,onClick:()=>ye(e),sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onContextMenu:t=>Ie(t,e)},o().createElement(d.TableCell,null,o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(d.ListItemIcon,{sx:{minWidth:36}},"directory"===e.type?o().createElement(u.Folder,{color:"primary"}):o().createElement(u.InsertDriveFile,{sx:{color:(s=(null===(t=e.properties)||void 0===t?void 0:t.contentType)||"",s.startsWith("image/")?"success.main":s.startsWith("text/")?"info.main":s.includes("spreadsheet")||s.includes("excel")?"success.dark":s.includes("pdf")?"error.main":s.includes("zip")||s.includes("compressed")?"warning.dark":s.includes("json")||s.includes("xml")?"secondary.main":"info.main")}})),o().createElement(d.Box,null,o().createElement(d.Typography,{variant:"body2",sx:{fontWeight:500}},Pe(e.name,e.type)),"blob"===e.type&&(null===(n=e.properties)||void 0===n?void 0:n.contentType)&&o().createElement(d.Typography,{variant:"caption",color:"text.secondary"},e.properties.contentType)))),o().createElement(d.TableCell,{align:"right"},"directory"===e.type?"-":o().createElement(d.Typography,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:500,color:"text.secondary"}},_e((null===(a=e.properties)||void 0===a?void 0:a.contentLength)||0))),o().createElement(d.TableCell,{align:"right"},o().createElement(d.Typography,{variant:"body2",color:"text.secondary"},Le(null===(l=e.properties)||void 0===l?void 0:l.lastModified))),o().createElement(d.TableCell,{align:"right"},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},"blob"===e.type&&o().createElement(o().Fragment,null,o().createElement(d.Tooltip,{title:"View"},o().createElement(d.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),ke(e)}},o().createElement(u.Visibility,{fontSize:"small"}))),o().createElement(d.Tooltip,{title:"Download"},o().createElement(d.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),we(e)}},o().createElement(u.Download,{fontSize:"small"}))),o().createElement(d.Tooltip,{title:"Select this file"},o().createElement(d.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),r({containerName:c,path:h,blobName:e.name,blobProperties:e.properties})}},o().createElement(u.CheckCircle,{fontSize:"small"})))),!i&&o().createElement(d.Tooltip,{title:"More actions"},o().createElement(d.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),Ie(t,e)}},o().createElement(u.MoreVert,{fontSize:"small"}))))))}))))):o().createElement(d.TableContainer,{component:d.Paper,sx:{flexGrow:1,overflow:"auto"}},o().createElement(d.Table,{size:"small"},o().createElement(d.TableHead,null,o().createElement(d.TableRow,null,o().createElement(d.TableCell,null,"Container Name"),o().createElement(d.TableCell,{align:"right"},"Last Modified"),o().createElement(d.TableCell,{align:"right"},"Actions"))),o().createElement(d.TableBody,null,0===m.length?o().createElement(d.TableRow,null,o().createElement(d.TableCell,{colSpan:3,align:"center"},"No containers found")):m.map((e=>{var t;return o().createElement(d.TableRow,{key:e.name,hover:!0,onClick:()=>ge(e.name,""),sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onContextMenu:t=>Ie(t,Ne(Ne({},e),{},{type:"container"}))},o().createElement(d.TableCell,null,o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(d.ListItemIcon,{sx:{minWidth:36}},o().createElement(u.CloudCircle,{color:"primary"})),o().createElement(d.Typography,{variant:"body2",sx:{fontWeight:500}},e.name))),o().createElement(d.TableCell,{align:"right"},o().createElement(d.Typography,{variant:"body2",color:"text.secondary"},Le(null===(t=e.properties)||void 0===t?void 0:t.lastModified))),o().createElement(d.TableCell,{align:"right"},o().createElement(d.Box,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},o().createElement(d.Tooltip,{title:"Browse container"},o().createElement(d.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),ge(e.name,"")}},o().createElement(u.FolderOpen,{fontSize:"small"}))),o().createElement(d.Tooltip,{title:"Select container"},o().createElement(d.IconButton,{size:"small",color:"primary",onClick:t=>{t.stopPropagation(),a(e.name)}},o().createElement(u.CheckCircle,{fontSize:"small"}))),!i&&o().createElement(d.Tooltip,{title:"More actions"},o().createElement(d.IconButton,{size:"small",onClick:t=>{t.stopPropagation(),Ie(t,Ne(Ne({},e),{},{type:"container"}))}},o().createElement(u.MoreVert,{fontSize:"small"}))))))}))))),o().createElement(d.Menu,{open:Boolean(te),onClose:Be,anchorReference:"anchorPosition",anchorPosition:te?{top:te.y,left:te.x}:void 0},ae&&"container"===ae.type&&o().createElement("div",null,o().createElement(d.MenuItem,{onClick:()=>{ge(ae.name,""),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.FolderOpen,{fontSize:"small",color:"primary"})),"Browse container"),o().createElement(d.MenuItem,{onClick:()=>{a(ae.name),Be()},divider:!0},o().createElement(d.ListItemIcon,null,o().createElement(u.CheckCircle,{fontSize:"small",color:"primary"})),"Select container"),!i&&o().createElement(d.MenuItem,{onClick:()=>{G(ae),L(!0),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete container")),ae&&"directory"===ae.type&&o().createElement("div",null,o().createElement(d.MenuItem,{onClick:()=>{ye(ae),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.FolderOpen,{fontSize:"small",color:"primary"})),"Open folder"),!i&&o().createElement(d.MenuItem,{onClick:()=>{G(ae),L(!0),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete folder")),ae&&"blob"===ae.type&&o().createElement("div",null,o().createElement(d.MenuItem,{onClick:()=>{ke(ae),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.Visibility,{fontSize:"small"})),"View"),o().createElement(d.MenuItem,{onClick:()=>{we(ae),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.Download,{fontSize:"small"})),"Download"),o().createElement(d.MenuItem,{onClick:()=>{r({containerName:c,path:h,blobName:ae.name,blobProperties:ae.properties}),Be()},divider:!0},o().createElement(d.ListItemIcon,null,o().createElement(u.CheckCircle,{fontSize:"small",color:"primary"})),"Select this file"),!i&&o().createElement(d.MenuItem,{onClick:()=>{G(ae),L(!0),Be()}},o().createElement(d.ListItemIcon,null,o().createElement(u.Delete,{fontSize:"small",color:"error"})),"Delete"))),o().createElement(d.Dialog,{open:D,onClose:()=>O(!1)},o().createElement(d.DialogTitle,null,"Create New Container"),o().createElement(d.DialogContent,null,o().createElement(d.DialogContentText,null,"Enter a name for the new container. Container names must be lowercase letters, numbers, or hyphens."),o().createElement(d.TextField,{autoFocus:!0,margin:"dense",id:"container-name",label:"Container Name",type:"text",fullWidth:!0,value:A,onChange:e=>z(e.target.value),error:Boolean(de),helperText:de,disabled:v})),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:()=>O(!1),disabled:v},"Cancel"),o().createElement(d.Button,{onClick:be,color:"primary",disabled:v||!A},v?o().createElement(d.CircularProgress,{size:24}):"Create"))),o().createElement(d.Dialog,{open:M,onClose:()=>F(!1)},o().createElement(d.DialogTitle,null,"Create New Folder"),o().createElement(d.DialogContent,null,o().createElement(d.DialogContentText,null,"Enter a name for the new folder."),o().createElement(d.TextField,{autoFocus:!0,margin:"dense",id:"folder-name",label:"Folder Name",type:"text",fullWidth:!0,value:j,onChange:e=>R(e.target.value),error:Boolean(de),helperText:de,disabled:v})),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:()=>F(!1),disabled:v},"Cancel"),o().createElement(d.Button,{onClick:ve,color:"primary",disabled:v||!j},v?o().createElement(d.CircularProgress,{size:24}):"Create"))),o().createElement(d.Dialog,{open:_,onClose:()=>L(!1)},o().createElement(d.DialogTitle,null,"Confirm Delete"),o().createElement(d.DialogContent,null,o().createElement(d.DialogContentText,null,"Are you sure you want to delete the ","container"===(null===W||void 0===W?void 0:W.type)?"container":"directory"===(null===W||void 0===W?void 0:W.type)?"folder":"file",":",o().createElement(d.Box,{component:"span",sx:{fontWeight:"bold",display:"block",mt:1}},null===W||void 0===W?void 0:W.name),"container"===(null===W||void 0===W?void 0:W.type)&&o().createElement(d.Typography,{color:"error",sx:{mt:2}},"This will delete all blobs in the container!"),"directory"===(null===W||void 0===W?void 0:W.type)&&o().createElement(d.Typography,{color:"error",sx:{mt:2}},"This will delete all contents of the folder!"))),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:()=>L(!1),disabled:v},"Cancel"),o().createElement(d.Button,{onClick:xe,color:"error",disabled:v},v?o().createElement(d.CircularProgress,{size:24}):"Delete"))),o().createElement(d.Dialog,{open:V,onClose:()=>{v||(q(!1),H(null),Q(0))},fullWidth:!0,maxWidth:"md"},o().createElement(d.DialogTitle,null,o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},"Upload Files to Azure Blob Storage",o().createElement(d.IconButton,{onClick:()=>{v||(q(!1),H(null),Q(0))}},o().createElement(u.Close,null)))),o().createElement(d.DialogContent,null,o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Upload Location:"),o().createElement(d.Paper,{variant:"outlined",sx:{p:1.5,mb:2,bgcolor:"background.default"}},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(u.CloudCircle,{color:"primary",sx:{mr:1}}),o().createElement(d.Typography,{sx:{fontWeight:"medium"}},c,h?"/".concat(h):""))),o().createElement(d.Box,{sx:{border:"2px dashed",borderColor:"divider",borderRadius:1,p:3,mb:3,textAlign:"center",transition:"all 0.2s ease","&:hover":{borderColor:"primary.main",bgcolor:"action.hover"},position:"relative"},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor=e=>e.palette.primary.main,e.currentTarget.style.backgroundColor=e=>e.palette.action.hover},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor="",e.currentTarget.style.backgroundColor=""},onDrop:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.style.borderColor="",e.currentTarget.style.backgroundColor="",e.dataTransfer.files&&e.dataTransfer.files.length>0&&Ce(e.dataTransfer.files)}},o().createElement(u.CloudUpload,{color:"primary",sx:{fontSize:40,mb:2}}),o().createElement(d.Typography,{variant:"h6",gutterBottom:!0},"Drag & Drop Files Here"),o().createElement(d.Typography,{variant:"body2",color:"textSecondary",paragraph:!0},"or"),o().createElement(d.Button,{variant:"contained",component:"label",startIcon:o().createElement(u.CloudUpload,null)},"Browse Files",o().createElement("input",{type:"file",hidden:!0,multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&Ce(e.target.files)}})),o().createElement(d.Typography,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:2}},"Supported file types: CSV, JSON, XML, PDF, Images, Text files")),U&&o().createElement(d.Box,null,o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"File Preview"),o().createElement(d.Paper,{variant:"outlined",sx:{p:2,mb:2}},o().createElement(d.Grid,{container:!0,spacing:2,alignItems:"center"},o().createElement(d.Grid,{item:!0,xs:12,md:6},(()=>{var e=n(829).Z,{generateFileMetadata:t}=n(939);t(U);return o().createElement(e,{file:U,showActions:!1,showPreview:!1,variant:"outlined"})})()),o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"File Details"),o().createElement(d.Box,{sx:{mb:2}},o().createElement(d.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},o().createElement("span",null,"File name:"),o().createElement("span",{style:{fontWeight:"medium"}},U.name)),o().createElement(d.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},o().createElement("span",null,"Size:"),o().createElement("span",null,_e(U.size))),o().createElement(d.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},o().createElement("span",null,"Type:"),o().createElement("span",null,U.type||"Unknown")),o().createElement(d.Typography,{variant:"body2",sx:{display:"flex",justifyContent:"space-between"}},o().createElement("span",null,"Last modified:"),o().createElement("span",null,new Date(U.lastModified).toLocaleString()))),(()=>{var{isPreviewSupported:e,getFileTypeDescription:t}=n(939),a=U.type,r=e(a);return o().createElement(d.Box,{sx:{mb:2}},r?o().createElement(d.Alert,{severity:"success",icon:o().createElement(u.CheckCircle,null)},"This file type (",t(a),") is fully supported."):o().createElement(d.Alert,{severity:"warning"},o().createElement(d.AlertTitle,null,"Limited Support"),"This file type may have limited preview capabilities in the system."))})(),o().createElement(d.Button,{fullWidth:!0,variant:"outlined",color:"error",startIcon:o().createElement(u.Close,null),onClick:()=>H(null),sx:{mt:1}},"Remove File")))),Y>0&&o().createElement(d.Box,{sx:{mt:2,mb:2}},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0,display:"flex",justifyContent:"space-between"},o().createElement("span",null,"Upload Progress"),o().createElement("span",null,Y,"%")),o().createElement(d.LinearProgress,{variant:"determinate",value:Y,sx:{height:10,borderRadius:5,mb:1}}),o().createElement(d.Typography,{variant:"caption",color:"textSecondary"},Y<100?"Uploading ".concat(U.name,"..."):"Successfully uploaded ".concat(U.name)),K.length>1&&o().createElement(d.Box,{sx:{mt:1,display:"flex",alignItems:"center",justifyContent:"space-between"}},o().createElement(d.Typography,{variant:"caption",color:"textSecondary"},"File ",J+1," of ",K.length),o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},Array.from({length:Math.min(K.length,5)}).map(((e,t)=>{var n="grey.300";return t<J?n="success.main":t===J&&(n=100===Y?"success.main":"primary.main"),o().createElement(d.Box,{key:t,sx:{width:8,height:8,borderRadius:"50%",bgcolor:n,mx:.5}})})),K.length>5&&o().createElement(d.Typography,{variant:"caption",color:"textSecondary",sx:{ml:1}},"+",K.length-5," more")))),o().createElement(d.Box,{sx:{mt:3}},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Upload Options"),o().createElement(d.FormControlLabel,{control:o().createElement(d.Checkbox,{checked:$.overwriteExisting,onChange:()=>ee((e=>Ne(Ne({},e),{},{overwriteExisting:!e.overwriteExisting}))),name:"overwriteExisting"}),label:"Overwrite if file already exists"}),o().createElement(d.FormControlLabel,{control:o().createElement(d.Checkbox,{checked:$.calculateMD5,onChange:()=>ee((e=>Ne(Ne({},e),{},{calculateMD5:!e.calculateMD5}))),name:"calculateMD5"}),label:"Calculate and store content MD5 (for integrity verification)"}),K.length>1&&o().createElement(d.Box,{sx:{mt:2,p:1,bgcolor:"info.lightest",borderRadius:1}},o().createElement(d.Typography,{variant:"body2",gutterBottom:!0,sx:{fontWeight:"medium",color:"info.main",display:"flex",alignItems:"center"}},o().createElement(u.Info,{fontSize:"small",sx:{mr:.5}}),"Batch Upload Information"),o().createElement(d.Typography,{variant:"body2"},K.length," files selected for upload (",_e(K.reduce(((e,t)=>e+t.size),0)),")"),o().createElement(d.Button,{size:"small",variant:"text",color:"primary",onClick:()=>{Z([]),H(null)},sx:{mt:1},startIcon:o().createElement(u.Close,{fontSize:"small"})},"Clear Batch Selection"))))),o().createElement(d.DialogActions,{sx:{px:3,py:2}},o().createElement(d.Button,{onClick:()=>{q(!1),H(null),Q(0)},disabled:v},"Cancel"),o().createElement(d.Button,{onClick:Se,variant:"contained",color:"primary",disabled:v||!U||Y>0,startIcon:v?o().createElement(d.CircularProgress,{size:20}):o().createElement(u.CloudUpload,null)},v?"Uploading...":K.length>1?"Upload ".concat(K.length," Files"):"Upload File"))),o().createElement(d.Dialog,{open:le,onClose:()=>oe(!1),fullWidth:!0,maxWidth:"lg"},o().createElement(d.DialogContent,{dividers:!0,sx:{p:0}},((e,t)=>{var a,r,l=n(345).Z,i=ae?{name:Pe(ae.name,ae.type),type:t,size:(null===(a=ae.properties)||void 0===a?void 0:a.contentLength)||0,lastModified:null===(r=ae.properties)||void 0===r?void 0:r.lastModified}:null,c="text/plain"===t||"text/csv"===t||"application/json"===t||"application/xml"===t||"text/xml"===t?(()=>{var e,n;return"text/plain"===t?"This is a simulated preview of a plain text file.\n\nFilename: ".concat(ae.name,"\nSize: ").concat(_e((null===(e=ae.properties)||void 0===e?void 0:e.contentLength)||0),"\nLast Modified: ").concat(Le(null===(n=ae.properties)||void 0===n?void 0:n.lastModified),"\n\nIn a production environment, this would fetch the actual file content from the Azure Blob storage."):"text/csv"===t?'id,name,email,department\n1,"John Smith",john.smith@example.com,Marketing\n2,"Jane Doe",jane.doe@example.com,Engineering\n3,"Robert Johnson",robert.johnson@example.com,Finance\n4,"Sarah Williams",sarah.williams@example.com,Human Resources\n5,"Michael Brown",michael.brown@example.com,Sales':"application/json"===t?JSON.stringify({id:12345,name:"Sample JSON Data",items:[{id:1,value:"First item"},{id:2,value:"Second item"},{id:3,value:"Third item"}],metadata:{created:(new Date).toISOString(),version:"1.0.0",source:"Azure Blob Storage"}},null,2):"application/xml"===t||"text/xml"===t?'<?xml version="1.0" encoding="UTF-8"?>\n<root>\n  <item id="1">\n    <name>First Item</name>\n    <value>100</value>\n  </item>\n  <item id="2">\n    <name>Second Item</name>\n    <value>200</value>\n  </item>\n  <metadata>\n    <created>'.concat((new Date).toISOString(),"</created>\n    <source>Azure Blob Storage</source>\n  </metadata>\n</root>"):"This is a simulated preview of content type: ".concat(t,"\n\nIn a production environment, this would display the actual file content.")})():null;return o().createElement(l,{file:i,url:e,content:c,mimeType:t,filename:null===i||void 0===i?void 0:i.name,onDownload:()=>we(ae),maxHeight:"600px",fullWidth:!0})})(ie,se)),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:()=>oe(!1)},"Close"),ae&&"blob"===ae.type&&o().createElement(o().Fragment,null,o().createElement(d.Button,{onClick:()=>{we(ae)},startIcon:o().createElement(u.Download,null)},"Download"),o().createElement(d.Button,{onClick:()=>{r({containerName:c,path:h,blobName:ae.name,blobProperties:ae.properties}),oe(!1)},variant:"contained",color:"primary",startIcon:o().createElement(u.CheckCircle,null)},"Select This File")))))};We.propTypes={config:m().object.isRequired,onSelectContainer:m().func.isRequired,onSelectBlob:m().func.isRequired,readOnly:m().bool,selectedContainer:m().string,selectedPath:m().string};const Ge=We;var Ve=n(450);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=e=>{var{onCredentialsSaved:t,onCredentialsLoaded:n,readOnly:a=!1,showSaveControls:r=!0,initialVisible:i=!1}=e,[c,s]=(0,l.useState)({authMethod:"connectionString",connectionString:"",accountName:"",accountKey:"",sasToken:"",tenantId:"",clientId:"",clientSecret:"",useManagedIdentity:!1}),[m,p]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),[E,b]=(0,l.useState)(i),[v,x]=(0,l.useState)(!1),[C,T]=(0,l.useState)(!1),[S,w]=(0,l.useState)(null),[k,I]=(0,l.useState)(null),[B,P]=(0,l.useState)(null),[D,O]=(0,l.useState)(null);(0,l.useEffect)((()=>{(function(){var e=N()((function*(){y(!0);try{var e=yield Ve.x.hasCredentials("azure");if(T(e),e&&E){var t=yield Ve.x.getCredentials("azure",!0);if(t.success&&t.data){var a="connectionString",r={authMethod:a=t.data.connection_string?"connectionString":t.data.sas_token?"sasToken":t.data.client_id&&t.data.client_secret?"servicePrincipal":t.data.account_key?"accountKey":"managedIdentity",connectionString:t.data.connection_string||"",accountName:t.data.account_name||"",accountKey:t.data.account_key||"",sasToken:t.data.sas_token||"",tenantId:t.data.tenant_id||"",clientId:t.data.client_id||"",clientSecret:t.data.client_secret||"",useManagedIdentity:"managedIdentity"===a};s(r),w(t.data.last_updated),n&&n(r)}}}catch(l){console.error("Error loading credentials:",l),P("Failed to load stored credentials")}finally{y(!1)}}));return function(){return e.apply(this,arguments)}})()()}),[E,n]);var A=e=>{var{name:t,value:n,type:a,checked:r}=e.target,l="checkbox"===a?r:n;s((e=>{if("authMethod"===t){var n=Ue(Ue({},e),{},{[t]:l,connectionString:"",accountKey:"",sasToken:"",clientId:"",clientSecret:""});return n.useManagedIdentity="managedIdentity"===l,n}return Ue(Ue({},e),{},{[t]:l})})),I(null),P(null),O(null)},z=()=>{p(!m)},M=function(){var e=N()((function*(){f(!0),I(null),P(null);try{var e={connection_string:"connectionString"===c.authMethod?c.connectionString:"",account_name:c.accountName,account_key:"accountKey"===c.authMethod?c.accountKey:"",sas_token:"sasToken"===c.authMethod?c.sasToken:"",tenant_id:"servicePrincipal"===c.authMethod?c.tenantId:"",client_id:"servicePrincipal"===c.authMethod?c.clientId:"",client_secret:"servicePrincipal"===c.authMethod?c.clientSecret:"",use_managed_identity:"managedIdentity"===c.authMethod},n=yield Ve.x.storeCredentials("azure",e);n.success?(I("Credentials saved successfully"),T(!0),w((new Date).toISOString()),t&&t(c)):P(n.message||"Failed to save credentials")}catch(a){console.error("Error saving credentials:",a),P("An error occurred while saving credentials")}finally{f(!1)}}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=N()((function*(){y(!0),I(null),P(null);try{var e=yield Ve.x.deleteCredentials("azure");e.success?(I("Credentials deleted successfully"),T(!1),w(null),s({authMethod:"connectionString",connectionString:"",accountName:"",accountKey:"",sasToken:"",tenantId:"",clientId:"",clientSecret:"",useManagedIdentity:!1}),t&&t(null)):P(e.message||"Failed to delete credentials")}catch(n){console.error("Error deleting credentials:",n),P("An error occurred while deleting credentials")}finally{y(!1),x(!1)}}));return function(){return e.apply(this,arguments)}}(),j=(0,l.useCallback)(N()((function*(){y(!0),I(null),P(null),O(null);try{var e={connection_string:"connectionString"===c.authMethod?c.connectionString:"",account_name:c.accountName,account_key:"accountKey"===c.authMethod?c.accountKey:"",sas_token:"sasToken"===c.authMethod?c.sasToken:"",tenant_id:"servicePrincipal"===c.authMethod?c.tenantId:"",client_id:"servicePrincipal"===c.authMethod?c.clientId:"",client_secret:"servicePrincipal"===c.authMethod?c.clientSecret:"",use_managed_identity:"managedIdentity"===c.authMethod},t=yield Ve.x.testCredentials("azure",e);O(t),t.success?I("Connection successful"):P(t.message||"Connection failed")}catch(n){console.error("Error testing credentials:",n),P("An error occurred during connection test"),O({success:!1,message:"An error occurred during connection test",details:{error:n.message}})}finally{y(!1)}})),[c]),R=(0,l.useCallback)((()=>{switch(c.authMethod){case"connectionString":return""!==c.connectionString.trim();case"accountKey":return""!==c.accountName.trim()&&""!==c.accountKey.trim();case"sasToken":return""!==c.accountName.trim()&&""!==c.sasToken.trim();case"servicePrincipal":return""!==c.accountName.trim()&&""!==c.tenantId.trim()&&""!==c.clientId.trim()&&""!==c.clientSecret.trim();case"managedIdentity":return""!==c.accountName.trim();default:return!1}}),[c])(),_="connectionString"===c.authMethod,L="accountKey"===c.authMethod,W="sasToken"===c.authMethod,G="servicePrincipal"===c.authMethod,V="connectionString"!==c.authMethod;return o().createElement(d.Card,{variant:"outlined"},o().createElement(d.CardHeader,{title:o().createElement(d.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},o().createElement(d.Box,{sx:{display:"flex",alignItems:"center"}},o().createElement(u.Key,{sx:{mr:1,color:"primary.main"}}),o().createElement(d.Typography,{variant:"h6"},"Azure Blob Storage Credentials"),C&&o().createElement(d.Chip,{label:"Credentials Stored",color:"success",size:"small",icon:o().createElement(u.LockOutlined,null),sx:{ml:2}})),o().createElement(d.IconButton,{onClick:()=>{b(!E)}},E?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null))),subheader:C?o().createElement(d.Typography,{variant:"body2",color:"text.secondary"},"Last Updated: ",(e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(t){return"Unknown"}})(S)):o().createElement(d.Typography,{variant:"body2",color:"text.secondary"},"No stored credentials")}),o().createElement(d.Collapse,{in:E},o().createElement(d.CardContent,null,o().createElement(d.Box,{sx:{mb:3}},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Authentication Method"),o().createElement(d.FormControl,{component:"fieldset"},o().createElement(d.RadioGroup,{row:!0,name:"authMethod",value:c.authMethod,onChange:A},[{value:"connectionString",label:"Connection String"},{value:"accountKey",label:"Account Name & Key"},{value:"sasToken",label:"SAS Token"},{value:"servicePrincipal",label:"Service Principal"},{value:"managedIdentity",label:"Managed Identity"}].map((e=>o().createElement(d.FormControlLabel,{key:e.value,value:e.value,control:o().createElement(d.Radio,null),label:e.label,disabled:g||a})))))),o().createElement(d.Grid,{container:!0,spacing:2},_&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"connectionString",label:"Connection String",value:c.connectionString,onChange:A,type:m?"text":"password",disabled:g||a,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:z,edge:"end"},m?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)),o().createElement(d.Tooltip,{title:"The connection string for your Azure Storage account. Format: DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...;EndpointSuffix=core.windows.net"},o().createElement(d.IconButton,{edge:"end"},o().createElement(u.Info,null))))}}),o().createElement(d.FormHelperText,null,"Full Azure Storage connection string with account name and key"))),V&&o().createElement(d.Grid,{item:!0,xs:12,md:L||W?6:12},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"accountName",label:"Storage Account Name",value:c.accountName,onChange:A,disabled:g||a}),o().createElement(d.FormHelperText,null,"Name of your Azure Storage account"))),L&&o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"accountKey",label:"Account Key",value:c.accountKey,onChange:A,type:m?"text":"password",disabled:g||a,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:z,edge:"end"},m?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}),o().createElement(d.FormHelperText,null,"Azure Storage account access key"))),W&&o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"sasToken",label:"SAS Token",value:c.sasToken,onChange:A,type:m?"text":"password",disabled:g||a,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:z,edge:"end"},m?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}),o().createElement(d.FormHelperText,null,"Shared Access Signature token (include the leading '?')"))),G&&o().createElement(o().Fragment,null,o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"tenantId",label:"Tenant ID",value:c.tenantId,onChange:A,disabled:g||a}),o().createElement(d.FormHelperText,null,"Azure AD tenant ID"))),o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"clientId",label:"Client ID",value:c.clientId,onChange:A,disabled:g||a}),o().createElement(d.FormHelperText,null,"Azure AD application (client) ID"))),o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"clientSecret",label:"Client Secret",value:c.clientSecret,onChange:A,type:m?"text":"password",disabled:g||a,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:z,edge:"end"},m?o().createElement(u.VisibilityOff,null):o().createElement(u.Visibility,null)))}}),o().createElement(d.FormHelperText,null,"Azure AD application client secret")))),"managedIdentity"===c.authMethod&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.Paper,{variant:"outlined",sx:{p:2,bgcolor:"background.default"}},o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},"Using Azure Managed Identity for authentication. No additional credentials required. The application will use the system-assigned identity in the Azure environment.")))),(k||B||D)&&o().createElement(d.Box,{sx:{mt:3}},k&&!B&&o().createElement(d.Alert,{severity:"success",sx:{mb:2}},k),B&&o().createElement(d.Alert,{severity:"error",sx:{mb:2}},B),D&&o().createElement(d.Alert,{severity:D.success?"success":"error",sx:{mb:2}},o().createElement(d.AlertTitle,null,D.success?"Connection Test Successful":"Connection Test Failed"),o().createElement(d.Typography,{variant:"body2"},D.message),D.details&&o().createElement(d.Box,{sx:{mt:1}},D.success?o().createElement(o().Fragment,null,D.details.containers&&o().createElement(d.Typography,{variant:"body2"},"Found ",D.details.containers," container(s)"),D.details.account&&o().createElement(d.Typography,{variant:"body2"},"Account: ",D.details.account),D.details.permissions&&o().createElement(d.Typography,{variant:"body2"},"Permissions: ",D.details.permissions.join(", "))):o().createElement(o().Fragment,null,D.details.error&&o().createElement(d.Typography,{variant:"body2"},"Error: ",D.details.error),D.details.code&&o().createElement(d.Typography,{variant:"body2"},"Code: ",D.details.code))))),r&&o().createElement(d.Box,{sx:{display:"flex",justifyContent:"space-between",mt:3}},o().createElement(d.Box,null,o().createElement(d.Button,{variant:"contained",color:"primary",disabled:!R||g||a,onClick:j,startIcon:g?o().createElement(d.CircularProgress,{size:20}):o().createElement(u.Refresh,null)},"Test Connection")),o().createElement(d.Box,null,C&&o().createElement(d.Button,{variant:"outlined",color:"error",onClick:()=>x(!0),disabled:g||a,startIcon:o().createElement(u.Delete,null),sx:{mr:1}},"Delete"),o().createElement(d.Button,{variant:"contained",color:"primary",disabled:!R||g||a,onClick:M,startIcon:h?o().createElement(d.CircularProgress,{size:20}):o().createElement(u.Save,null)},h?"Saving...":C?"Update":"Save"))))),o().createElement(d.Dialog,{open:v,onClose:()=>x(!1)},o().createElement(d.DialogTitle,null,"Delete Credentials?"),o().createElement(d.DialogContent,null,o().createElement(d.DialogContentText,null,"Are you sure you want to delete the stored Azure Blob Storage credentials? This action cannot be undone.")),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:()=>x(!1),autoFocus:!0},"Cancel"),o().createElement(d.Button,{onClick:F,color:"error"},"Delete"))))};He.propTypes={onCredentialsSaved:m().func,onCredentialsLoaded:m().func,readOnly:m().bool,showSaveControls:m().bool,initialVisible:m().bool};const Ke=He,Ze=require("@mui/material/Checkbox");var Je=n.n(Ze);const Xe=require("@mui/material/ListItem");var Ye=n.n(Xe);const Qe=require("@mui/material/ListItemIcon");var $e=n.n(Qe);const et=require("@mui/material/ListItemText");var tt=n.n(et);const nt=require("@mui/material/List");var at=n.n(nt);const rt=require("@mui/icons-material/InsertDriveFile");var lt=n.n(rt);const ot=require("@mui/icons-material/Warning");var it=n.n(ot),ct=n(854),st=n.n(ct);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=e=>{if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},pt=e=>e?new Date(e).toLocaleString():"Unknown";const gt=e=>{var t,{config:n,onChange:a,errors:r={},readOnly:i=!1,isSuperUser:c=!1}=e,[s,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1),[g,y]=(0,l.useState)(0),[h,f]=(0,l.useState)(!1),[E,b]=(0,l.useState)(null),[v,x]=(0,l.useState)(!1),[C,T]=(0,l.useState)(!1),[S,w]=(0,l.useState)(!1),[k,I]=(0,l.useState)([]),[B,P]=(0,l.useState)(!1),[D,O]=(0,l.useState)(!1),A=dt(dt({},{authMethod:"connectionString",connectionString:"",accountName:"",accountKey:"",sasToken:"",useManagedIdentity:!1,containerName:"",filePattern:"*.csv",path:"",createContainerIfNotExists:!1}),n),z=e=>{var{name:t,value:n,type:r,checked:l}=e.target,o="checkbox"===r?l:n,i=dt(dt({},A),{},{[t]:o});"authMethod"===t&&(i=dt(dt({},i),{},{connectionString:"",accountName:"",accountKey:"",sasToken:""})),b(null),a(i)},M=()=>{m(!s)},F=e=>{if(e){var t=dt({},A);e.connectionString?(t.authMethod="connectionString",t.connectionString=e.connectionString):e.sasToken?(t.authMethod="sasToken",t.accountName=e.accountName,t.sasToken=e.sasToken):e.accountKey?(t.authMethod="accountKey",t.accountName=e.accountName,t.accountKey=e.accountKey):e.useManagedIdentity&&(t.authMethod="managedIdentity",t.accountName=e.accountName,t.useManagedIdentity=!0),a(t),P(!0)}},j=()=>{p(!0)},R=()=>{p(!1)},_=(0,l.useCallback)((e=>{e&&a(dt(dt({},A),{},{containerName:e}))}),[A,a]),L=(0,l.useCallback)((e=>{if(e){var t=e.blobName,n=e.containerName,r=t.lastIndexOf("/"),l=r>0?t.substring(0,r+1):"",o=r>0?t.substring(r+1):t,i=o.lastIndexOf("."),c=i>0?o.substring(i):"",s=c?"*".concat(c):o;a(dt(dt({},A),{},{containerName:n,path:l,filePattern:s}))}}),[A,a]),W=(0,l.useCallback)(N()((function*(){if(q()){f(!0),b(null);try{console.log("Testing connection with config:",A);var e=yield new Promise((e=>{var t=function(){var e=N()((function*(){var e=[];if(yield G(400),"connectionString"===A.authMethod){var t=A.connectionString.includes("AccountName="),n=A.connectionString.includes("AccountKey="),a=A.connectionString.includes("EndpointSuffix=")||A.connectionString.includes("BlobEndpoint=");if(e.push({name:"Validate connection string format",success:t&&n&&a,message:t&&n&&a?"Connection string format is valid":"Connection string is missing required components",details:{hasAccountName:t,hasAccountKey:n,hasEndpoint:a}}),!t||!n||!a)return{success:!1,message:"Invalid connection string format",diagnosticSteps:e,details:{missingComponents:[...t?[]:["AccountName"],...n?[]:["AccountKey"],...a?[]:["EndpointSuffix or BlobEndpoint"]]}}}else if("accountKey"===A.authMethod){var r=A.accountName.length>3,l=A.accountKey.length>10;if(e.push({name:"Validate account credentials",success:r&&l,message:r&&l?"Account name and key format validated":"Invalid account name or key format",details:{accountNameValid:r,accountKeyValid:l}}),!r||!l)return{success:!1,message:"Invalid account credentials",diagnosticSteps:e,details:{issues:[...r?[]:["Account name is too short or invalid"],...l?[]:["Account key is too short or invalid"]]}}}else if("sasToken"===A.authMethod){var o=A.accountName.length>3,i=A.sasToken.startsWith("?")&&A.sasToken.includes("sig=");if(e.push({name:"Validate SAS token credentials",success:o&&i,message:o&&i?"Account name and SAS token format validated":"Invalid SAS token configuration",details:{accountNameValid:o,sasTokenValid:i}}),!o||!i)return{success:!1,message:"Invalid SAS token configuration",diagnosticSteps:e,details:{issues:[...o?[]:["Account name is too short or invalid"],...i?[]:["SAS token must start with ? and include a signature (sig=)"]]}}}else if("managedIdentity"===A.authMethod){var c=A.accountName.length>3;if(e.push({name:"Validate managed identity configuration",success:c,message:c?"Account name format validated":"Invalid account name for managed identity",details:{accountNameValid:c}}),!c)return{success:!1,message:"Invalid managed identity configuration",diagnosticSteps:e,details:{issues:["Account name is required even when using managed identity"]}}}yield G(600);var s=Math.random()>.1;if(e.push({name:"Connect to storage account",success:s,message:s?"Successfully connected to storage account":"Failed to connect to storage account",details:{timestamp:(new Date).toISOString(),authMethod:A.authMethod}}),!s)return{success:!1,message:"Could not connect to storage account",diagnosticSteps:e,details:{possibleIssues:["Network connectivity problem","Invalid credentials","Account firewall restrictions","Account may not exist"]}};yield G(500);var m=""!==A.containerName&&Math.random()>.1;if(e.push({name:"Verify container access",success:m,message:A.containerName?"Container '".concat(A.containerName,m?"' exists and is accessible":"' does not exist or is not accessible"):"No container specified, skipping container verification",details:{containerName:A.containerName||"Not specified",createIfNotExists:A.createContainerIfNotExists}}),A.containerName&&!m&&!A.createContainerIfNotExists)return{success:!1,message:"Container '".concat(A.containerName,"' does not exist or is not accessible"),diagnosticSteps:e,details:{recommendation:'Enable "Create container if it doesn\'t exist" option or choose an existing container'}};yield G(400);var d=A.filePattern&&""!==A.filePattern.trim(),u=d&&!A.filePattern.includes("\\");e.push({name:"Validate file pattern",success:!d||u,message:d?"File pattern '".concat(A.filePattern,u?"' is valid":"' contains invalid characters"):"No file pattern specified, will match all files",details:{pattern:A.filePattern||"Not specified",valid:!d||u}}),yield G(600);var p=!0,g="sasToken"!==A.authMethod||A.sasToken.includes("sp=")&&A.sasToken.includes("w");return e.push({name:"Verify storage permissions",success:p,message:g?"Account has read and write permissions":"Account has read permissions only",details:{permissions:{read:p,write:g}}}),{success:!0,message:"Connection successful! All diagnostics passed.",diagnosticSteps:e,details:{timestamp:(new Date).toISOString(),readPermission:p,writePermission:g,containerExists:m||!A.containerName}}}));return function(){return e.apply(this,arguments)}}();setTimeout(N()((function*(){var n=yield t();e(n)})),500)}));b(e),x(!0)}catch(t){console.error("Error testing connection:",t),b({success:!1,message:t.message||"An unexpected error occurred",diagnosticSteps:[{name:"Initialize connection test",success:!1,message:"Error occurred during test initialization",details:{error:t.message||"Unknown error"}}]}),x(!0)}finally{f(!1)}}})),[A]),G=e=>new Promise((t=>setTimeout(t,e))),V=(0,l.useCallback)(N()((function*(){if(A.containerName&&A.filePattern){w(!0),I([]);try{console.log("Previewing pattern: ".concat(A.filePattern," in container: ").concat(A.containerName," with path: ").concat(A.path));var e=yield new Promise((e=>{setTimeout((()=>{var t=A.filePattern.replace(/\./g,"\\.").replace(/\*/g,".*"),n=new RegExp("^".concat(t,"$")),a=["data.csv","sample.csv","employees.csv","data.json","employees.json","report.pdf","summary.xlsx","log.txt"].filter((e=>n.test(e))).map((e=>({name:A.path?"".concat(A.path).concat(e):e,size:Math.floor(1024*Math.random()*1024),lastModified:(new Date).toISOString()})));e(a)}),1e3)}));I(e),T(!0)}catch(t){console.error("Error previewing pattern:",t)}finally{w(!1)}}})),[A.containerName,A.filePattern,A.path]),q=(0,l.useCallback)((()=>"connectionString"===A.authMethod?A.connectionString.length>0:"accountKey"===A.authMethod?A.accountName.length>0&&A.accountKey.length>0:"sasToken"===A.authMethod?A.accountName.length>0&&A.sasToken.length>0:"managedIdentity"===A.authMethod&&A.accountName.length>0),[A]),U=[{value:"connectionString",label:"Connection String"},{value:"accountKey",label:"Account Name & Key"},{value:"sasToken",label:"SAS Token"},{value:"managedIdentity",label:"Managed Identity"}],H="connectionString"===A.authMethod,K="accountKey"===A.authMethod,Z="sasToken"===A.authMethod,J="managedIdentity"===A.authMethod,X="accountKey"===A.authMethod||"sasToken"===A.authMethod||"managedIdentity"===A.authMethod;return o().createElement(d.Box,{sx:{mt:2}},o().createElement(d.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},o().createElement(d.Typography,{variant:"subtitle1"},"Azure Blob Storage Configuration"),o().createElement(d.Box,null,!i&&o().createElement(o().Fragment,null,o().createElement(d.Button,{variant:"outlined",color:"primary",onClick:W,disabled:h||!q(),startIcon:h?o().createElement(d.CircularProgress,{size:20}):E?E.success?o().createElement(Be(),null):o().createElement(De(),null):null,sx:{mr:1}},h?"Testing...":"Test Connection"),o().createElement(d.Button,{variant:"outlined",color:B?"success":"primary",onClick:()=>{O(!D)},startIcon:o().createElement(je(),null),disabled:h,sx:{mr:1}},B?"Manage Credentials":"Set Up Credentials")),o().createElement(d.Button,{variant:"contained",color:"primary",onClick:j,startIcon:o().createElement(Se(),null),disabled:i||h},"Browse Storage"))),D&&o().createElement(d.Box,{mb:3},o().createElement(Ke,{onCredentialsLoaded:F,onCredentialsSaved:F,readOnly:i,initialVisible:!0})),c&&o().createElement(d.Paper,{elevation:0,variant:"outlined",sx:{p:2,mb:3}},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Authentication Settings"),o().createElement(d.Grid,{container:!0,spacing:2},o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{component:"fieldset"},o().createElement(d.Typography,{variant:"body2",color:"textSecondary",gutterBottom:!0},"Authentication Method"),o().createElement(d.RadioGroup,{name:"authMethod",value:A.authMethod,onChange:z,row:!0,disabled:i},U.map((e=>o().createElement(d.FormControlLabel,{key:e.value,value:e.value,control:o().createElement(d.Radio,null),label:e.label,disabled:i})))))),H&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.connectionString},o().createElement(d.TextField,{name:"connectionString",label:"Connection String",value:A.connectionString,onChange:z,type:s?"text":"password",error:!!r.connectionString,helperText:r.connectionString,disabled:i,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:M,edge:"end"},s?o().createElement(Ce(),null):o().createElement(ve(),null)),o().createElement(d.Tooltip,{title:"The connection string for your Azure Storage account. Format: DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...;EndpointSuffix=core.windows.net"},o().createElement(d.IconButton,{edge:"end"},o().createElement(Ee(),null))))}}))),X&&o().createElement(d.Grid,{item:!0,xs:12,md:K?6:12},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.accountName},o().createElement(d.TextField,{name:"accountName",label:"Storage Account Name",value:A.accountName,onChange:z,error:!!r.accountName,helperText:r.accountName,disabled:i}))),K&&o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.accountKey},o().createElement(d.TextField,{name:"accountKey",label:"Account Key",value:A.accountKey,onChange:z,type:s?"text":"password",error:!!r.accountKey,helperText:r.accountKey,disabled:i,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:M,edge:"end"},s?o().createElement(Ce(),null):o().createElement(ve(),null)))}}))),Z&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.sasToken},o().createElement(d.TextField,{name:"sasToken",label:"SAS Token",value:A.sasToken,onChange:z,type:s?"text":"password",error:!!r.sasToken,helperText:r.sasToken||"Include the leading '?' character",disabled:i,InputProps:{endAdornment:o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.IconButton,{onClick:M,edge:"end"},s?o().createElement(Ce(),null):o().createElement(ve(),null)),o().createElement(d.Tooltip,{title:"A Shared Access Signature (SAS) token providing permissions to the storage account or container"},o().createElement(d.IconButton,{edge:"end"},o().createElement(Ee(),null))))}}))),J&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.Paper,{variant:"outlined",sx:{p:2,bgcolor:"background.default"}},o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},"Using Azure Managed Identity for authentication. No additional credentials required. The application will use the identity assigned to the deployment environment."))))),o().createElement(d.Paper,{elevation:0,variant:"outlined",sx:{p:2}},o().createElement(d.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},o().createElement(d.Typography,{variant:"subtitle2"},"Container Settings"),!i&&q()&&o().createElement(d.Button,{variant:"outlined",size:"small",onClick:W,disabled:h,startIcon:h?o().createElement(d.CircularProgress,{size:16}):E?E.success?o().createElement(Be(),{size:"small"}):o().createElement(De(),{size:"small"}):null},"Test Connection")),o().createElement(d.Grid,{container:!0,spacing:2},o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.containerName},o().createElement(d.TextField,{name:"containerName",label:"Container Name",value:A.containerName,onChange:z,error:!!r.containerName,helperText:r.containerName||"Name of the Azure Blob container",disabled:i,InputProps:{endAdornment:A.containerName?o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.Tooltip,{title:"Browse container"},o().createElement(d.IconButton,{edge:"end",onClick:j,disabled:i},o().createElement(Se(),null)))):null}}))),o().createElement(d.Grid,{item:!0,xs:12,md:6},o().createElement(d.FormControl,{fullWidth:!0,error:!!r.filePattern},o().createElement(d.TextField,{name:"filePattern",label:"File Pattern",value:A.filePattern,onChange:z,error:!!r.filePattern,helperText:r.filePattern||"Example: *.csv, employee-*.json",disabled:i,InputProps:{endAdornment:A.containerName&&A.filePattern?o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.Tooltip,{title:"Preview matching files"},o().createElement(d.IconButton,{edge:"end",onClick:V,disabled:i||S},o().createElement(Ae(),null)))):null}}))),o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.TextField,{name:"path",label:"Path (Optional)",value:A.path,onChange:z,helperText:"Optional folder path inside the container (e.g., 'daily/employees/')",disabled:i,InputProps:{endAdornment:A.path?o().createElement(d.InputAdornment,{position:"end"},o().createElement(d.Tooltip,{title:"Browse this path"},o().createElement(d.IconButton,{edge:"end",onClick:j,disabled:i},o().createElement(ke(),null)))):null}}))),!i&&o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.FormControl,{fullWidth:!0},o().createElement(d.FormControlLabel,{control:o().createElement(Je(),{name:"createContainerIfNotExists",checked:A.createContainerIfNotExists,onChange:z,disabled:i}),label:"Create container if it doesn't exist"}),o().createElement(d.FormHelperText,null,"If enabled, the system will attempt to create the container when the integration runs")))),k.length>0&&o().createElement(d.Box,{mt:2},o().createElement(d.Divider,{sx:{mb:2}}),o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Preview of Files Matching Pattern"),o().createElement(d.Box,{sx:{maxHeight:"200px",overflow:"auto",mb:1}},o().createElement(at(),{dense:!0},k.map(((e,t)=>o().createElement(Ye(),{key:t},o().createElement($e(),null,o().createElement(lt(),{color:"primary",fontSize:"small"})),o().createElement(tt(),{primary:e.name,secondary:"".concat(ut(e.size)," \u2022 ").concat(pt(e.lastModified))})))))),o().createElement(d.Box,{display:"flex",justifyContent:"space-between",alignItems:"center"},o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},k.length," file(s) match your pattern"),o().createElement(d.Button,{size:"small",onClick:()=>I([]),startIcon:o().createElement(Me(),null)},"Close Preview")))),o().createElement(d.Dialog,{open:u,onClose:R,fullWidth:!0,maxWidth:"lg",sx:{"& .MuiDialog-paper":{height:"80vh"}}},o().createElement(d.DialogTitle,null,o().createElement(d.Tabs,{value:g,onChange:(e,t)=>{y(t)}},o().createElement(d.Tab,{label:"Browse Containers"}),o().createElement(d.Tab,{label:"Connection Settings",disabled:!q()}))),o().createElement(d.DialogContent,{dividers:!0,sx:{height:"100%",p:0}},0===g&&o().createElement(d.Box,{sx:{height:"100%"}},o().createElement(Ge,{config:A,onSelectContainer:_,onSelectBlob:L,readOnly:i,selectedContainer:A.containerName,selectedPath:A.path})),1===g&&o().createElement(d.Box,{sx:{p:3}},o().createElement(d.Typography,{variant:"h6",gutterBottom:!0},"Connection Diagnostics"),o().createElement(d.Grid,{container:!0,spacing:2},o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.Paper,{variant:"outlined",sx:{p:2}},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Authentication Method"),o().createElement(d.Chip,{label:null===(t=U.find((e=>e.value===A.authMethod)))||void 0===t?void 0:t.label,color:"primary",variant:"outlined"}),o().createElement(d.Divider,{sx:{my:2}}),H&&o().createElement(d.Box,null,o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Connection String"),o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},s?A.connectionString:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022")),X&&o().createElement(d.Box,{mt:2},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Storage Account Name"),o().createElement(d.Typography,{variant:"body2"},A.accountName)),K&&o().createElement(d.Box,{mt:2},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Account Key"),o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},s?A.accountKey:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022")),Z&&o().createElement(d.Box,{mt:2},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"SAS Token"),o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},s?A.sasToken:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022")),J&&o().createElement(d.Box,{mt:2},o().createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Managed Identity"),o().createElement(d.Typography,{variant:"body2",color:"textSecondary"},"Using the system-assigned managed identity")))),o().createElement(d.Grid,{item:!0,xs:12},o().createElement(d.Button,{variant:"contained",color:"primary",onClick:W,disabled:h||!q(),startIcon:h?o().createElement(d.CircularProgress,{size:20}):null,fullWidth:!0},h?"Testing Connection...":"Test Connection"),E&&o().createElement(d.Box,{sx:{mt:2}},o().createElement(d.Alert,{severity:E.success?"success":"error",sx:{mb:2},action:o().createElement(d.IconButton,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>b(null)},o().createElement(Me(),{fontSize:"inherit"}))},E.message),E.diagnosticSteps&&o().createElement(d.Paper,{variant:"outlined",sx:{p:2}},o().createElement(d.Typography,{variant:"h6",gutterBottom:!0},"Diagnostic Results"),o().createElement(at(),{dense:!0},E.diagnosticSteps.map(((e,t)=>o().createElement(Ye(),{key:t,divider:t<E.diagnosticSteps.length-1,sx:{py:1.5,backgroundColor:e.success?"success.lighter":t===E.diagnosticSteps.findIndex((e=>!e.success))?"error.lighter":"inherit"}},o().createElement($e(),null,e.success?o().createElement(Be(),{color:"success"}):o().createElement(De(),{color:"error"})),o().createElement(tt(),{primary:e.name,secondary:e.message,primaryTypographyProps:{fontWeight:"medium"}}),o().createElement(d.Tooltip,{title:o().createElement(d.Box,null,o().createElement(d.Typography,{variant:"subtitle2"},"Details"),o().createElement("pre",{style:{whiteSpace:"pre-wrap",fontSize:"0.8rem"}},JSON.stringify(e.details,null,2)))},o().createElement(d.IconButton,{size:"small"},o().createElement(Ee(),{fontSize:"small"}))))))),E.details&&E.details.recommendation&&o().createElement(d.Box,{sx:{mt:2,bgcolor:"info.lighter",p:2,borderRadius:1}},o().createElement(d.Typography,{variant:"subtitle2",color:"info.dark"},"Recommendation"),o().createElement(d.Typography,{variant:"body2"},E.details.recommendation)),E.details&&E.details.possibleIssues&&o().createElement(d.Box,{sx:{mt:2,bgcolor:"warning.lighter",p:2,borderRadius:1}},o().createElement(d.Typography,{variant:"subtitle2",color:"warning.dark"},"Possible Issues"),o().createElement(at(),{dense:!0,disablePadding:!0},E.details.possibleIssues.map(((e,t)=>o().createElement(Ye(),{key:t,disableGutters:!0},o().createElement($e(),{sx:{minWidth:24}},o().createElement(it(),{fontSize:"small",color:"warning"})),o().createElement(tt(),{primary:e,primaryTypographyProps:{variant:"body2"}})))))),E.details&&E.details.missingComponents&&o().createElement(d.Box,{sx:{mt:2,bgcolor:"error.lighter",p:2,borderRadius:1}},o().createElement(d.Typography,{variant:"subtitle2",color:"error.dark"},"Missing Components"),o().createElement(at(),{dense:!0,disablePadding:!0},E.details.missingComponents.map(((e,t)=>o().createElement(Ye(),{key:t,disableGutters:!0},o().createElement($e(),{sx:{minWidth:24}},o().createElement(st(),{fontSize:"small",color:"error"})),o().createElement(tt(),{primary:e,primaryTypographyProps:{variant:"body2"}})))))),E.details&&E.details.issues&&o().createElement(d.Box,{sx:{mt:2,bgcolor:"error.lighter",p:2,borderRadius:1}},o().createElement(d.Typography,{variant:"subtitle2",color:"error.dark"},"Validation Issues"),o().createElement(at(),{dense:!0,disablePadding:!0},E.details.issues.map(((e,t)=>o().createElement(Ye(),{key:t,disableGutters:!0},o().createElement($e(),{sx:{minWidth:24}},o().createElement(st(),{fontSize:"small",color:"error"})),o().createElement(tt(),{primary:e,primaryTypographyProps:{variant:"body2"}})))))))))))),o().createElement(d.DialogActions,null,o().createElement(d.Button,{onClick:R},"Close"),0===g&&o().createElement(d.Button,{onClick:()=>{R()},color:"primary",variant:"contained"},"Apply Selection"))),o().createElement(d.Snackbar,{open:v,autoHideDuration:6e3,onClose:()=>x(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"}},o().createElement(d.Alert,{onClose:()=>x(!1),severity:null!==E&&void 0!==E&&E.success?"success":"error",sx:{width:"100%"},action:o().createElement(d.Button,{color:"inherit",size:"small",onClick:()=>{x(!1),y(1)}},"See Details")},o().createElement(d.AlertTitle,null,null!==E&&void 0!==E&&E.success?"Connection Successful":"Connection Failed"),null===E||void 0===E?void 0:E.message,(null===E||void 0===E?void 0:E.diagnosticSteps)&&o().createElement(d.Typography,{variant:"caption",display:"block",sx:{mt:1}},E.diagnosticSteps.filter((e=>e.success)).length," of ",E.diagnosticSteps.length," diagnostic checks passed"))))};function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ft=()=>{var{id:e}=(0,c.useParams)(),[t,n]=(0,l.useState)(0),[a,r]=(0,l.useState)(0),[s,m]=(0,l.useState)(!0),[d,u]=(0,l.useState)([]),[p,g]=(0,l.useState)({authMethod:"connectionString",connectionString:"DefaultEndpointsProtocol=https;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;EndpointSuffix=core.windows.net",containerName:"datasets",filePattern:"*.csv",path:"daily/",createContainerIfNotExists:!0}),[y,h]=(0,l.useState)({source:{},destination:{}}),f=["database.read","database.write","script.execute","ai.access","admin.access"],E=(0,l.useCallback)((()=>{m(!s)}),[s]),b=(0,l.useCallback)((e=>{console.log("Saving flow:",e),u(e)}),[]),v=(0,l.useCallback)((e=>{console.log("Running flow:",e)}),[]),x=(0,l.useCallback)((e=>{u(e)}),[]);return o().createElement(i.W2,{maxWidth:"lg"},o().createElement(i.xu,{my:4},o().createElement(i.ZT,{variant:"h4",component:"h1",gutterBottom:!0},"Integration Details"),o().createElement(i.ZT,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},"ID: ",e),o().createElement(i.xu,{display:"flex",justifyContent:"flex-end",mb:2},o().createElement(i.zx,{variant:"outlined",color:s?"primary":"success",sx:{mr:1},onClick:E},s?"Edit":"Editing..."),o().createElement(i.zx,{variant:"contained",color:"primary",onClick:()=>v(d)},"Run Now")),o().createElement(i.Xk,{sx:{mb:4}},o().createElement(i.mQ,{value:t,onChange:(e,t)=>{n(t)},"aria-label":"integration tabs"},o().createElement(i.OK,{label:"Overview"}),o().createElement(i.OK,{label:"Flow Designer"}),o().createElement(i.OK,{label:"Configuration"}),o().createElement(i.OK,{label:"History"}),o().createElement(i.OK,{label:"Monitoring"})),o().createElement(i.xu,null,0===t&&o().createElement(i.xu,{sx:{p:3}},o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Integration Overview"),o().createElement(i.ZT,{paragraph:!0},"This integration is configured to sync data between systems.")),1===t&&o().createElement(i.xu,{sx:{height:"70vh"}},o().createElement(he,{initialElements:d,readOnly:s,userPermissions:f,onSave:b,onRun:v,onChange:x})),2===t&&o().createElement(i.xu,{sx:{p:3}},o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Configuration Details"),o().createElement(i.xu,{mt:3},o().createElement(i.mQ,{value:a,onChange:(e,t)=>{r(t)},"aria-label":"configuration tabs"},o().createElement(i.OK,{label:"Source"}),o().createElement(i.OK,{label:"Destination"}),o().createElement(i.OK,{label:"Advanced"})),0===a&&o().createElement(i.xu,{mt:2},o().createElement(gt,{config:p,onChange:e=>{g(e);var t={};"connectionString"!==e.authMethod||e.connectionString?"accountKey"===e.authMethod?(e.accountName||(t.accountName="Account name is required"),e.accountKey||(t.accountKey="Account key is required")):"sasToken"===e.authMethod?(e.accountName||(t.accountName="Account name is required"),e.sasToken||(t.sasToken="SAS token is required")):"managedIdentity"!==e.authMethod||e.accountName||(t.accountName="Account name is required for managed identity"):t.connectionString="Connection string is required",e.containerName||(t.containerName="Container name is required"),h(ht(ht({},y),{},{source:t}))},errors:y.source||{},readOnly:s,isSuperUser:f.includes("admin.access")})),1===a&&o().createElement(i.xu,{mt:2},o().createElement(i.ZT,{variant:"body1"},"Configure destination settings here. This will be replaced with actual destination configuration components.")),2===a&&o().createElement(i.xu,{mt:2},o().createElement(i.ZT,{variant:"body1"},"Advanced configuration options such as error handling, validation, and notification settings.")))),3===t&&o().createElement(i.xu,{sx:{p:3}},o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Execution History"),o().createElement(i.ZT,{paragraph:!0},"View past runs and their outcomes.")),4===t&&o().createElement(i.xu,{sx:{p:3}},o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Monitoring & Alerts"),o().createElement(i.ZT,{paragraph:!0},"Configure monitoring settings and alerts."))))))}},875:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(779),r=n.n(a),l=n(689),o=n.n(l),i=n(661),c=n(905),s=n(915),m=n(580),d=n.n(m),u=n(692);const p=require("formik"),g=require("yup");var y=n(213),h=n.n(y),f=n(838),E=n.n(f);const b=require("@mui/icons-material/Help");var v=n.n(b),x=n(792),C=n.n(x),T=n(173),S=n.n(T),w=["id","title","content","type","icon","size","iconProps","tooltipProps","popoverProps","relatedLinks","sx"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=e=>{var{id:t,title:n,content:a,type:r="tooltip",icon:i="help",size:c="medium",iconProps:s={},tooltipProps:m={},popoverProps:d={},relatedLinks:p=[],sx:g={}}=e,y=E()(e,w),[f,b]=(0,l.useState)(null),x=Boolean(f),T=x?"".concat(t,"-popover"):void 0,k=(0,l.useCallback)((e=>{b(e.currentTarget)}),[]),B=(0,l.useCallback)((()=>{b(null)}),[]),P="small"===c?"small":"large"===c?"large":"medium",D="info"===i?C():v(),O=.6*window.innerHeight;return"tooltip"===r?o().createElement(u.Tooltip,h()({title:o().createElement(u.Box,{sx:{p:.5}},n&&o().createElement(u.Typography,{variant:"subtitle2"},n),o().createElement(u.Typography,{variant:"body2"},a)),arrow:!0,placement:"top"},m),o().createElement(u.IconButton,h()({size:P,color:"primary","aria-label":"Help: ".concat(n||"Information"),sx:I({padding:"small"===c?"4px":"8px"},g)},s,y),o().createElement(D,{fontSize:P}))):"popover"===r?o().createElement(o().Fragment,null,o().createElement(u.IconButton,h()({"aria-describedby":T,size:P,color:"primary",onClick:k,"aria-label":"Help: ".concat(n||"Information"),sx:I({padding:"small"===c?"4px":"8px"},g)},s,y),o().createElement(D,{fontSize:P})),o().createElement(u.Popover,h()({id:T,open:x,anchorEl:f,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{elevation:4,sx:{maxWidth:"400px",maxHeight:"".concat(O,"px"),overflow:"auto"}}},d),o().createElement(u.Fade,{in:x},o().createElement(u.Paper,{sx:{p:0}},o().createElement(u.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"primary.main",color:"primary.contrastText",p:1.5}},o().createElement(u.Typography,{variant:"subtitle1",sx:{fontWeight:"medium"}},n||"Help Information"),o().createElement(u.IconButton,{size:"small",onClick:B,color:"inherit","aria-label":"Close help"},o().createElement(S(),{fontSize:"small"}))),o().createElement(u.Box,{sx:{p:2}},o().createElement(u.Typography,{variant:"body2",component:"div"},a),p&&p.length>0&&o().createElement(o().Fragment,null,o().createElement(u.Divider,{sx:{my:1.5}}),o().createElement(u.Typography,{variant:"subtitle2",sx:{mt:1,mb:.5}},"Related Information"),o().createElement(u.Box,{component:"ul",sx:{m:0,pl:2}},p.map(((e,t)=>o().createElement(u.Box,{component:"li",key:t,sx:{mb:.5}},o().createElement(u.Link,{href:e.url,onClick:t=>{t.preventDefault(),e.onClick&&e.onClick()},sx:{fontSize:"0.875rem"}},e.label))))))))))):"inline"===r?o().createElement(u.Box,h()({sx:I({display:"flex",p:1.5,borderRadius:1,bgcolor:"info.lightest",border:"1px solid",borderColor:"info.light",mb:2},g)},y),o().createElement(D,{fontSize:P,color:"info",sx:{mr:1.5,mt:"2px"}}),o().createElement(u.Box,null,n&&o().createElement(u.Typography,{variant:"subtitle2",color:"info.dark",sx:{mb:.5}},n),o().createElement(u.Typography,{variant:"body2",color:"text.secondary"},a),p&&p.length>0&&o().createElement(u.Box,{sx:{mt:1}},p.map(((e,t)=>o().createElement(u.Link,{key:t,href:e.url,onClick:t=>{t.preventDefault(),e.onClick&&e.onClick()},sx:{fontSize:"0.875rem",mr:2,display:"inline-block"}},e.label)))))):null};B.propTypes={id:d().string.isRequired,title:d().string,content:d().oneOfType([d().string,d().node]).isRequired,type:d().oneOf(["tooltip","popover","inline"]),icon:d().oneOf(["help","info"]),size:d().oneOf(["small","medium","large"]),iconProps:d().object,tooltipProps:d().object,popoverProps:d().object,relatedLinks:d().arrayOf(d().shape({label:d().string.isRequired,url:d().string,onClick:d().func})),sx:d().object};const P=B;var D=n(470);const O=e=>{var{helpContent:t,tours:n,startTour:a,addHelpContent:r,getHelpContent:o,helpPreferences:i,handleTourComplete:c}=(0,D.yD)(),s=(0,l.useCallback)((t=>o(e,t)),[e,o]),m=(0,l.useCallback)(((t,n)=>r(e,t,n)),[e,r]),d=i.showHelp,u=(0,l.useCallback)((()=>n.filter((t=>t.id.startsWith("".concat(e,"-"))))),[e,n]),p=(0,l.useCallback)((t=>{var n=t.includes("-")?t:"".concat(e,"-").concat(t);a(n)}),[e,a]),g=(0,l.useCallback)((t=>{var n=t.includes("-")?t:"".concat(e,"-").concat(t);return i.completedTours.includes(n)}),[e,i.completedTours]);return{getHelp:s,addHelp:m,isHelpEnabled:d,tours:n,getSectionTours:u,startTour:p,isTourCompleted:g,completeTour:c}};var A=["Basic Information","Connection Settings","Schedule"],z=g.object({name:g.string().required("Name is required").min(3,"Name should be at least 3 characters").max(50,"Name should be at most 50 characters"),description:g.string().max(200,"Description should be at most 200 characters"),type:g.string().required("Integration type is required")}),M=[{value:"data_sync",label:"Data Synchronization",description:"Synchronize data between multiple systems"},{value:"data_transformation",label:"Data Transformation",description:"Transform data from one format to another"},{value:"data_validation",label:"Data Validation",description:"Validate data against business rules"},{value:"data_migration",label:"Data Migration",description:"Migrate data from legacy systems to new platforms"}],F=e=>{var t,n,a,{open:r,onClose:i,onSubmit:c}=e,[s,m]=(0,l.useState)(0),{getHelp:d}=O("integration"),g=(0,p.useFormik)({initialValues:{name:"",description:"",type:"",scheduleType:"manual",scheduleFrequency:""},validationSchema:z,onSubmit:e=>{c(e),g.resetForm(),m(0),i()}}),y=()=>{g.resetForm(),m(0),i()};return o().createElement(u.Dialog,{open:r,onClose:y,fullWidth:!0,maxWidth:"md"},o().createElement(u.DialogTitle,null,o().createElement(u.Stack,{direction:"row",alignItems:"center",spacing:1},o().createElement(u.Typography,{variant:"h6",component:"div"},"Create New Integration"),o().createElement(P,{id:"integration-creation",title:"Integration Creation",content:(null===(t=d("creation"))||void 0===t?void 0:t.content)||"Create a new integration by specifying its name, description, and type. An integration defines how data moves between systems.",type:"tooltip",size:"small"}))),o().createElement(u.DialogContent,null,o().createElement(u.Box,{sx:{mb:2}},o().createElement(u.Stepper,{activeStep:s},A.map((e=>o().createElement(u.Step,{key:e},o().createElement(u.StepLabel,null,e)))))),o().createElement("form",{onSubmit:g.handleSubmit},0===s&&o().createElement(u.Box,null,o().createElement(u.TextField,{fullWidth:!0,margin:"normal",id:"name",name:"name",label:"Integration Name",value:g.values.name,onChange:g.handleChange,error:g.touched.name&&Boolean(g.errors.name),helperText:g.touched.name&&g.errors.name}),o().createElement(u.TextField,{fullWidth:!0,margin:"normal",id:"description",name:"description",label:"Description",multiline:!0,rows:3,value:g.values.description,onChange:g.handleChange,error:g.touched.description&&Boolean(g.errors.description),helperText:g.touched.description&&g.errors.description}),o().createElement(u.FormControl,{fullWidth:!0,margin:"normal",error:g.touched.type&&Boolean(g.errors.type)},o().createElement(u.InputLabel,{id:"type-label"},"Integration Type"),o().createElement(u.Select,{labelId:"type-label",id:"type",name:"type",value:g.values.type,onChange:g.handleChange,label:"Integration Type"},M.map((e=>o().createElement(u.MenuItem,{key:e.value,value:e.value},e.label)))),g.touched.type&&g.errors.type&&o().createElement(u.FormHelperText,null,g.errors.type)),g.values.type&&o().createElement(u.Box,{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},o().createElement(u.Typography,{variant:"body2"},null===(n=M.find((e=>e.value===g.values.type)))||void 0===n?void 0:n.description))),1===s&&o().createElement(u.Box,null,o().createElement(u.Typography,{variant:"subtitle1",gutterBottom:!0},"Connection Settings"),o().createElement(u.Typography,{variant:"body2",color:"textSecondary",paragraph:!0},"You'll configure the detailed connection settings in the Flow Designer after creating the integration."),o().createElement(P,{id:"connection-settings-info",title:"Connection Configuration",content:"The Flow Designer is where you'll build your integration workflow by connecting nodes together. You'll be able to configure source and destination systems, add transformation steps, and define how data flows between them.",type:"inline",icon:"info",relatedLinks:[{label:"Take Flow Designer tour",onClick:()=>console.log("Start flow designer tour")},{label:"View connection types",onClick:()=>console.log("Open connection types documentation")}]}),o().createElement(u.Typography,{variant:"body2",gutterBottom:!0,sx:{mt:2}},"The Flow Designer will allow you to:"),o().createElement("ul",null,o().createElement("li",null,"Add source and destination nodes"),o().createElement("li",null,"Configure transformation and filter operations"),o().createElement("li",null,"Establish connections between nodes"),o().createElement("li",null,"Validate and test your integration flow"))),2===s&&o().createElement(u.Box,null,o().createElement(u.Stack,{direction:"row",alignItems:"center",spacing:1,mb:2},o().createElement(u.Typography,{variant:"subtitle1"},"Schedule Configuration"),o().createElement(P,{id:"schedule-config",title:"Scheduling",content:(null===(a=d("schedule"))||void 0===a?void 0:a.content)||"Set up when your integration should run automatically. Supports one-time, recurring, and event-based schedules.",type:"popover",size:"small",relatedLinks:[{label:"View scheduling documentation",onClick:()=>console.log("Open scheduling documentation")},{label:"Take scheduling tour",onClick:()=>console.log("Start scheduling tour")}]})),o().createElement(u.FormControl,{fullWidth:!0,margin:"normal"},o().createElement(u.InputLabel,{id:"schedule-type-label"},"Schedule Type"),o().createElement(u.Select,{labelId:"schedule-type-label",id:"scheduleType",name:"scheduleType",value:g.values.scheduleType,onChange:g.handleChange,label:"Schedule Type"},o().createElement(u.MenuItem,{value:"manual"},"Manual Execution"),o().createElement(u.MenuItem,{value:"scheduled"},"Scheduled"),o().createElement(u.MenuItem,{value:"event_driven"},"Event Driven"))),"scheduled"===g.values.scheduleType&&o().createElement(u.FormControl,{fullWidth:!0,margin:"normal"},o().createElement(u.InputLabel,{id:"schedule-frequency-label"},"Frequency"),o().createElement(u.Select,{labelId:"schedule-frequency-label",id:"scheduleFrequency",name:"scheduleFrequency",value:g.values.scheduleFrequency,onChange:g.handleChange,label:"Frequency"},o().createElement(u.MenuItem,{value:"hourly"},"Hourly"),o().createElement(u.MenuItem,{value:"daily"},"Daily"),o().createElement(u.MenuItem,{value:"weekly"},"Weekly"),o().createElement(u.MenuItem,{value:"monthly"},"Monthly"),o().createElement(u.MenuItem,{value:"custom"},"Custom (CRON)"))),"event_driven"===g.values.scheduleType&&o().createElement(u.Box,{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},o().createElement(u.Typography,{variant:"body2"},"Event-driven integrations will be triggered by external events such as webhook calls, file uploads, or system notifications."))))),o().createElement(u.DialogActions,null,o().createElement(u.Button,{onClick:y},"Cancel"),s>0&&o().createElement(u.Button,{onClick:()=>{m((e=>e-1))}},"Back"),s<A.length-1&&o().createElement(u.Button,{onClick:()=>{m((e=>e+1))},variant:"contained",disabled:0===s&&!(g.values.name&&g.values.type&&!g.errors.name&&!g.errors.description)},"Next"),s===A.length-1&&o().createElement(u.Button,{onClick:()=>g.handleSubmit(),variant:"contained",color:"primary"},"Create Integration")))};F.propTypes={open:d().bool.isRequired,onClose:d().func.isRequired,onSubmit:d().func.isRequired};const j=F;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=[{id:"1",name:"Sales Data Sync",description:"Sync sales data from CRM to data warehouse",type:"data_sync",status:"active",lastRun:"2025-03-29T14:32:00Z"},{id:"2",name:"Customer Data Transformation",description:"Transform customer data for analytics",type:"data_transformation",status:"inactive",lastRun:null}];const L=()=>{var e,t=(0,i.useNavigate)(),[n,a]=(0,l.useState)(_),[r,m]=(0,l.useState)(!1),{getHelp:d,startTour:u,isTourCompleted:p}=O("integration");(0,l.useEffect)((()=>{p("basics"),0}),[p,u]);var g=(0,l.useCallback)((e=>{console.log("Creating integration:",e);var n=N(N({},e),{},{id:"".concat(Date.now()),status:"inactive",lastRun:null});a((e=>[...e,n])),t("/integrations/".concat(n.id))}),[t]),y=(0,l.useCallback)((e=>{t("/integrations/".concat(e))}),[t]),h=(0,l.useCallback)((e=>{t("/integrations/".concat(e,"?edit=true"))}),[t]),f=(0,l.useCallback)((e=>{console.log("Running integration:",e)}),[]),E=(0,l.useCallback)((e=>{console.log("Deleting integration:",e),a((t=>t.filter((t=>t.id!==e))))}),[]);return o().createElement(c.W2,{maxWidth:"lg"},o().createElement(c.xu,{my:4},o().createElement(c.Kq,{direction:"row",alignItems:"center",spacing:1,mb:2},o().createElement(c.ZT,{variant:"h4",component:"h1"},"Integrations"),o().createElement(P,{id:"integrations-page-help",title:"Integrations Overview",content:(null===(e=d("overview"))||void 0===e?void 0:e.content)||"Integrations allow you to connect different systems and define how data flows between them. You can create, edit, and manage all your integrations from this page.",type:"popover",size:"small",relatedLinks:[{label:"Learn more about integrations",onClick:()=>console.log("Open integrations docs")}]}),o().createElement(c.zx,{variant:"text",size:"small",startIcon:o().createElement(s.Tour,null),onClick:()=>u("basics"),sx:{ml:"auto"},color:p("basics")?"success":"primary"},p("basics")?"Tour Completed":"Take Tour")),o().createElement(c.xu,{display:"flex",justifyContent:"flex-end",mb:2},o().createElement(c.zx,{variant:"contained",color:"primary",startIcon:o().createElement(s.Add,null),onClick:()=>m(!0),className:"create-integration-button"},"Create New Integration")),0===n.length?o().createElement(c.Xk,{sx:{p:3,textAlign:"center"}},o().createElement(c.ZT,{variant:"subtitle1",gutterBottom:!0},"You don't have any integrations yet"),o().createElement(c.ZT,{variant:"body2",color:"textSecondary",gutterBottom:!0},"Create your first integration to get started"),o().createElement(c.zx,{variant:"outlined",color:"primary",startIcon:o().createElement(s.Add,null),onClick:()=>m(!0),sx:{mt:2}},"Create Integration")):o().createElement(c.rj,{container:!0,spacing:3,className:"integration-list"},n.map((e=>{return o().createElement(c.rj,{item:!0,xs:12,sm:6,md:4,key:e.id},o().createElement(c.Zb,null,o().createElement(c.aY,null,o().createElement(c.xu,{display:"flex",alignItems:"center",mb:1},o().createElement(c.ZT,{variant:"h6",component:"h2",sx:{flexGrow:1}},e.name),o().createElement(c.xu,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:"active"===e.status?"success.main":"text.disabled",mr:1}})),o().createElement(c.ZT,{variant:"body2",color:"textSecondary",gutterBottom:!0},e.description),o().createElement(c.xu,{mt:2},o().createElement(c.ZT,{variant:"caption",display:"block",color:"textSecondary"},"Type: ",{data_sync:"Data Synchronization",data_transformation:"Data Transformation",data_validation:"Data Validation",data_migration:"Data Migration"}[t=e.type]||t),e.lastRun&&o().createElement(c.ZT,{variant:"caption",display:"block",color:"textSecondary"},"Last Run: ",new Date(e.lastRun).toLocaleString()))),o().createElement(c.T$,null,o().createElement(c.u,{title:"View Details"},o().createElement(c.zx,{size:"small",onClick:()=>y(e.id)},"Details")),o().createElement(c.xu,{sx:{flexGrow:1}}),o().createElement(c.u,{title:"Run Integration"},o().createElement(c.hU,{size:"small",onClick:()=>f(e.id)},o().createElement(s.PlayArrow,{fontSize:"small"}))),o().createElement(c.u,{title:"Edit Integration"},o().createElement(c.hU,{size:"small",onClick:()=>h(e.id)},o().createElement(s.Edit,{fontSize:"small"}))),o().createElement(c.u,{title:"Delete Integration"},o().createElement(c.hU,{size:"small",onClick:()=>E(e.id)},o().createElement(s.Delete,{fontSize:"small"}))))));var t})))),o().createElement(j,{open:r,onClose:()=>m(!1),onSubmit:g}))}},541:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(591),r=n.n(a),l=n(689),o=n.n(l),i=n(661),c=n(905),s=n(274),m=n(108);const d=()=>{var e,[t,n]=(0,l.useState)(""),[a,d]=(0,l.useState)(""),[u,p]=(0,l.useState)(!1),{setState:g}=(0,s.aF)(),{setState:y}=(0,m.lm)(),h=(0,i.useNavigate)(),f=(null===(e=(0,i.useLocation)().state)||void 0===e||null===(e=e.from)||void 0===e?void 0:e.pathname)||"/",E=function(){var e=r()((function*(e){e.preventDefault(),p(!0);try{"ai-dev"===t&&"TAPintoAI!"===a?(g({isAuthenticated:!0,isAdmin:!0,name:"AI Developer",email:"ai-dev@example.com",id:"1234567890"}),y({type:"success",message:"Login successful!",open:!0}),h(f,{replace:!0})):y({type:"error",message:"Invalid credentials. Please try again.",open:!0})}catch(n){y({type:"error",message:"An error occurred during login. Please try again.",open:!0})}finally{p(!1)}}));return function(t){return e.apply(this,arguments)}}();return o().createElement(c.W2,{maxWidth:"sm"},o().createElement(c.xu,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},o().createElement(c.Xk,{elevation:3,sx:{padding:4,width:"100%"}},o().createElement(c.ZT,{component:"h1",variant:"h5",align:"center",gutterBottom:!0},"Sign in to TAP Integration Platform"),o().createElement(c.xu,{component:"form",onSubmit:E,sx:{mt:1}},o().createElement(c.nv,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:t,onChange:e=>n(e.target.value)}),o().createElement(c.nv,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:a,onChange:e=>d(e.target.value)}),o().createElement(c.zx,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},disabled:u},u?"Signing in...":"Sign In")))))}},29:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(779),r=n.n(a),l=n(689),o=n.n(l),i=n(905),c=n(274),s=n(108);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=()=>{var{state:e}=(0,c.aF)(),{setState:t}=(0,s.lm)(),[n,a]=o().useState(0),[r,l]=o().useState({name:(null===e||void 0===e?void 0:e.name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||""}),m=e=>t=>{l(d(d({},r),{},{[e]:t.target.value}))};return o().createElement(i.W2,{maxWidth:"lg"},o().createElement(i.xu,{my:4},o().createElement(i.ZT,{variant:"h4",component:"h1",gutterBottom:!0},"User Settings"),o().createElement(i.Xk,{sx:{mb:4}},o().createElement(i.mQ,{value:n,onChange:(e,t)=>{a(t)},"aria-label":"settings tabs"},o().createElement(i.OK,{label:"Profile"}),o().createElement(i.OK,{label:"Preferences"}),o().createElement(i.OK,{label:"Security"}),o().createElement(i.OK,{label:"API Keys"})),o().createElement(i.xu,{sx:{p:3}},0===n&&o().createElement(i.xu,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:600}},o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"User Profile"),o().createElement(i.nv,{label:"Name",value:r.name,onChange:m("name"),fullWidth:!0}),o().createElement(i.nv,{label:"Email",value:r.email,onChange:m("email"),fullWidth:!0}),o().createElement(i.nv,{label:"Phone",value:r.phone,onChange:m("phone"),fullWidth:!0}),o().createElement(i.xu,{sx:{mt:2}},o().createElement(i.zx,{variant:"contained",color:"primary",onClick:()=>{t({type:"success",message:"Profile updated successfully",open:!0})}},"Save Profile"))),1===n&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"User Preferences"),o().createElement(i.ZT,{paragraph:!0},"Configure interface and notification preferences.")),2===n&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"Security Settings"),o().createElement(i.ZT,{paragraph:!0},"Manage password, MFA, and account security.")),3===n&&o().createElement(i.xu,null,o().createElement(i.ZT,{variant:"h6",gutterBottom:!0},"API Keys"),o().createElement(i.ZT,{paragraph:!0},"Manage API keys for programmatic access."))))))}},776:()=>{"undefined"===typeof Promise&&console.warn("Promise polyfill is required but not implemented in this stub"),"function"!==typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),Array.from||(Array.from=function(e){return[].slice.call(e)}),console.debug("Polyfills loaded")},450:(e,t,n)=>{n.d(t,{x:()=>d});var a=n(591),r=n.n(a),l="/api/credentials/store",o="/api/credentials/retrieve",i="/api/credentials/list",c="/api/credentials/delete",s="/api/credentials/test",m=function(){var e=r()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var a=localStorage.getItem("auth_token");if(!a)throw new Error("Authentication required");var r,l={method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},credentials:"include"};if("GET"!==t&&n&&(l.body=JSON.stringify(n)),console.log("[DEV] Simulating API call: ".concat(t," ").concat(e)),console.log("[DEV] Request data:",n),yield new Promise((e=>setTimeout(e,800))),e.includes("/store"))r={success:!0,message:"Credentials stored successfully"};else if(e.includes("/retrieve"))r="azure"===n.credentialType?{success:!0,data:{connection_string:n.includeSecrets?"DefaultEndpointsProtocol=https;AccountName=myaccount;AccountKey=abcdefg==;EndpointSuffix=core.windows.net":"",account_name:"myaccount",account_key:n.includeSecrets?"abcdefg==":"",sas_token:n.includeSecrets?"?sv=2020-08-04&ss=bfqt&srt=sco&sp=rwdlacupitfx&se=2025-05-01T18:16:36Z&st=2025-04-01T10:16:36Z&spr=https&sig=abcdefg==":"",tenant_id:"tenant-id-value",client_id:"client-id-value",client_secret:n.includeSecrets?"secret-value":"",has_credentials:!0,last_updated:(new Date).toISOString()}}:"s3"===n.credentialType?{success:!0,data:{access_key_id:"AKIAIOSFODNN7EXAMPLE",secret_access_key:n.includeSecrets?"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY":"",region:"us-east-1",profile:"",has_credentials:!0,last_updated:(new Date).toISOString()}}:"sharepoint"===n.credentialType?{success:!0,data:{tenant_id:"tenant-id-value",client_id:"client-id-value",client_secret:n.includeSecrets?"secret-value":"",username:"user@example.com",password:n.includeSecrets?"password-value":"",has_credentials:!0,last_updated:(new Date).toISOString()}}:{success:!1,message:"Unknown credential type"};else if(e.includes("/list"))r={success:!0,data:[{name:"azure",type:"storage",last_updated:(new Date).toISOString()},{name:"s3",type:"storage",last_updated:(new Date).toISOString()},{name:"sharepoint",type:"storage",last_updated:(new Date).toISOString()}]};else if(e.includes("/delete"))r={success:!0,message:"Credentials deleted successfully"};else if(e.includes("/test")){if("azure"===n.credentialType)r=Math.random()<.2?{success:!1,message:"Failed to connect to Azure Blob Storage",details:{error:"Connection timeout",code:"ConnectionError"}}:{success:!0,message:"Successfully connected to Azure Blob Storage",details:{containers:5,account:"myaccount",permissions:["read","write","delete"]}};else r="s3"===n.credentialType?{success:!0,message:"Successfully connected to S3",details:{buckets:3,region:"us-east-1",permissions:["read","write","delete"]}}:"sharepoint"===n.credentialType?{success:!0,message:"Successfully connected to SharePoint",details:{sites:2,tenant:"example.onmicrosoft.com",permissions:["read","write"]}}:{success:!1,message:"Unknown credential type"}}else r={success:!1,message:"Unknown endpoint"};return r}catch(o){throw console.error("API call failed:",o),o}}));return function(t){return e.apply(this,arguments)}}(),d={storeCredentials:function(){var e=r()((function*(e,t){try{return yield m(l,"POST",{credentialType:e,credentials:t})}catch(n){return console.error("Failed to store ".concat(e," credentials:"),n),{success:!1,message:n.message||"Failed to store credentials: ".concat(n)}}}));return function(t,n){return e.apply(this,arguments)}}(),getCredentials:function(){var e=r()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return yield m(o,"POST",{credentialType:e,includeSecrets:t})}catch(n){return console.error("Failed to retrieve ".concat(e," credentials:"),n),{success:!1,message:n.message||"Failed to retrieve credentials: ".concat(n)}}}));return function(t){return e.apply(this,arguments)}}(),listCredentials:function(){var e=r()((function*(){try{return yield m(i,"GET")}catch(e){return console.error("Failed to list credentials:",e),{success:!1,message:e.message||"Failed to list credentials: ".concat(e)}}}));return function(){return e.apply(this,arguments)}}(),deleteCredentials:function(){var e=r()((function*(e){try{return yield m(c,"POST",{credentialType:e})}catch(t){return console.error("Failed to delete ".concat(e," credentials:"),t),{success:!1,message:t.message||"Failed to delete credentials: ".concat(t)}}}));return function(t){return e.apply(this,arguments)}}(),testCredentials:function(){var e=r()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return yield m(s,"POST",{credentialType:e,credentials:t})}catch(n){return console.error("Failed to test ".concat(e," credentials:"),n),{success:!1,message:n.message||"Failed to test credentials: ".concat(n)}}}));return function(t){return e.apply(this,arguments)}}(),hasCredentials:function(){var e=r()((function*(e){try{var t=yield m(o,"POST",{credentialType:e,includeSecrets:!1});return t.success&&t.data&&t.data.has_credentials}catch(n){return console.error("Failed to check ".concat(e," credentials:"),n),!1}}));return function(t){return e.apply(this,arguments)}}()}},94:()=>{window.matchMedia=window.matchMedia||function(){return{matches:!1,addListener:function(){},removeListener:function(){}}};window.IntersectionObserver=class{constructor(){}disconnect(){}observe(){}takeRecords(){return[]}unobserve(){}};var e=function(){var e={};return{getItem:function(t){return e[t]||null},setItem:function(t,n){e[t]=n.toString()},clear:function(){e={}},removeItem:function(t){delete e[t]}}}();Object.defineProperty(window,"localStorage",{value:e}),console.log("Setting up test environment")},939:(e,t,n)=>{n.r(t),n.d(t,{FileExtensionToMimeType:()=>r,MimeTypeCategories:()=>a,generateFileMetadata:()=>y,getFileCategory:()=>c,getFileExtension:()=>o,getFileTypeColor:()=>d,getFileTypeDescription:()=>s,getFileTypeIcon:()=>m,getMimeTypeFromFilename:()=>l,getPreviewType:()=>p,getSyntaxHighlightLanguage:()=>g,isFileCategory:()=>i,isPreviewSupported:()=>u});var a={TEXT:["text/plain","text/csv","text/tab-separated-values","text/markdown","text/html","text/css","text/javascript","text/xml","application/json","application/ld+json","application/x-yaml","application/yaml"],DOCUMENT:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/rtf","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"],IMAGE:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp","image/tiff","image/x-icon"],AUDIO:["audio/mpeg","audio/ogg","audio/wav","audio/webm","audio/aac","audio/flac"],VIDEO:["video/mp4","video/webm","video/ogg","video/quicktime","video/x-msvideo","video/x-ms-wmv"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2"],DATA:["text/csv","application/json","application/xml","text/xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/tab-separated-values","application/parquet","application/avro","application/octet-stream"],CODE:["text/javascript","application/javascript","text/css","text/html","application/json","text/x-python","text/x-java","text/x-c","text/x-c++","text/x-csharp","text/x-php","text/x-ruby","text/x-go","text/x-rust","text/x-typescript"]},r={txt:"text/plain",csv:"text/csv",tsv:"text/tab-separated-values",md:"text/markdown",html:"text/html",htm:"text/html",css:"text/css",js:"text/javascript",json:"application/json",xml:"text/xml",yaml:"application/yaml",yml:"application/yaml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rtf:"application/rtf",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",odp:"application/vnd.oasis.opendocument.presentation",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",ico:"image/x-icon",mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",flac:"audio/flac",mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed",tar:"application/x-tar",gz:"application/gzip",bz:"application/x-bzip",bz2:"application/x-bzip2",parquet:"application/parquet",avro:"application/avro",bin:"application/octet-stream",ts:"text/x-typescript",py:"text/x-python",java:"text/x-java",c:"text/x-c",cpp:"text/x-c++",cs:"text/x-csharp",php:"text/x-php",rb:"text/x-ruby",go:"text/x-go",rs:"text/x-rust"},l=e=>{if(!e)return"application/octet-stream";var t=e.split(".").pop().toLowerCase();return r[t]||"application/octet-stream"},o=e=>{if(!e)return"";var t=e.split(".");return t.length>1?t.pop().toLowerCase():""},i=(e,t)=>!!(e&&t&&a[t])&&a[t].includes(e),c=e=>{if(!e)return"OTHER";for(var[t,n]of Object.entries(a))if(n.includes(e))return t;return"OTHER"},s=e=>{if(!e)return"Unknown File";var t={"text/plain":"Text File","text/csv":"CSV File","text/tab-separated-values":"TSV File","text/markdown":"Markdown File","text/html":"HTML File","application/json":"JSON File","application/xml":"XML File","text/xml":"XML File","application/pdf":"PDF Document","application/msword":"Word Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word Document","application/vnd.ms-excel":"Excel Spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel Spreadsheet","image/jpeg":"JPEG Image","image/png":"PNG Image","image/gif":"GIF Image","image/svg+xml":"SVG Image","audio/mpeg":"MP3 Audio","video/mp4":"MP4 Video","application/zip":"ZIP Archive","application/x-tar":"TAR Archive","application/gzip":"GZIP Archive"};if(t[e])return t[e];switch(c(e)){case"TEXT":return"Text File";case"DOCUMENT":return"Document";case"IMAGE":return"Image";case"AUDIO":return"Audio File";case"VIDEO":return"Video File";case"ARCHIVE":return"Archive";case"DATA":return"Data File";case"CODE":return"Source Code";default:return"Binary File"}},m=e=>{if(!e)return"InsertDriveFile";switch(c(e)){case"TEXT":return"text/csv"===e||"text/tab-separated-values"===e?"TableChart":"application/json"===e?"Code":"Description";case"DOCUMENT":return"application/pdf"===e?"PictureAsPdf":e.includes("spreadsheet")||e.includes("excel")?"GridOn":e.includes("presentation")||e.includes("powerpoint")?"Slideshow":"Description";case"IMAGE":return"Image";case"AUDIO":return"AudioFile";case"VIDEO":return"VideoFile";case"ARCHIVE":return"FolderZip";case"DATA":return"text/csv"===e||"text/tab-separated-values"===e?"TableChart":"Storage";case"CODE":return"Code";default:return"InsertDriveFile"}},d=e=>{if(!e)return"action.active";switch(c(e)){case"TEXT":return"info.main";case"DOCUMENT":return"application/pdf"===e?"error.main":e.includes("spreadsheet")||e.includes("excel")?"success.main":e.includes("presentation")||e.includes("powerpoint")?"warning.main":"primary.main";case"IMAGE":return"success.main";case"AUDIO":return"secondary.main";case"VIDEO":return"error.main";case"ARCHIVE":return"warning.dark";case"DATA":return"info.dark";case"CODE":return"secondary.dark";default:return"text.secondary"}},u=e=>{if(!e)return!1;return["text/plain","text/csv","text/tab-separated-values","text/markdown","text/html","text/css","text/javascript","application/json","application/xml","text/xml","application/yaml","image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp","application/pdf","text/x-python","text/x-java","text/javascript","application/javascript","text/x-typescript"].includes(e)},p=e=>u(e)?e.startsWith("image/")?"image":"application/pdf"===e?"pdf":a.CODE.includes(e)?"code":a.TEXT.includes(e)||"application/json"===e||"application/xml"===e||"text/xml"===e?"text":"none":"none",g=e=>({"text/javascript":"javascript","application/javascript":"javascript","text/x-typescript":"typescript","text/x-python":"python","text/x-java":"java","text/x-c":"c","text/x-c++":"cpp","text/x-csharp":"csharp","text/x-php":"php","text/x-ruby":"ruby","text/x-go":"go","text/x-rust":"rust","text/css":"css","text/html":"html","application/json":"json","application/ld+json":"json","application/xml":"xml","text/xml":"xml","application/yaml":"yaml","text/markdown":"markdown","text/csv":"csv","text/tab-separated-values":"tsv"}[e]||"plaintext"),y=e=>{if(!e)return null;var t=e.name||e.filename||(e.path?e.path.split("/").pop():"unknown"),n=e.contentType||e.type||l(t);return{filename:t,mimeType:n,extension:o(t),size:e.size||e.contentLength||0,lastModified:e.lastModified||e.modifiedDate||(new Date).toISOString(),category:c(n),description:s(n),icon:m(n),color:d(n),isPreviewable:u(n),previewType:p(n)}}},102:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(81),r=n.n(a),l=n(645),o=n.n(l)()(r());o.push([e.id,"/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow .react-flow__edges {\n  pointer-events: none;\n  overflow: visible;\n}\n.react-flow__edge-path,\n.react-flow__connection-path {\n  stroke: #b1b1b7;\n  stroke-width: 1;\n  fill: none;\n}\n.react-flow__edge {\n  pointer-events: visibleStroke;\n  cursor: pointer;\n}\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    -webkit-animation: none;\n            animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge:focus .react-flow__edge-path,\n  .react-flow__edge:focus-visible .react-flow__edge-path {\n    stroke: #555;\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge-textbg {\n    fill: white;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__connectionline {\n  z-index: 1001;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__node.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: -webkit-grab;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background: #1a192b;\n  border: 1px solid white;\n  border-radius: 100%;\n}\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-top {\n    left: 50%;\n    top: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: -4px;\n    transform: translate(0, -50%);\n  }\n.react-flow__handle-right {\n    right: -4px;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@-webkit-keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-default,\n.react-flow__node-input,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: 3px;\n  width: 150px;\n  font-size: 12px;\n  color: #222;\n  text-align: center;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #1a192b;\n  background-color: white;\n}\n.react-flow__node-default.selectable:hover, .react-flow__node-input.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n    }\n.react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: 0 0 0 0.5px #1a192b;\n    }\n.react-flow__node-group {\n  background-color: rgba(240, 240, 240, 0.25);\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: rgba(0, 89, 220, 0.08);\n  border: 1px dotted rgba(0, 89, 220, 0.8);\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls {\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n}\n.react-flow__controls-button {\n    border: none;\n    background: #fefefe;\n    border-bottom: 1px solid #eee;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    padding: 5px;\n  }\n.react-flow__controls-button:hover {\n      background: #f4f4f4;\n    }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__minimap {\n  background-color: #fff;\n}\n.react-flow__minimap svg {\n  display: block;\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: #3367d9;\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: #3367d9;\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n",""]);const i=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a="undefined"!==typeof t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,l){"string"===typeof e&&(e=[[null,e,void 0]]);var o={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var s=0;s<e.length;s++){var m=[].concat(e[s]);a&&o[m[0]]||("undefined"!==typeof l&&("undefined"===typeof m[5]||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=l),n&&(m[2]?(m[1]="@media ".concat(m[2]," {").concat(m[1],"}"),m[2]=n):m[2]=n),r&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=r):m[4]="".concat(r)),t.push(m))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var l={},o=[],i=0;i<e.length;i++){var c=e[i],s=a.base?c[0]+a.base:c[0],m=l[s]||0,d="".concat(s," ").concat(m);l[s]=m+1;var u=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var g=r(p,a);a.byIndex=i,t.splice(i,0,{identifier:d,updater:g,references:1})}o.push(d)}return o}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var l=a(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<l.length;o++){var i=n(l[o]);t[i].references--}for(var c=a(e,r),s=0;s<l.length;s++){var m=n(l[s]);0===t[m].references&&(t[m].updater(),t.splice(m,1))}l=c}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if("undefined"===typeof t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(a){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"===typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r="undefined"!==typeof n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var l=n.sourceMap;l&&"undefined"!==typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},591:e=>{e.exports=require("@babel/runtime/helpers/asyncToGenerator")},779:e=>{e.exports=require("@babel/runtime/helpers/defineProperty")},213:e=>{e.exports=require("@babel/runtime/helpers/extends")},838:e=>{e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},915:e=>{e.exports=require("@mui/icons-material")},173:e=>{e.exports=require("@mui/icons-material/Close")},182:e=>{e.exports=require("@mui/icons-material/Download")},854:e=>{e.exports=require("@mui/icons-material/ErrorOutline")},792:e=>{e.exports=require("@mui/icons-material/Info")},773:e=>{e.exports=require("@mui/icons-material/Visibility")},692:e=>{e.exports=require("@mui/material")},580:e=>{e.exports=require("prop-types")},689:e=>{e.exports=require("react")},661:e=>{e.exports=require("react-router-dom")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={id:a,exports:{}};return e[a](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var a={};(()=>{n.d(a,{bZ:()=>O,gV:()=>Ve,$w:()=>Ne,zx:()=>T,Zb:()=>I,aY:()=>B,XZ:()=>w,E_:()=>_,qs:()=>L,SV:()=>y,rU:()=>z,u_:()=>D,uj:()=>N.uj,l4:()=>N.l4,JB:()=>N.JB,OK:()=>C,iA:()=>k,mQ:()=>A,nv:()=>S,ZT:()=>P,oj:()=>M,vc:()=>qe,_e:()=>j,ZP:()=>$e,DH:()=>Ue,dF:()=>Ke(),R4:()=>Ze,dq:()=>Xe(),Rh:()=>Ye,rS:()=>Qe,qK:()=>R,ZR:()=>W,lm:()=>N.lm,b7:()=>F});var e=n(689),t=n.n(e),r=e=>t().createElement("div",{className:"button-component"},"Button Component");r.displayName="Button";const l=r;var o=e=>t().createElement("div",{className:"textfield-component"},"TextField Component");o.displayName="TextField";const i=o;var c=e=>t().createElement("div",{className:"checkbox-component"},"Checkbox Component");c.displayName="Checkbox";const s=c;var m=n(779),d=n.n(m),u=n(580),p=n.n(u);class g extends e.Component{constructor(e){super(e),d()(this,"resetError",(()=>{this.setState({hasError:!1,error:null,errorInfo:null})})),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){var{hasError:e,error:n,errorInfo:a}=this.state,{fallback:r,children:l}=this.props;return e?r?"function"===typeof r?r(n,a,this.resetError):r:t().createElement("div",{className:"error-boundary-fallback"},t().createElement("h2",null,"Something went wrong."),t().createElement("button",{onClick:this.resetError},"Try again"),!1):l}}g.propTypes={children:p().node.isRequired,fallback:p().oneOfType([p().node,p().func]),onError:p().func};const y=g;var h=n(213),f=n.n(h),E=n(838),b=n.n(E),v=["label"],x=e=>{var{label:n}=e,a=b()(e,v);return t().createElement("button",f()({role:"tab"},a),n)};x.displayName="Tab";const C=x;var T=l,S=i,w=s,k=y,I=y,B=y,P=y,D=y,O=y,A=y,z=y,M=["ButtonAdapted","TextFieldAdapted","CheckboxAdapted","TableAdapted","CardAdapted","CardContentAdapted","TypographyAdapted","ModalAdapted","AlertAdapted","TabsAdapted","LinkAdapted"];function F(e){var n=n=>t().createElement(e,n);return n.displayName="React18Compatible(".concat(e.displayName||e.name||"Component",")"),n}function j(e){return t().createContext(e)}function R(e,n){return t().useEffect(e,n)}var N=n(108),_=(0,e.createContext)({});function L(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(_.Provider,{value:{state:r,setState:l}},a)}function W(){return(0,e.useContext)(_)}var G=n(661),V=n(905),q=e=>t().createElement("div",{className:"keyboardshortcutshelp-component"},"KeyboardShortcutsHelp Component");q.displayName="KeyboardShortcutsHelp";const U=q;var H=n(692),K=n(915),Z=n(470),J="tap_guided_tours",X=e=>{if(!e)return null;var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+a,left:t.left+n,width:t.width,height:t.height,bottom:t.bottom+a,right:t.right+n,centerX:t.left+n+t.width/2,centerY:t.top+a+t.height/2}},Y=n=>{var{elementSelector:a,visible:r,pulse:l}=n,[o,i]=(0,e.useState)(null);return(0,e.useEffect)((()=>{if(r){var e=()=>{var e=document.querySelector(a);if(e){i(X(e));var t=e.getBoundingClientRect();t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||e.scrollIntoView({behavior:"smooth",block:"center"})}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}}),[a,r]),r&&o?t().createElement(H.Box,{sx:{position:"absolute",top:o.top,left:o.left,width:o.width,height:o.height,boxShadow:"0 0 0 9999px rgba(0,0,0,0.7)",borderRadius:"4px",zIndex:9998,pointerEvents:"none","&::after":l?{content:'""',position:"absolute",top:-4,left:-4,right:-4,bottom:-4,border:"2px solid",borderColor:"primary.main",borderRadius:"6px",animation:"pulse 1.5s infinite"}:{}}}):null},Q=e=>{var{step:n,totalSteps:a,title:r,content:l,position:o,onNext:i,onPrev:c,onClose:s,onSkip:m}=e;return t().createElement(H.Paper,{elevation:4,sx:{position:"absolute",top:(null===o||void 0===o?void 0:o.top)||"50%",left:(null===o||void 0===o?void 0:o.left)||"50%",width:320,maxWidth:"calc(100vw - 40px)",transform:o?"none":"translate(-50%, -50%)",zIndex:9999,overflow:"hidden",borderRadius:2}},t().createElement(H.Box,{sx:{bgcolor:"primary.main",color:"primary.contrastText",p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"}},t().createElement(H.Typography,{variant:"subtitle1",sx:{fontWeight:"medium"}},r||"Guided Tour"),t().createElement(H.Box,null,t().createElement(H.IconButton,{size:"small",color:"inherit",onClick:s,"aria-label":"Close tour"},t().createElement(K.Close,{fontSize:"small"})))),t().createElement(H.Box,{sx:{p:2,pb:1}},t().createElement(H.Typography,{variant:"body2"},l)),t().createElement(H.Box,{sx:{px:1,py:.5}},t().createElement(H.LinearProgress,{variant:"determinate",value:n/a*100,sx:{height:4,mb:1}})),t().createElement(H.Box,{sx:{p:1.5,display:"flex",justifyContent:"space-between",borderTop:"1px solid",borderColor:"divider"}},t().createElement(H.Button,{onClick:m,size:"small",sx:{minWidth:"auto"}},"Skip"),t().createElement(H.Box,{sx:{display:"flex",gap:1}},n>1&&t().createElement(H.Button,{onClick:c,variant:"outlined",size:"small",startIcon:t().createElement(K.NavigateBefore,null)},"Back"),t().createElement(H.Button,{onClick:i,variant:"contained",color:"primary",size:"small",endIcon:n<a?t().createElement(K.NavigateNext,null):t().createElement(K.CheckCircle,null)},n<a?"Next":"Finish"))))},$=e=>{var{open:n,onClose:a,tours:r,onSelectTour:l}=e;return t().createElement(H.Dialog,{open:n,onClose:a,maxWidth:"sm",fullWidth:!0},t().createElement(H.DialogTitle,null,"Available Guided Tours",t().createElement(H.IconButton,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},t().createElement(K.Close,null))),t().createElement(H.DialogContent,{dividers:!0},t().createElement(H.Typography,{variant:"body2",paragraph:!0},"Select a guided tour to learn about different features of the application."),r.map((e=>t().createElement(H.Paper,{key:e.id,elevation:0,sx:{p:2,mb:2,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:"action.hover",borderColor:"primary.light"}},onClick:()=>l(e.id)},t().createElement(H.Typography,{variant:"subtitle1",sx:{mb:.5}},e.title),t().createElement(H.Typography,{variant:"body2",color:"text.secondary"},e.description),t().createElement(H.Box,{sx:{display:"flex",alignItems:"center",mt:1,color:"text.secondary",fontSize:"0.75rem"}},t().createElement(K.Info,{sx:{fontSize:"0.875rem",mr:.5}}),e.steps.length," steps \u2022 ",e.duration," min"))))),t().createElement(H.DialogActions,null,t().createElement(H.Button,{onClick:a},"Close")))},ee=n=>{var{tours:a,activeTourId:r,onTourComplete:l,onTourSkip:o,autoStart:i=!1}=n,[c,s]=(0,e.useState)(!1),[m,d]=(0,e.useState)(null),[u,p]=(0,e.useState)(1),[g,y]=(0,e.useState)(null),[h,f]=(0,e.useState)(!1),[E,b]=(0,e.useState)([]),v=a.find((e=>e.id===m)),x=null===v||void 0===v?void 0:v.steps[u-1];(0,e.useEffect)((()=>{try{var e=localStorage.getItem(J);if(e){var t=JSON.parse(e);b(t.completedTours||[]),t.interrupted&&i&&(d(t.tourId),p(t.step),s(!0))}}catch(n){console.error("Error loading tour data:",n)}}),[i]);var C=(0,e.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{localStorage.setItem(J,JSON.stringify({tourId:e,step:t,interrupted:n,completedTours:E}))}catch(a){console.error("Error saving tour state:",a)}}),[E]),T=(0,e.useCallback)((e=>{a.find((t=>t.id===e))&&(d(e),p(1),s(!0),C(e,1,!0),f(!1))}),[a,C]),S=(0,e.useCallback)((()=>{if(v)if(u<v.steps.length){var e=u+1;p(e),C(m,e,!0)}else{var t=[...E,m];b(t),s(!1),C(null,1,!1),l&&l(m)}}),[v,u,m,E,C,l]),w=(0,e.useCallback)((()=>{if(u>1){var e=u-1;p(e),C(m,e,!0)}}),[u,m,C]),k=(0,e.useCallback)((()=>{s(!1),C(null,1,!1)}),[C]),I=(0,e.useCallback)((()=>{s(!1),C(null,1,!1),o&&o(m,u)}),[m,u,C,o]);(0,e.useCallback)((()=>{f(!0)}),[]);return(0,e.useEffect)((()=>{if(c&&x){var e=setTimeout((()=>{if(x.elementSelector){var e=document.querySelector(x.elementSelector);if(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:320,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;if(!e)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};var a=window.innerWidth,r=window.innerHeight,l={top:e.bottom+10,left:e.centerX-t/2};return l.left+t>a-20&&(l.left=a-t-20),l.left<20&&(l.left=20),l.top+n>r-20&&(l={top:e.top-n-10,left:l.left}).top<20&&(l=e.right+t<a-20?{top:e.centerY-n/2,left:e.right+10}:e.left-t>20?{top:e.centerY-n/2,left:e.left-t-10}:{top:r/2-n/2,left:a/2-t/2}),l}(X(e),320,200);y(t)}else y({top:"50%",left:"50%",transform:"translate(-50%, -50%)"})}else y({top:"50%",left:"50%",transform:"translate(-50%, -50%)"})}),100);return()=>clearTimeout(e)}}),[c,x,u]),(0,e.useEffect)((()=>{r&&!c&&i&&T(r)}),[r,c,i,T]),c&&v&&x?t().createElement(H.Portal,null,x.overlay&&t().createElement(H.Backdrop,{open:!0,sx:{zIndex:9997,bgcolor:"rgba(0,0,0,0.7)"},onClick:x.clickThrough?null:e=>e.stopPropagation()}),x.elementSelector&&t().createElement(Y,{elementSelector:x.elementSelector,visible:c,pulse:x.pulse}),t().createElement(H.Fade,{in:c},t().createElement(Q,{step:u,totalSteps:v.steps.length,title:v.title,content:x.content,position:g,onNext:S,onPrev:w,onClose:k,onSkip:I}))):t().createElement($,{open:h,onClose:()=>f(!1),tours:a,onSelectTour:T})};ee.propTypes={tours:p().arrayOf(p().shape({id:p().string.isRequired,title:p().string.isRequired,description:p().string,duration:p().oneOfType([p().string,p().number]),steps:p().arrayOf(p().shape({elementSelector:p().string,title:p().string,content:p().oneOfType([p().string,p().node]).isRequired,overlay:p().bool,pulse:p().bool,clickThrough:p().bool})).isRequired})).isRequired,activeTourId:p().string,onTourComplete:p().func,onTourSkip:p().func,autoStart:p().bool};var te=document.createElement("style");te.textContent="\n  @keyframes pulse {\n    0% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 0.6;\n      transform: scale(1.05);\n    }\n    100% {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n",document.head.appendChild(te);const ne=ee;const ae=()=>{var[n,a]=(0,e.useState)(null),[r,l]=(0,e.useState)(!1),[o,i]=(0,e.useState)(!1),{tours:c,startTour:s,helpPreferences:m,toggleHelpVisibility:d,toggleToursVisibility:u,resetTourCompletion:p,activeTourId:g,handleTourComplete:y}=(0,Z.yD)(),h=(0,e.useCallback)((e=>{a(e.currentTarget)}),[]),f=(0,e.useCallback)((()=>{a(null)}),[]),E=(0,e.useCallback)((()=>{f(),l(!0)}),[f]),b=(0,e.useCallback)((e=>{l(!1),s(e)}),[s]),v=(0,e.useCallback)((()=>{f(),i(!0)}),[f]),x=c.some((e=>!m.completedTours.includes(e.id)));return t().createElement(t().Fragment,null,t().createElement(H.Zoom,{in:!0},t().createElement(H.Fab,{color:"primary",size:"medium","aria-label":"Help",onClick:h,sx:{position:"fixed",bottom:{xs:16,sm:24},right:{xs:16,sm:24},zIndex:1e3}},t().createElement(H.Badge,{color:"error",variant:"dot",invisible:!x},t().createElement(K.Help,null)))),t().createElement(H.Menu,{anchorEl:n,open:Boolean(n),onClose:f,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},t().createElement(H.MenuItem,{onClick:E},t().createElement(H.ListItemIcon,null,t().createElement(K.OndemandVideo,null)),t().createElement(H.ListItemText,{primary:"Guided Tours",secondary:"Interactive step-by-step guides"}),x&&t().createElement(H.Badge,{color:"error",variant:"dot",sx:{ml:1}})),t().createElement(H.MenuItem,{onClick:v},t().createElement(H.ListItemIcon,null,t().createElement(K.LiveHelp,null)),t().createElement(H.ListItemText,{primary:"Help Center",secondary:"Browse all help topics"})),t().createElement(H.Divider,null),t().createElement(H.MenuItem,{onClick:d},t().createElement(H.ListItemIcon,null,t().createElement(K.Info,null)),t().createElement(H.ListItemText,{primary:"".concat(m.showHelp?"Hide":"Show"," Help Icons"),secondary:"Toggle contextual help tooltips"})),t().createElement(H.MenuItem,{onClick:u},t().createElement(H.ListItemIcon,null,t().createElement(K.OndemandVideo,null)),t().createElement(H.ListItemText,{primary:"".concat(m.showTours?"Disable":"Enable"," Tours"),secondary:"Toggle guided tour suggestions"})),t().createElement(H.MenuItem,{onClick:p},t().createElement(H.ListItemIcon,null,t().createElement(K.Settings,null)),t().createElement(H.ListItemText,{primary:"Reset Tour Progress",secondary:"Mark all tours as not completed"}))),t().createElement(H.Dialog,{open:r,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0},t().createElement(H.DialogTitle,null,t().createElement(H.Box,{display:"flex",alignItems:"center",justifyContent:"space-between"},t().createElement(H.Typography,{variant:"h6"},"Guided Tours"),t().createElement(H.IconButton,{edge:"end",color:"inherit",onClick:()=>l(!1),"aria-label":"close"},t().createElement(K.Close,null)))),t().createElement(H.DialogContent,{dividers:!0},t().createElement(H.Typography,{variant:"body2",paragraph:!0},"Select a guided tour to learn about different features of the application."),c.map((e=>t().createElement(H.Paper,{key:e.id,elevation:0,sx:{p:2,mb:2,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:"action.hover",borderColor:"primary.light"}},onClick:()=>b(e.id)},t().createElement(H.Box,{display:"flex",alignItems:"flex-start"},t().createElement(K.OndemandVideo,{color:"primary",sx:{mr:2,mt:.5,fontSize:"1.5rem"}}),t().createElement(H.Box,{flex:1},t().createElement(H.Typography,{variant:"subtitle1",sx:{mb:.5}},e.title),t().createElement(H.Typography,{variant:"body2",color:"text.secondary"},e.description),t().createElement(H.Box,{sx:{display:"flex",alignItems:"center",mt:1,color:"text.secondary",fontSize:"0.75rem"}},t().createElement(K.Info,{sx:{fontSize:"0.875rem",mr:.5}}),e.steps.length," steps \u2022 ",e.duration," min",m.completedTours.includes(e.id)&&t().createElement(H.Typography,{component:"span",sx:{ml:2,color:"success.main",fontSize:"0.75rem",fontWeight:"medium"}},"Completed")))))))),t().createElement(H.DialogActions,null,t().createElement(H.Button,{onClick:()=>l(!1)},"Close"))),t().createElement(H.Dialog,{open:o,onClose:()=>i(!1),maxWidth:"md",fullWidth:!0},t().createElement(H.DialogTitle,null,t().createElement(H.Box,{display:"flex",alignItems:"center",justifyContent:"space-between"},t().createElement(H.Typography,{variant:"h6"},"Help Center"),t().createElement(H.IconButton,{edge:"end",color:"inherit",onClick:()=>i(!1),"aria-label":"close"},t().createElement(K.Close,null)))),t().createElement(H.DialogContent,{dividers:!0},t().createElement(H.Box,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2}},t().createElement(H.Box,{sx:{width:{xs:"100%",md:"240px"},borderRight:{xs:"none",md:"1px solid"},borderBottom:{xs:"1px solid",md:"none"},borderColor:"divider",pb:{xs:2,md:0},pr:{xs:0,md:2}}},t().createElement(H.Typography,{variant:"subtitle1",sx:{mb:1,fontWeight:"medium"}},"Help Topics"),t().createElement(H.List,{dense:!0,disablePadding:!0},t().createElement(H.ListItem,{disablePadding:!0,sx:{display:"block",mb:.5}},t().createElement(H.Button,{sx:{justifyContent:"flex-start",textAlign:"left",pl:1},fullWidth:!0},"Getting Started")),t().createElement(H.ListItem,{disablePadding:!0,sx:{display:"block",mb:.5}},t().createElement(H.Button,{sx:{justifyContent:"flex-start",textAlign:"left",pl:1},fullWidth:!0},"Integrations")),t().createElement(H.ListItem,{disablePadding:!0,sx:{display:"block",mb:.5}},t().createElement(H.Button,{sx:{justifyContent:"flex-start",textAlign:"left",pl:1},fullWidth:!0},"Data Transformation")),t().createElement(H.ListItem,{disablePadding:!0,sx:{display:"block",mb:.5}},t().createElement(H.Button,{sx:{justifyContent:"flex-start",textAlign:"left",pl:1},fullWidth:!0},"Scheduling")),t().createElement(H.ListItem,{disablePadding:!0,sx:{display:"block",mb:.5}},t().createElement(H.Button,{sx:{justifyContent:"flex-start",textAlign:"left",pl:1},fullWidth:!0},"Troubleshooting")))),t().createElement(H.Box,{sx:{flex:1}},t().createElement(H.Typography,{variant:"h6",sx:{mb:2}},"Getting Started with Integrations"),t().createElement(H.Typography,{variant:"body1",paragraph:!0},"Integrations allow you to transfer and transform data between different systems. Here's how to get started:"),t().createElement(H.Typography,{variant:"subtitle1",sx:{mt:3,mb:1}},"Creating Your First Integration"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},'1. Navigate to the Integrations page and click "Create Integration"'),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"2. Fill in the basic information including name, description, and integration type"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"3. Configure your source connection by selecting the data source type and entering the required credentials"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"4. Configure your destination connection where the data will be sent"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"5. Set up field mapping to define how data fields from the source map to the destination"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"6. Configure scheduling options to determine when the integration will run"),t().createElement(H.Typography,{variant:"body2",paragraph:!0},"7. Save and test your integration to ensure it works as expected"),t().createElement(H.Box,{sx:{bgcolor:"info.lightest",p:2,borderRadius:1,mt:3,display:"flex",alignItems:"flex-start"}},t().createElement(K.Lightbulb,{color:"info",sx:{mr:1,mt:.5}}),t().createElement(H.Box,null,t().createElement(H.Typography,{variant:"subtitle2",color:"info.dark"},"Pro Tip"),t().createElement(H.Typography,{variant:"body2"},"Use the guided tours to learn more about specific features. You can access tours by clicking the Help button in the bottom right corner.")))))),t().createElement(H.DialogActions,null,t().createElement(H.Button,{onClick:()=>i(!1)},"Close"))),t().createElement(ne,{tours:c,activeTourId:g,onTourComplete:y,autoStart:m.showTours}))};var re=n(274),le=(0,e.createContext)({});function oe(e){var{children:n}=e;return t().createElement(ie,null,n)}function ie(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(le.Provider,{value:{state:r,setState:l}},a)}var ce=(0,e.createContext)({});function se(e){var{children:n}=e;return t().createElement(me,null,n)}function me(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(ce.Provider,{value:{state:r,setState:l}},a)}var de=(0,e.createContext)({});function ue(e){var{children:n}=e;return t().createElement(pe,null,n)}function pe(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(de.Provider,{value:{state:r,setState:l}},a)}var ge=(0,e.createContext)({});function ye(e){var{children:n}=e;return t().createElement(he,null,n)}function he(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(ge.Provider,{value:{state:r,setState:l}},a)}var fe=(0,e.createContext)({});function Ee(e){var{children:n}=e;return t().createElement(be,null,n)}function be(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(fe.Provider,{value:{state:r,setState:l}},a)}var ve=(0,e.createContext)({});function xe(e){var{children:n}=e;return t().createElement(Ce,null,n)}function Ce(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(ve.Provider,{value:{state:r,setState:l}},a)}var Te=(0,e.createContext)({});function Se(e){var{children:n}=e;return t().createElement(we,null,n)}function we(n){var{children:a}=n,[r,l]=(0,e.useState)({});return t().createElement(Te.Provider,{value:{state:r,setState:l}},a)}var ke=t().lazy((()=>Promise.resolve().then(n.bind(n,987)))),Ie=t().lazy((()=>Promise.resolve().then(n.bind(n,541)))),Be=t().lazy((()=>Promise.resolve().then(n.bind(n,875)))),Pe=t().lazy((()=>Promise.resolve().then(n.bind(n,998)))),De=t().lazy((()=>Promise.resolve().then(n.bind(n,270)))),Oe=t().lazy((()=>Promise.resolve().then(n.bind(n,990)))),Ae=t().lazy((()=>Promise.resolve().then(n.bind(n,29)))),ze=t().lazy((()=>Promise.resolve().then(n.bind(n,612)))),Me=t().lazy((()=>Promise.resolve().then(n.bind(n,960)))),Fe=t().lazy((()=>Promise.resolve().then(n.bind(n,472)))),je=t().lazy((()=>Promise.resolve().then(n.bind(n,262)))),Re=t().lazy((()=>Promise.resolve().then(n.bind(n,421))));const Ne=()=>t().createElement(G.Routes,null,t().createElement(G.Route,{path:"/login",element:t().createElement(Ie,null)}),t().createElement(G.Route,{path:"/",element:t().createElement(je,null,t().createElement(ke,null))}),t().createElement(G.Route,{path:"/integrations",element:t().createElement(je,null,t().createElement(Be,null))}),t().createElement(G.Route,{path:"/integrations/:id",element:t().createElement(je,null,t().createElement(Pe,null))}),t().createElement(G.Route,{path:"/earnings",element:t().createElement(je,null,t().createElement(De,null))}),t().createElement(G.Route,{path:"/admin",element:t().createElement(Re,null,t().createElement(Oe,null))}),t().createElement(G.Route,{path:"/settings",element:t().createElement(je,null,t().createElement(Ae,null))}),t().createElement(G.Route,{path:"/dev/test-s3",element:t().createElement(ze,null)}),t().createElement(G.Route,{path:"/dev/test-sharepoint",element:t().createElement(Me,null)}),t().createElement(G.Route,{path:"/dev/test-api-webhook",element:t().createElement(Fe,null)}),t().createElement(G.Route,{path:"*",element:t().createElement(G.Navigate,{to:"/"})}));var _e=e=>t().createElement("div",{className:"navigation-component"},"Navigation Component");_e.displayName="Navigation";const Le=_e;function We(){var t=(0,e.useRef)(null),n=(0,e.useRef)(null),a=(0,e.useCallback)((()=>{n.current&&(n.current.focus(),n.current.scrollIntoView())}),[]);return{skipLinkRef:t,mainContentRef:n,skipToContent:a}}function Ge(){Ge.displayName="ScrollToTop";var[n,a]=(0,e.useState)(!1);(0,e.useEffect)((()=>{var e=()=>{var e=window.scrollY;a(e>100)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return n?t().createElement(V.xu,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},role:"presentation",position:"fixed",bottom:16,right:16,zIndex:1e3,style:{opacity:n?1:0,transition:"opacity 0.3s",display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:"50%",backgroundColor:"primary",color:"white",cursor:"pointer",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},"aria-label":"scroll back to top"},t().createElement(V.UA,null)):null}const Ve=function n(){return n.displayName="App",We(),(0,e.useEffect)((()=>{if(document.documentElement.lang="en",document.title="TAP Integration Platform",!document.getElementById("modal-root")){var e=document.createElement("div");e.id="modal-root",document.body.appendChild(e)}if(!document.getElementById("sr-announcer")){var t=document.createElement("div");t.id="sr-announcer",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.style.clip="rect(0, 0, 0, 0)",t.style.whiteSpace="nowrap",document.body.appendChild(t)}return()=>{var e=document.getElementById("modal-root"),t=document.getElementById("sr-announcer");e&&document.body.removeChild(e),t&&document.body.removeChild(t)}}),[]),t().createElement(V.f6,{initialMode:"light"},t().createElement(oe,null,t().createElement(re.dr,null,t().createElement(N.JB,null,t().createElement(Se,null,t().createElement(se,null,t().createElement(ue,null,t().createElement(ye,null,t().createElement(Ee,null,t().createElement(Z.iE,null,t().createElement(G.BrowserRouter,null,t().createElement(xe,null,t().createElement("a",{href:"#main-content",className:"skip-nav",style:{position:"absolute",top:"-40px",left:0,backgroundColor:"primary",color:"white",padding:"8px",zIndex:2e3,transition:"top 0.2s"},onFocus:e=>{e.target.style.top="0"},onBlur:e=>{e.target.style.top="-40px"}},"Skip to main content"),t().createElement(Le,null),t().createElement(V.xu,{component:"main",id:"main-content",tabIndex:"-1",display:"flex",flexDirection:"column",minHeight:"calc(100vh - 64px)",style:{outline:"none"}},t().createElement(Ne,null)),t().createElement(U,null),t().createElement(Ge,null),t().createElement(ae,null)))))))))))))};const qe={api:{baseUrl:process.env.REACT_APP_API_URL||"/api",timeout:3e4},auth:{providers:{local:!0,office365:!0,gmail:!0},tokenStorageKey:"auth_token",userInfoStorageKey:"user_info"},features:{multiTenant:!0,azureBlobStorage:!0,scheduling:!0,fieldMapping:!0,canvas:!0},ui:{theme:"light",primaryColor:"#48C2C5",secondaryColor:"#FC741C",logo:"/logo.png"}},Ue=Ve;var He=n(776),Ke=n.n(He);console.debug("Setting up polyfills");const Ze={initPolyfills:function(){console.debug("Manually initializing polyfills")}};var Je=n(94),Xe=n.n(Je);const Ye={enableMocks:!0,logLevel:"error",timeouts:{api:5e3,render:1e3,animation:300},testUsers:{admin:{username:"admin@example.com",password:"admin-password"},standard:{username:"user@example.com",password:"user-password"}}};const Qe={palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0",contrastText:"#fff"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2",contrastText:"#fff"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828",contrastText:"#fff"},warning:{main:"#ed6c02",light:"#ff9800",dark:"#e65100",contrastText:"#fff"},info:{main:"#0288d1",light:"#03a9f4",dark:"#01579b",contrastText:"#fff"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20",contrastText:"#fff"},background:{default:"#f5f5f5",paper:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700},shape:{borderRadius:4},spacing:8};const $e={version:"1.0.0",description:"TAP Integration Platform components library"}})();var r=a.bZ,l=a.gV,o=a.$w,i=a.zx,c=a.Zb,s=a.aY,m=a.XZ,d=a.E_,u=a.qs,p=a.SV,g=a.rU,y=a.u_,h=a.uj,f=a.l4,E=a.JB,b=a.OK,v=a.iA,x=a.mQ,C=a.nv,T=a.ZT,S=a.oj,w=a.vc,k=a._e,I=a.ZP,B=a.DH,P=a.dF,D=a.R4,O=a.dq,A=a.Rh,z=a.rS,M=a.qK,F=a.ZR,j=a.lm,R=a.b7;export{r as Alert,l as App,o as AppRoutes,i as Button,c as Card,s as CardContent,m as Checkbox,d as ConfigContext,u as ConfigContextProvider,p as ErrorBoundary,g as Link,y as Modal,h as NotificationContext,f as NotificationContextProvider,E as NotificationProvider,b as Tab,v as Table,x as Tabs,C as TextField,T as Typography,S as componentsToBuild,w as config,k as createCompatContext,I as default,B as main,P as polyfills,D as setupPolyfills,O as setupTests,A as test_config,z as theme,M as useCompatEffect,F as useConfig,j as useNotification,R as withReact18Compatibility};